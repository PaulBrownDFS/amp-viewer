{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/viewer.js","src/utils/namespace.js","src/integration-viewer/index.js","src/common/jquery.js","src/quick-viewer/index.js","src/desktop-viewer/index.js","src/mobile-viewer/index.js","src/common/baseViewer.js","src/common/zoomController.js","src/common/capabilities.js","src/fullscreen-viewer/index.js","src/common/roundels.js","src/templates/templates.compiled.js","src/common/hbsHelpers.js","src/common/namespace.js","src/common/diService.js","src/utils/log.js","src/common/navController.js","src/common/quickLinksController.js","src/common/uiHintController.js","src/common/boxController.js","src/common/videoController.js"],"names":["amp","require","$","QuickViewer","DesktopViewer","MobileViewer","IntegrationViewer","createViewer","config","defaultConfig","server","errImgName","account","mobile","quickView","debug","rangeName","productName","preloadVideos","templates","imageMain","imageThumb","wideDesktop","fullScreen","screenWidth","mobileView","roundels","uiHintTimers","displayTimer","transitionTimer","mergedConfig","extend","namespace","window","module","exports","template","integrationKeys","viewModel","integrationPoints","viewerOptions","i","len","length","push","key","value","toString","product","JSON","stringify","videoSortOrder","target","html","BaseViewer","ZoomController","capabilityDetection","this","viewerType","apply","arguments","prototype","Object","create","_resize","ui","controllers","zoomController","zoomOutFull","_resizeNavThumbsFunction","navController","_resizeNavThumbsOverflow","_bindViewerEvents","self","controls","$close","on","videoController","pause","_destroyComponents","off","$zoomIn","$zoomOut","currentSlide","_beforeViewerCreated","_initViewerComponents","mainCarouselOptions","preloadNext","onActivate","goTo","select","loop","animate","gesture","enabled","fingers","getIsIE","no3D","$main","ampCarousel","$nav","dir","height","width","easing","animDuration","find","ampZoomInline","scaleSteps","events","zoomIn","zoomOut","move","pan","pinch","transforms","imageZoom","_resizeBase","bind","_destroyViewerComponents","$currentSlide","_cacheViewerDom","$renderedDom","FullscreenViewer","parentViewer","_getThumbsContainerHeight","thumbsContainerHeight","small","big","css","responsive","$roundels","quickLinks","$fullscreenLink","openFullscreenViewer","fullscreen","setData","items","indexOfBaseView","index","indexOfFullView","_updateViewer","currentSlideIndex","name","open","reset","closeFullscreenViewer","close","render","templateNavItem","DiService","log","NavController","QuickLinksController","UiHintController","BoxController","VideoController","ampVideo","_calcSize","configParams","templateMainItem","assetsPath","$el","empty","diService","path","cacheBust","_createViewer","_getSet","setName","warn","callback","getMediaSet","_updateSetData","err","src","errImgURL","call","updateMediaSet","_enrichWithTemplateData","_cacheDom","_initComponents","_bindEvents","preventSwipe","pauseAllVideo","mainItems","navItems","itemViewModel","item","closest","overflow","_onMainSlideChange","quickLinksController","init","boxController","uiHintController","_resizeAllVideo","removeClass","_debouncedResizeVideo","_parentCurrentSlideSpinset","$parentSlide","ampImage","spinsetAutoplay","preloadType","spinsetPreloadFirst","each","ampSpin","preload","play","onLoad","onVisible","repeat","change","ampStack","reclinerPreloadFirst","delay","momentum","dragDistance","pauseOnHide","skin","swfUrl","enableSoftStates","videos","arrVideos","toArray","iOS","test","navigator","userAgent","MSStream","touchPlBtn","forEach","el","removeAttr","iterator","_isSpecialSet","set","recliner","box","mimeType","canWebGL","content","splice","media","vidWidth","vidHeight","_getNameFromUrl","substring","lastIndexOf","$next","$prev","$spinsetLink","$reclinerLink","$boxLink","$videoLink","mainSelect","slideIndex","getMainChildren","children","setTimeout","stats","type","event","cb","visibility","commonMobileDevice","touch","setType","data","is","$spin","spinData","$webgl","$video","hasOldSlide","$oldSlide","_loading","attr","$selectedNavSlide","update","_resizeCurrentVideo","sel","overlayEl","append","e","stopPropagation","disableTouchScroll","document","evt","preventDefault","enableTouchScroll","disableCssScroll","addClass","enableCssScroll","$cachedCurrentSlide","click","a","b","c","zoomInfo","_invalidateZoomButtons","_slideToggleZoomedClass","opts","className","action","$zoom","currentZoom","scale","scaleMax","slide","$slide","zoomAuto","zoomState","oldSlide","$allZooms","indexPrev","indexNext","ignoreInZoomCheck","$currentZoom","$zoomContainer","parent","inZoom","canvas","createElement","capabilities","commonDeviceRegEx","toLowerCase","WebGLRenderingContext","getContext","isIE","indexOf","appVersion","_maintainAspectRatio","cw","ch","oas","cas","display","parsePosition","positionText","$target","parsedRoundels","position","description","sort","roundelsTemplate","renderedDom","Handlebars","registerPartial","1","container","depth0","helpers","partials","blockParams","depths","stack1","blockHelperMissing","lambda","hash","fn","program","inverse","noop","invokePartial","decorators","2","nullContext","3","helper","alias1","escapeExpression","helperMissing","5","7","8","9","10","12","14","15","16","17","19","21","22","alias2","23","alias3","alias4","profileLabel","bitrate","htmlCodec","25","26","28","29","31","compiler","main","usePartial","useData","useDepths","4","6","13","renderPartial","indent","registerHelper","partialName","options","error","partial","SafeString","lvalue","operator","rvalue","operators","result","Error","undefined","===","l","r","!==","<",">","<=",">=","typeof","defaultErrorSet","_validOptions","initOptions","client_id","cache_window","di_basepath","getAssetURL","success","get","logFns","history","fallback","ieLegacy","Function","console","Array","slice","specializedFn","defaultFn","ampLog","updateNavUI","proxy","prev","next","_positionVisibleThumbs","$thumbs","thumbsLength","$thumbsContainer","filter","calculatedWidth","outerWidth","resizeNavtimeout","resizeCallback","clearTimeout","timeout","visibleThumbs","numberOfThumbs","canNext","canPrev","currentIndex","totalThumbsArr","arr","getVisibleArr","rootNavEl","assets","hasClass","currentThumbArr","total","visibleAssets","answer","centralEl","Math","floor","direction","abs","currIndex","elIndex","central","diff","count","j","quickLinkMap","spinset","video","$quicklinks","openFullscreen","quicklinkModel","_spinsetIsSpinning","_spinsetSpinningEvent","_spinningTimeout","p","model","class","unbind","first","videoAction","$videoHolder","boxAction","boxToggle","eq","spinAction","$lastSlide","configObject","_overlayTimeouts","hideMobileOverlayTimeout","$overlay","_baseViewer","showMobileOverlay","hideMobileOverlay","_createUi","$viewer","uiHints","$clickTraps","$exitHints","opacity","_doubleTapBehavior","ts","timeStamp","oldTime","$tag","_eventHelpers","showSpinModeClickTrap","$clickTrap","showExitSpinModeHint","$exitHint","$uiHints","$this","_startDrag","isHintSlide","$showOverlay","$hideOverlay","baseViewer","selectedIndex","toggledIndex","toggle","timer","$currentPiPSlide","_resizeVideo","$allVideo","webkitSupportsPresentationMode","webkitSetPresentationMode","webkitPresentationMode","$vidWidget","$currentVideoSlide","VIDEO_PAUSED","VIDEO_STOPPED","currentState","$ampVideo","$videoEl","containerSize","originalMediaSize","aspectFit","aspectRatio"],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","\"use strict\";\nvar amp = require('./utils/namespace');\nvar $ = require('./common/jquery');\nvar QuickViewer = require('./quick-viewer');\nvar DesktopViewer = require('./desktop-viewer');\nvar MobileViewer = require('./mobile-viewer');\nvar IntegrationViewer = require('./integration-viewer/index');\n\namp.createViewer = function viewerFactory(config) {\n    var defaultConfig = {\n        server: '//i1.adis.ws',\n        errImgName: 'img404',\n        account: 'dfs',\n        mobile: false,\n        quickView: false,\n        debug: false,\n        rangeName: '',\n        productName: '',\n        preloadVideos: 'none', // or 'auto' will preload at page load\n        templates: {\n            imageMain: '$pdp-main$',\n            imageThumb: '$pdp-thumb$',\n            wideDesktop: {\n                imageMain: '$pdp-main-wide$',\n                imageThumb: '$pdp-thumb-wide$'\n            },\n            fullScreen: {\n                screenWidth : true,\n                imageMain: '$pdp-fullscreen$',\n                imageThumb: '$pdp-thumb$'\n            },\n            quickView: {\n                imageMain: '$pdp-quickview$',\n                imageThumb: '$pdp-thumb$'\n            },\n            mobileView: {\n                imageMain: '$pdp-mobile$'\n            }\n        },\n        roundels: [],\n        // defaults for ui hide and fadeOut timers\n        uiHintTimers: {\n            displayTimer : 3000,\n            transitionTimer : 400\n        }\n    };\n\n    var mergedConfig = $.extend(true, {}, defaultConfig, config);\n\n    if (config.mobile) {\n        // create mobile viewer\n        return new MobileViewer(mergedConfig);\n    } else if (config.quickView) {\n        return new QuickViewer(mergedConfig);\n    } else if (config.debug) {\n        return new IntegrationViewer(mergedConfig);\n    } else {\n        return new DesktopViewer(mergedConfig);\n    }\n};\n","\"use strict\";\n/* jshint -W097 */\n// provides the namespace to use for this app\n\nvar namespace = window.amp = window.amp || {};\n\nmodule.exports = namespace;\n","\"use strict\";\nvar templates = require('../templates/templates.compiled');\nvar $ = require('../common/jquery');\n\nvar IntegrationViewer = function IntegrationViewer(config) {\n    var template = templates['template-integration'];\n\n    var integrationKeys = ['mobile', 'quickView', 'productName', 'rangeName', 'locale', 'setName'];\n\n    var viewModel = {\n        integrationPoints: [],\n        viewerOptions: []\n    };\n\n    for (var i = 0, len = integrationKeys.length; i < len; i++) {\n        viewModel.integrationPoints.push({\n            key: integrationKeys[i],\n            value: integrationKeys[i] && config[integrationKeys[i]].toString()\n        });\n    }\n\n    viewModel.viewerOptions.push({\n        key: 'product',\n        value: config.product\n    });\n\n    viewModel.viewerOptions.push({\n        key: 'roundels',\n        value: JSON.stringify(config.roundels, null, 2)\n    });\n\n    viewModel.viewerOptions.push({\n        key: 'templates',\n        value: JSON.stringify(config.templates, null, 2)\n    });\n\n    viewModel.viewerOptions.push({\n        key: 'server',\n        value: config.server\n    });\n\n    viewModel.viewerOptions.push({\n        key: 'account',\n        value: config.account\n    });\n\n    viewModel.viewerOptions.push({\n        key: 'videoSortOrder',\n        value: JSON.stringify(config.videoSortOrder)\n    });\n\n    $(config.target).html(template(viewModel));\n};\n\nmodule.exports = IntegrationViewer;\n","\"use strict\";\nvar $ = window.$;\n\nmodule.exports = $;\n","\"use strict\";\nvar $ = require('../common/jquery');\nvar BaseViewer = require('../common/baseViewer');\nvar ZoomController = require('../common/zoomController');\nvar capabilityDetection = require('../common/capabilities');\n\nvar QuickViewer = function QuickViewer(config) {\n    this.viewerType = 'quickview';\n    this.templates = config.templates.quickView;\n    return BaseViewer.apply(this, arguments);\n};\n\nQuickViewer.prototype = Object.create(BaseViewer.prototype);\n\nQuickViewer.prototype._resize = function () {\n    this.ui.controllers.zoomController.zoomOutFull(true);\n    if (!this._resizeNavThumbsFunction) {\n        this._resizeNavThumbsFunction = this.ui.controllers.navController._resizeNavThumbsOverflow();\n    }\n\n    this._resizeNavThumbsFunction();\n};\n\nQuickViewer.prototype._bindViewerEvents = function () {\n    var self = this;\n\n    this.ui.controls.$close.on('click', function () {\n        self.ui.controllers.videoController.pause();\n        self._destroyComponents();\n        $(window).off('resize.amp.quickview.resize');\n    });\n\n    this.ui.controllers.zoomController = new ZoomController(\n            this.ui.controls.$zoomIn,\n            this.ui.controls.$zoomOut,\n            this.ui.currentSlide\n            );\n};\n\nQuickViewer.prototype._beforeViewerCreated = function () {\n\n};\n\nQuickViewer.prototype._initViewerComponents = function () {\n\n    var mainCarouselOptions = {\n        'preloadNext': false,\n        'onActivate': {'goTo': false, 'select': false},\n        'loop': false,\n        'animate': true,\n        'gesture': {'enabled': true, 'fingers': 1}\n    };\n\n    //TODO: Get rid of ASAP :(\n    if (capabilityDetection.getIsIE()) {\n        mainCarouselOptions.no3D = true;\n    }\n\n    this.ui.$main.ampCarousel(mainCarouselOptions);\n\n    this.ui.$nav.ampCarousel({\n        'onActivate': {'select': false, 'goTo': false},\n        'preloadNext': false,\n        'dir': 'horz',\n        'loop': false,\n        'height': 46,\n        'width': 380,\n        'easing': 'ease-in-out',\n        'animDuration': 600\n    });\n\n    this.ui.$main.find('.amp-zoomable').ampZoomInline({\n        'scaleSteps': true,\n        'events': {'zoomIn': 'none', 'zoomOut': 'none', 'move': 'none'},\n        'pan': true,\n        'pinch': true,\n        'transforms': this.templates.imageZoom\n    });\n\n    $(window).on('resize.amp.quickview.resize', this._resizeBase.bind(this));\n};\n\nQuickViewer.prototype._destroyViewerComponents = function () {\n    this.ui.$main.find('.amp-zoomable').ampZoomInline('destroy');\n    this.$currentSlide = void 0;\n};\n\nQuickViewer.prototype._cacheViewerDom = function ($renderedDom) {\n    $.extend(true, this.ui, {\n        controls: {\n            $close: $renderedDom.find('.amp-close'),\n            $zoomIn: $renderedDom.find('.amp-zoom-in'),\n            $zoomOut: $renderedDom.find('.amp-zoom-out')\n        }\n    });\n};\n\nmodule.exports = QuickViewer;\n","\"use strict\";\nvar BaseViewer = require('../common/baseViewer');\nvar FullscreenViewer = require('../fullscreen-viewer/index');\nvar $ = require('../common/jquery');\nvar roundels = require('../common/roundels');\nvar capabilityDetection = require('../common/capabilities');\n\nvar DesktopViewer = function DesktopViewer(config) {\n    this.viewerType = 'desktop';\n    config.parentViewer = this;\n    this.roundels = config.roundels;\n    this.config = config;\n\n    if ($(window).width() >= 1366) {\n        this.templates = config.templates.wideDesktop;\n    }\n\n    return BaseViewer.apply(this, arguments);\n};\n\nDesktopViewer.prototype = Object.create(BaseViewer.prototype);\n\nDesktopViewer.prototype._getThumbsContainerHeight = function () {\n    if ($(window).width() < 1366) {\n        return this.thumbsContainerHeight.small;\n    }\n    return this.thumbsContainerHeight.big;\n};\n\nDesktopViewer.prototype._resize = function () {\n    var self = this;\n\n    if (!this._resizeNavThumbsFunction) {\n        this._resizeNavThumbsFunction = this.ui.controllers.navController._resizeNavThumbsOverflow();\n    }\n\n    this._resizeNavThumbsFunction();\n    this.ui.$nav.ampCarousel('redraw');\n    this.ui.$nav.css({\n        height: self._getThumbsContainerHeight()\n    });\n};\n\nDesktopViewer.prototype._initViewerComponents = function () {\n    var self = this;\n    var mainCarouselOptions = {\n        'preloadNext': false,\n        'width': 600,\n        'height': 318,\n        'onActivate': {'goTo': false, 'select': false},\n        'loop': false,\n        'animate': true,\n        'gesture': {'enabled': true, 'fingers': 1}\n    };\n\n    //TODO: Get rid of ASAP :(\n    if (capabilityDetection.getIsIE()) {\n        mainCarouselOptions.no3D = true;\n    }\n\n    this.ui.$main.ampCarousel(mainCarouselOptions);\n\n    this.thumbsContainerHeight = {\n        small: 46,\n        big: 53\n    };\n\n    this.ui.$nav.ampCarousel({\n        'onActivate': {'select': false, 'goTo': false},\n        'preloadNext': false,\n        'dir': 'horz',\n        'responsive': false,\n        'loop': false,\n        'height': self._getThumbsContainerHeight(),\n        'easing': 'ease-in-out',\n        'animDuration': 600\n    });\n    $(window).on('resize.amp.desktop.resize', this._resizeBase.bind(this));\n};\n\nDesktopViewer.prototype._destroyViewerComponents = function () {\n    $(window).off('resize.amp.desktop.resize');\n};\n\nDesktopViewer.prototype._cacheViewerDom = function ($renderedDom) {\n    var self = this;\n    $.extend(true, self.ui, {\n        $roundels: $renderedDom.find('.amp-roundels'),\n        quickLinks: {\n            $fullscreenLink: $renderedDom.find('.amp-quicklink-fullscreen')\n        },\n        openFullscreenViewer: function () {\n\n            if (!self.fullscreen || self.fullscreen.setData.items.length !== self.setData.items.length) {\n                self.fullscreen = null;\n                var currentSlideIndex = self.ui.currentSlide().index();                     //////  Remember current slide\n                self.fullscreen = new FullscreenViewer(self.config);                        //////  Sets current slide to 0 in desktop viewer\n                self.fullscreen.ui.controllers.navController.select(currentSlideIndex);     //////  Restore current slide\n            } else {\n                if (self.fullscreen.$currentSlide) {\n                    var indexOfBaseView = self.fullscreen.$currentSlide.index();\n                    var indexOfFullView = self.$currentSlide.index();\n\n                    if (indexOfBaseView !== indexOfFullView) {\n                        self.fullscreen._updateViewer(self.setData);\n                    }\n                }\n\n            }\n            if (self.setData.name !== self.fullscreen.setData.name) {\n                self.fullscreen._updateViewer(self.setData);\n            }\n            self.ui.controllers.videoController.pause();\n            self.fullscreen.open();\n            self.fullscreen.ui.controllers.zoomController.reset(self.fullscreen.ui.currentSlide());\n        },\n        closeFullscreenViewer: function () {\n            self.fullscreen.close();\n        }\n    });\n    roundels.render(self.ui.$roundels, self.roundels);\n};\n\nmodule.exports = DesktopViewer;\n","\"use strict\";\nvar templates = require('../templates/templates.compiled');\nvar $ = require('../common/jquery');\nvar BaseViewer = require('../common/baseViewer');\nvar ZoomController = require('../common/zoomController');\n\nvar MobileViewer = function MobileViewer(config) {\n    this.viewerType = 'mobile';\n    this.templates = config.templates.mobileView;\n    this.templateNavItem = templates['_template-nav-item-alt'];\n    return BaseViewer.apply(this, arguments);\n};\n\nMobileViewer.prototype = Object.create(BaseViewer.prototype);\n\nMobileViewer.prototype._resize = function () {\n    this.ui.controllers.zoomController.zoomOutFull(true);\n};\n\nMobileViewer.prototype._bindViewerEvents = function () {\n    var self = this;\n\n    self.ui.controllers.zoomController = new ZoomController(\n        self.ui.controls.$zoomIn,\n        self.ui.controls.$zoomOut,\n        self.ui.currentSlide\n    );\n};\n\nMobileViewer.prototype._initViewerComponents = function () {\n    this.ui.$main.ampCarousel({\n        'width': 600,\n        'height': 318,\n        'onActivate': {'goTo': false, 'select': false},\n        'loop': false,\n        'animate': true,\n        'gesture': {'enabled': true, 'fingers': 1}\n    });\n\n    this.ui.$nav.ampCarousel({\n        'onActivate': {'select': false, 'goTo': false},\n        'preloadNext': false,\n        'dir': 'horz',\n        'loop': false,\n        'height': 16,\n        'responsive': false,\n        'width': 104\n    });\n\n    this.ui.$main.find('.amp-zoomable').ampZoomInline({\n        'scaleSteps': true,\n        'events': {'zoomIn': 'none', 'zoomOut': 'none', 'move': 'none'},\n        'pan': true,\n        'pinch': true,\n        'transforms': this.templates.imageZoom\n    });\n\n    $(window).on('resize.amp.mobile.resize', this._resizeBase.bind(this));\n};\n\nMobileViewer.prototype._destroyViewerComponents = function () {\n    this.ui.$main.find('.amp-zoomable').ampZoomInline('destroy');\n    this.$currentSlide = void 0;\n\n    $(window).off('resize.amp.mobile.resize');\n};\n\nMobileViewer.prototype._cacheViewerDom = function ($renderedDom) {\n    $.extend(true, this.ui, {\n        controls: {\n            $zoomIn: $renderedDom.find('.amp-zoom-in'),\n            $zoomOut: $renderedDom.find('.amp-zoom-out')\n        }\n    });\n\n};\nmodule.exports = MobileViewer;\n","\"use strict\";\nrequire('./hbsHelpers');\nvar $ = require('./jquery');\nvar amp = require('./namespace');\nvar templates = require('../templates/templates.compiled');\nvar DiService = require('./diService');\nvar log = require('../utils/log');\nvar capabilityDetection = require('./capabilities');\nvar NavController = require('../common/navController');\nvar QuickLinksController = require('../common/quickLinksController');\nvar UiHintController = require('../common/uiHintController');\nvar BoxController = require('../common/boxController');\nvar VideoController = require('../common/videoController');\n\n//TODO:Find a better way to prevent video widget calcing size\n$.amp.ampVideo.prototype._calcSize = function () {\n};\n\n//Common functionality between viewers\nvar BaseViewer = function BaseViewer(config) {\n    this.configParams = config;\n    this.setData = null;\n    this.template = templates['template-' + this.viewerType];\n    this.templateNavItem = this.templateNavItem || templates['_template-nav-item'];\n    this.templateMainItem = this.templateMainItem || templates['_template-main-item'];\n    this.assetsPath = config.assetsPath;\n    this.productName = config.productName;\n    this.rangeName = config.rangeName;\n    this.templates = this.templates || config.templates;\n    // init timers from config for mobile information overlays. May be {Object} or {Boolean}false - if not specified\n    this.uiHintTimers = config.uiHintTimers || false;\n\n    this.ui = this.ui || {\n        $el: $(config.target)\n    };\n\n    if (!this.ui.$el.length) {\n        log.warn(this.viewerType + ' no target element defined.');\n        return;\n    }\n\n    if (typeof this._beforeViewerCreated === 'function') {\n        this._beforeViewerCreated();\n    }\n\n    this.ui.$el.empty();\n\n    this.diService = new DiService({\n        account: config.account,\n        path: config.server,\n        errImgName: config.errImgName,\n        cacheBust: config.cacheBust,\n        videoSortOrder: config.videoSortOrder\n    });\n\n    //no need to get set for child viewer, just pass through data\n    if (this.parentViewer && this.parentViewer.setData) {\n        this._createViewer(this.parentViewer.setData);\n    } else {\n        this._getSet(config.setName, this._createViewer);\n    }\n};\n\nBaseViewer.prototype = {\n    _getSet: function (setName, callback) {\n        var self = this;\n        if (!setName) {\n            log.warn(this.viewerType + ' no setName defined.');\n            return;\n        }\n        this.setName = setName;\n        this.diService.getMediaSet(setName,\n                function (setData) {\n                    self._updateSetData(setData, callback);\n                }, function (err) {\n            log.warn(self.viewerType + ' error retrieving mediaSet \\\"' + setName + '\\\". ', err);\n            err[setName].items = [\n                {src: self.diService.errImgURL}\n            ];\n            callback.call(self, err[setName]);\n        });\n    },\n    updateMediaSet: function (setName) {\n        this._getSet(setName, this._updateViewer);\n    },\n    _createViewer: function (setData) {\n        this.setData = setData;\n        this._enrichWithTemplateData(setData);\n        var $renderedDom = $(this.template(setData));\n\n        this.ui.$el.html($renderedDom);\n\n        this._cacheDom($renderedDom);\n        this._initComponents(true);\n        this._bindEvents();\n        this.preventSwipe();\n\n        //pause all amp-video we have access to\n        this.ui.controllers.videoController.pauseAllVideo();\n    },\n    _updateViewer: function (setData) {\n        this.setData = setData;\n        var mainItems = '';\n        var navItems = '';\n\n        for (var i = 0, len = setData.items.length; i < len; i++) {\n            var itemViewModel = {item: setData.items[i], templates: this.templates, productName: this.productName};\n            mainItems += this.templateMainItem(itemViewModel);\n            navItems += this.templateNavItem(itemViewModel);\n        }\n\n        //temporarily set height to parent container, which will be unset later\n        this.ui.$main.closest('.amp-main-container').css({\n            height: this.ui.$main.css('height'),\n            overflow: 'hidden'\n        });\n\n        this._destroyComponents();\n        this.ui.$main.html(mainItems);\n        this.ui.$nav.html(navItems);\n        this._initComponents();\n        this._onMainSlideChange();\n        this.ui.controllers.navController.reset();\n        this.ui.controllers.quickLinksController.init();\n        this.ui.controllers.boxController.reset();\n\n        if (this.ui.controllers.uiHintController) {\n            this.ui.controllers.uiHintController.init(this);\n        }\n\n        if (this.ui.controllers.zoomController) {\n            this.ui.controllers.zoomController.reset();\n        }\n\n        //pause all amp-video we have access to\n        this.ui.controllers.videoController.pauseAllVideo();\n\n        //init sizes for all video\n        this.ui.controllers.videoController._resizeAllVideo();\n\n        this.preventSwipe();\n\n        this.ui.$el.find('.amp-moz-invisible').removeClass('amp-moz-invisible');\n    },\n    _resizeBase: function () {\n        if (typeof this._resize === 'function') {\n            this._resize();\n        }\n        this.ui.controllers.videoController._debouncedResizeVideo();\n    },\n    _parentCurrentSlideSpinset: function () {\n        var self = this;\n        if (self.parentViewer && self.viewerType === 'fullscreen') {\n            var $parentSlide = self.parentViewer.$currentSlide;\n            if ($parentSlide.find('.amp-spinset').length > 0) {\n                return true;\n            }\n        }\n        return false;\n    },\n    _initComponents: function () {\n        var self = this;\n        self.ui.$main.find('[data-amp-src]').ampImage();\n\n        //call viewer specific\n        if (typeof this._initViewerComponents === 'function') {\n            this._initViewerComponents();\n        }\n\n        var spinsetAutoplay = this._parentCurrentSlideSpinset() ? false : true;\n        var preloadType = 'visible';\n        var spinsetPreloadFirst = false;\n\n        this.ui.$main.find('.amp-spinset').each(function () {\n            if (self.ui.currentSlide().find('.amp-spinset').length > 0 && !spinsetPreloadFirst) {\n                preloadType = 'created';\n            } else {\n                preloadType = 'visible';\n            }\n\n            spinsetPreloadFirst = true;\n\n            $(this).ampSpin({\n                'preload': preloadType,\n                'gesture': {'enabled': true, 'fingers': 1},\n                'play': {'onLoad': spinsetAutoplay, 'onVisible': false, 'repeat': 1},\n                'change': function () {\n                    var $currentSlide = self.ui.currentSlide();\n                    if (self.ui.controllers.zoomController && $currentSlide.find('.amp-spinset').length > 0) {\n                        self.ui.controllers.zoomController.reset($currentSlide);\n                    }\n                }\n            });\n        });\n\n        this.ui.$main.find('.amp-box').ampStack();\n\n        var reclinerPreloadFirst = false;\n\n        this.ui.$main.find('.amp-recliner').each(function () {\n            if (self.ui.currentSlide().find('.amp-recliner').length > 0 && !reclinerPreloadFirst) {\n                preloadType = 'created';\n            } else {\n                preloadType = 'visible';\n            }\n\n            reclinerPreloadFirst = true;\n\n            $(this).ampSpin({\n                'preload': preloadType,\n                'delay': 600,\n                'momentum': false,\n                'dragDistance': 600,\n                'gesture': {'enabled': true, 'fingers': 1},\n                'play': {'onLoad': spinsetAutoplay, 'onVisible': false, 'repeat': 1},\n                'change': function () {\n                    if (self.ui.controllers.zoomController) {\n                        self.ui.controllers.zoomController.reset(self.ui.currentSlide());\n                    }\n                }\n            });\n        });\n\n        this.ui.$main.find('[data-amp-src]').ampImage();\n\n        this.ui.$main.find('.amp-video').ampVideo({\n            'pauseOnHide': false,\n            'responsive': false,\n            'skin': 'amp-video-skin',\n            'swfUrl': this.assetsPath,\n            'loop': false,\n            'enableSoftStates': false,\n            'preload': self.configParams.preloadVideos\n        });\n\n        var videos = this.ui.$main.find('video');\n        var arrVideos = videos.toArray();\n        var iOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\n        var touchPlBtn = $('.amp-ui-touch').find('.vjs-big-play-button');\n\n        if (!iOS) {\n            touchPlBtn.css('display', 'none', 'important');\n        }\n        //removing poster attribute after first play\n        //for fixing ipad bug\n        if (!iOS) {\n            touchPlBtn.css('display', 'none', 'important');\n        }\n\n        arrVideos.forEach(function (el) {\n            $(el).on('play', function () {\n                $(el).removeAttr('poster');\n                $(el).off('play');\n            });\n        });\n    },\n    _updateSetData: function (setData, callback) {\n        setData = setData[this.setName];\n        var iterator = setData.items.length;\n\n        while (iterator--) {\n            var item = setData.items[iterator];\n            if (this._isSpecialSet(item)) {\n                if (item.set && item.set.items.length !== 2) {\n                    item.recliner = true;\n                } else {\n                    item.box = true;\n                }\n            } else if (item.mimeType === 'text/html') {\n                if (capabilityDetection.canWebGL()) {\n                    item.content = true;\n                } else {\n                    setData.items.splice(iterator, 1);\n                }\n            } else if (item.media) {\n                item.vidWidth = item.media[0].width;\n                item.vidHeight = item.media[0].height;\n            }\n        }\n        callback.call(this, setData);\n    },\n    _getNameFromUrl: function (src) {\n        return src.substring(src.lastIndexOf('/') + 1, src.length);\n    },\n    _cacheDom: function ($renderedDom) {\n        var self = this;\n        $.extend(self.ui, {\n            $main: $renderedDom.find('.amp-viewer-main'),\n            $nav: $renderedDom.find('.amp-navigation-main'),\n            controls: {\n                $next: $renderedDom.find('.amp-nav-prev'),\n                $prev: $renderedDom.find('.amp-nav-next')\n            },\n            quickLinks: {\n                $spinsetLink: $renderedDom.find('.amp-quicklink-spinset'),\n                $reclinerLink: $renderedDom.find('.amp-quicklink-recliner'),\n                $boxLink: $renderedDom.find('.amp-quicklink-box'),\n                $videoLink: $renderedDom.find('.amp-quicklink-video')\n            },\n            controllers: {\n                navController: null,\n                uiHintController: null\n            },\n            mainSelect: function (slideIndex) {\n                self.ui.$main.ampCarousel('select', slideIndex);\n            },\n            getMainChildren: function () {\n                return self.ui.$main.find('.amp-anim-container').children();\n            },\n            currentSlide: function () {\n                return self.ui.$main.find('.amp-slide.amp-visible');\n            }\n        });\n\n        //call viewer specific dom caching\n        if (typeof this._cacheViewerDom === 'function') {\n            this._cacheViewerDom($renderedDom);\n        }\n    },\n    _bindEvents: function () {\n        var self = this;\n\n        this.ui.controllers.navController = new NavController(\n                this.ui.$nav,\n                this.ui.$main,\n                this.ui.controls.$prev,\n                this.ui.controls.$next,\n                this.ui.mainSelect\n                );\n\n        setTimeout(function() {\n            self.ui.$el.find('.amp-moz-invisible').removeClass('amp-moz-invisible');\n        }, 250);\n\n        this.ui.controllers.videoController = new VideoController(this.ui.$main, this.ui.currentSlide);\n\n        this.ui.controllers.quickLinksController = new QuickLinksController(\n                this.ui.controllers.navController,\n                this.ui.controllers.zoomController,\n                this.ui.controllers.videoController,\n                this.ui.$main,\n                this.ui.quickLinks,\n                this.ui.currentSlide,\n                this.ui.getMainChildren,\n                this.ui.openFullscreenViewer\n                );\n        this.ui.controllers.uiHintController = new UiHintController(\n                {\n                    // pass timers for mobile information overlays. May be {Object} or {Boolean}false if timers are not set\n                    uiHintTimers: self.uiHintTimers\n                }\n        );\n\n        /* init uiHintController */\n        this.ui.controllers.uiHintController.init(self);\n\n        this.ui.controllers.boxController = new BoxController(\n                this.ui.$main, this.ui.quickLinks.$boxLink,\n                this.ui.controllers.quickLinksController\n                );\n\n        //call viewer specific event binding\n        if (typeof this._bindViewerEvents === 'function') {\n            this._bindViewerEvents();\n        }\n\n        this._onMainSlideChange();\n        amp.stats.bind([\n            {'type': 'carousel', 'event': 'change', 'cb': this._onMainSlideChange.bind(this)}\n        ]);\n\n        amp.stats.bind([\n            {\n                'type': 'carousel', 'event': 'created', 'cb': function () {\n                    // Had to set a timeout here because the callback doesn't calculate the height of the the ui.$main properly\n                    // which I think is an SDK bug and could probably be fixed later\n                    setTimeout(function () {\n                        self.ui.controllers.videoController._resizeAllVideo();\n                        self.ui.$main.css({\n                            visibility: 'visible'\n                        });\n\n                        self.ui.$main.closest('.amp-main-container').css({\n                            height: '',\n                            overflow: ''\n                        });\n\n                    }, 100);\n\n                }\n            }\n        ]);\n    },\n    _enrichWithTemplateData: function (setData) {\n        setData.productName = this.productName;\n        setData.rangeName = this.rangeName;\n        setData.templates = this.templates;\n        setData.assetsPath = this.assetsPath;\n\n        if (capabilityDetection.commonMobileDevice() || capabilityDetection.touch()) {\n            setData.touch = 'amp-ui-touch';\n        } else {\n            setData.touch = 'amp-ui-no-touch';\n        }\n    },\n    _isSpecialSet: function (item) {\n        if (item.setType === 'spin' && /(.)*_oc[0-4]/.test(item.name)) {\n            return true;\n        }\n        return false;\n    },\n    _destroyComponents: function () {\n        if (this.ui.$main.data('amp-ampCarousel')) {\n            this.ui.$main.css({\n                visibility: 'hidden'\n            });\n            this.ui.$main.ampCarousel('destroy');\n        }\n\n        if (this.ui.$main.data('amp-ampStack')) {\n            this.ui.$main.ampStack('destroy');\n        }\n\n        this.ui.$nav.ampCarousel('destroy');\n\n        if (this.ui.$main.find('.amp-spinset').data('amp-ampSpin')) {\n            this.ui.$main.find('.amp-spinset').ampSpin('destroy');\n        }\n        if (this.ui.$main.find('.amp-recliner').data('amp-ampSpin')) {\n            this.ui.$main.find('.amp-recliner').ampSpin('destroy');\n        }\n        this.ui.$main.find('[data-amp-src]').ampImage('destroy');\n        //TODO: update SDK video destroy methods so it cleans up window resize listeners\n        //brute forcing no further action on window resize for now\n        if (this.ui.$main.find('.amp-video').data('amp-ampVideo')) {\n            this.ui.$main.find('.amp-video').data('amp-ampVideo')._calcSize = function () {\n            };\n            this.ui.$main.find('.amp-video').ampVideo('destroy');\n        }\n        //call viewer specific destroy\n        if (typeof this._destroyViewerComponents === 'function') {\n            this._destroyViewerComponents();\n        }\n    },\n    _onMainSlideChange: function ($el) {\n        if ($el && !$el.is(this.ui.$main)) {\n            return;\n        }\n\n        var self = this;\n        var $spin = null;\n        var spinData = null;\n        var $webgl = null;\n        var $video = null;\n        var hasOldSlide = false;\n\n        self.$oldSlide = self.$currentSlide;\n        self.$currentSlide = self.ui.currentSlide();\n\n        hasOldSlide = self.$oldSlide && self.$oldSlide.length;\n\n        $spin = self.$currentSlide.find('.amp-spin');\n        spinData = $spin.data('amp-ampSpin');\n        if (spinData && !spinData._loading) {\n            $spin.ampSpin('playRepeat', 1);\n        }\n\n        //lazy loading webgl assets\n        $webgl = self.$currentSlide.find('.amp-webgl');\n        if ($webgl.length && !$webgl.html()) {\n            $webgl.html($webgl.attr('data-amp-webgl'));\n        } else if (hasOldSlide) {\n            //remove any loaded webgl iframe when not visible because it is too resource hungry\n            $webgl = self.$oldSlide.find('.amp-webgl');\n            if ($webgl.length) {\n                $webgl.html('');\n            }\n        }\n\n        //manually adding pause on hide functionality\n        if (hasOldSlide) {\n            $video = self.$oldSlide.find('.amp-video');\n            if ($video.length && $video.data('ampAmpVideo')) {\n                $video.ampVideo('pause');\n            }\n        }\n\n        // Synchronize the selected slide in the nav - change may have originated from main carousel\n        var slideIndex = self.$currentSlide.index();\n        var $nav = self.ui.$nav;\n        var $selectedNavSlide = $nav.find('.amp-slide.amp-selected');\n        if ($selectedNavSlide.index() !== slideIndex) {\n            // only change nav if the selected slide is different to avoid looping\n            //var thumbSlideToSelect = self.ui.$nav.find('.amp-slide')[slideIndex];\n            //self.ui.controllers.navController.select(thumbSlideToSelect);\n            self.ui.controllers.navController.select(slideIndex);\n        }\n\n        if (self.ui.controllers.zoomController) {\n            self.ui.controllers.zoomController.reset(self.$oldSlide);\n        }\n\n        self.ui.controllers.quickLinksController.reset(self.$oldSlide);\n        // reset any UI Hints for this slide\n\n        self.ui.controllers.uiHintController.update();\n\n        if (self.parentViewer) {\n            if (self.parentViewer.ui.currentSlide().index() !== slideIndex) {\n                self.parentViewer.ui.controllers.navController.select(slideIndex);\n            }\n        }\n        if (self.fullscreen) {\n            if (self.fullscreen.ui.currentSlide().index() !== slideIndex) {\n                self.fullscreen.ui.controllers.navController.select(slideIndex);\n            }\n        }\n        self.ui.controllers.videoController._resizeCurrentVideo();\n    },\n    preventSwipe: function () {\n        //prevent swipe on area which responsible to use 'back' gestures\n\n        if ($('.amp-main-container').children('.amp-carousel').children('div').length <= 1) {\n            (function preventSwipeDublicate() {\n                var sel = $('.amp-main-container').children('.amp-carousel');\n                var overlayEl = $('<div id=\"overlaySwipe\"/>');\n                sel.append(overlayEl);\n\n                $('#overlaySwipe').on('touchstart mousedown', function (e) {\n                    // Prevent carousel swipe\n                    e.stopPropagation();\n                });\n\n            })();\n        }\n    },\n    disableTouchScroll: function () {\n        $(document).on('touchmove.disableTouchScroll', function (evt) {\n            evt.preventDefault();\n        });\n    },\n    enableTouchScroll: function () {\n        $(document).off('touchmove.disableTouchScroll');\n    },\n    disableCssScroll: function () {\n        $('body, html').addClass('amp-overflow-hidden');\n    },\n    enableCssScroll: function () {\n        $('body, html').removeClass('amp-overflow-hidden');\n    }\n};\n\nmodule.exports = BaseViewer;\n","\"use strict\";\n/*jshint browserify: true */\nvar amp = require('../common/namespace');\nvar $ = require('./jquery');\n\nvar ZoomController = function ($zoomIn, $zoomOut, currentSlide) {\n    this.ui = {\n        $zoomIn: $zoomIn,\n        $zoomOut: $zoomOut,\n        currentSlide: currentSlide\n    };\n\n    this._bindEvents();\n};\n\nZoomController.prototype = {\n    $cachedCurrentSlide: null,\n    _bindEvents: function () {\n        var self = this;\n\n        self.ui.$zoomIn.click(self.zoomIn.bind(self));\n        self.ui.$zoomOut.click(self.zoomOut.bind(self));\n\n        amp.stats.bind({\n            'type': 'zoom', 'event': 'zoomedIn', 'cb': function (a, b, c, zoomInfo) {\n                self._invalidateZoomButtons(zoomInfo);\n            }\n        });\n\n        amp.stats.bind({\n            'type': 'zoom', 'event': 'zoomedOut', 'cb': function (a, b, c, zoomInfo) {\n                self._invalidateZoomButtons(zoomInfo);\n            }\n        });\n    },\n    _slideToggleZoomedClass: function (opts) {\n        var self = this;\n        var className = opts.class || 'amp-zoomed-in';\n        self.$cachedCurrentSlide[opts.action + 'Class'](className);\n    },\n    _invalidateZoomButtons: function (zoomInfo) {\n        var $zoom = this.currentZoom();\n        if (!$zoom.length) {\n            this.ui.$zoomIn.css('visibility', 'hidden');\n            this.ui.$zoomOut.css('visibility', 'hidden');\n            return;\n        } else {\n            this.ui.$zoomIn.css('visibility', 'visible');\n            this.ui.$zoomOut.css('visibility', 'visible');\n            if (!zoomInfo) {\n                zoomInfo = $zoom.ampZoomInline('state');\n            }\n        }\n\n        if (zoomInfo.scale === zoomInfo.scaleMax) {\n            this.ui.$zoomIn.addClass('disabled');\n            this.ui.$zoomOut.removeClass('disabled');\n\n            this._slideToggleZoomedClass({\n                action: 'add'\n            });\n\n        } else {\n            this.ui.$zoomIn.removeClass('disabled');\n            this.ui.$zoomOut.removeClass('disabled');\n\n            this._slideToggleZoomedClass({\n                action: 'add'\n            });\n        }\n\n        if (zoomInfo.scale === 1) {\n            this.ui.$zoomIn.removeClass('disabled');\n            this.ui.$zoomOut.addClass('disabled');\n\n            this._slideToggleZoomedClass({\n                    action: 'remove'\n                });\n        }\n    },\n    currentZoom: function (slide) {\n        var $slide = slide || this.ui.currentSlide();\n        this.$cachedCurrentSlide = $slide;\n        var $zoom;\n\n        if ($slide.find('.amp-spinset').length) {\n            $zoom = $slide.find('.amp-selected .amp-zoomable');\n        } else {\n            $zoom = $slide.find('.amp-zoomable');\n        }\n        return $zoom;\n    },\n    zoomAuto: function () {\n        var $zoom = this.currentZoom();\n\n        if ($zoom.length) {\n            var zoomState = $zoom.ampZoomInline('state');\n            if (zoomState.scale >= zoomState.scaleMax) {\n                $zoom.ampZoomInline('zoomOutFull');\n            } else {\n                $zoom.ampZoomInline('zoomIn');\n            }\n        }\n    },\n    reset: function (oldSlide) {\n        if (oldSlide && oldSlide.length) {\n            var $zoom = this.currentZoom(oldSlide);\n            $zoom.ampZoomInline('zoomOutFull');\n\n            if (oldSlide.find('.amp-spinset').length) {\n                var $allZooms = oldSlide.find('.amp-zoomable');\n                var index = $allZooms.index($zoom);\n                var indexPrev = (index > 0) ? (index - 1) : ($allZooms.length - 1);\n                var indexNext = (index < $allZooms.length - 1) ? (index + 1) : (0);\n                $($allZooms[indexPrev]).ampZoomInline('zoomOutFull');\n                $($allZooms[indexNext]).ampZoomInline('zoomOutFull');\n            }\n        }\n\n        this._invalidateZoomButtons();\n    },\n    zoomOutFull: function (ignoreInZoomCheck) {\n        var $currentZoom = this.currentZoom();\n\n        if ($currentZoom.length) {\n            var $zoomContainer = $currentZoom.parent().children('.amp-zoomed-container');\n            var inZoom = $zoomContainer.length && $zoomContainer.css('display') !== 'none';\n\n            if (inZoom || ignoreInZoomCheck) {\n                $zoomContainer.css('display', 'none');\n                $currentZoom.ampZoomInline('zoomOutFull');\n                this._invalidateZoomButtons();\n            }\n        }\n    },\n    zoomIn: function () {\n        var $zoom = this.currentZoom();\n        $zoom.ampZoomInline('zoomIn');\n    },\n    zoomOut: function () {\n        var $zoom = this.currentZoom();\n        $zoom.ampZoomInline('zoomOut');\n    }\n};\n\nmodule.exports = ZoomController;\n","\"use strict\";\nvar canvas = document.createElement('canvas');\nvar capabilities = {\n    commonMobileDevice: function () {\n        // this is not conclusive, but serves rather to pick up most emulator's userAgent strings.\n        // To be used in conjunction with touch detection (via OR)\n        var commonDeviceRegEx = /android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i;\n\n        return !!commonDeviceRegEx.test(navigator.userAgent.toLowerCase());\n    },\n\n    touch: function () {\n        return 'ontouchstart' in window;\n    },\n\n    canWebGL: function () {\n        try {\n            return !!(window.WebGLRenderingContext && (canvas.getContext('webgl') ||\n                canvas.getContext('experimental-webgl')));\n        } catch (e) {\n            return false;\n        }\n    },\n    //TODO: Get rid of ASAP :(\n    getIsIE: function () {\n        var isIE = false;\n        if (navigator.userAgent.indexOf('MSIE') !== -1 || navigator.appVersion.indexOf('Trident/') > 0) {\n            isIE = true;\n        }\n        return isIE;\n    }\n};\n\nmodule.exports = capabilities;\n","\"use strict\";\nvar $ = require('../common/jquery');\nvar amp = require('../common/namespace');\nvar ZoomController = require('../common/zoomController');\nvar BaseViewer = require('../common/baseViewer');\n\nvar FullscreenViewer = function FullscreenViewer(config) {\n    this.viewerType = 'fullscreen';\n    this.parentViewer = config.parentViewer;\n    //changing fullscreen wrapper so client doesn't need to add a div first\n    this.ui = {\n        $el: $('.amp-fullscreen-wrapper')\n    };\n\n    if (!this.ui.$el.length) {\n        this.ui.$el = $('<div class=\"amp-fullscreen-wrapper\" style=\"display:none\"></div>');\n        $('body').append(this.ui.$el);\n    }\n\n    this.templates = config.templates.fullScreen;\n    return BaseViewer.apply(this, arguments);\n};\n\nFullscreenViewer.prototype = Object.create(BaseViewer.prototype);\n\nFullscreenViewer.prototype._bindViewerEvents = function () {\n    this.ui.controls.$close.on('click', this.close.bind(this));\n    this.ui.controllers.zoomController = new ZoomController(\n        this.ui.controls.$zoomIn,\n        this.ui.controls.$zoomOut,\n        this.ui.currentSlide\n    );\n    amp.stats.bind([\n        {'type': 'stack', 'event': 'change', 'cb': this._onMainSlideChange.bind(this)}\n    ]);\n};\n\nFullscreenViewer.prototype._beforeViewerCreated = function () {\n    this.disableTouchScroll();\n    this.disableCssScroll();\n};\n\nFullscreenViewer.prototype._initViewerComponents = function () {\n    this.ui.$main.ampStack({\n        'loop': false,\n        'gesture': {'enabled': true, 'fingers': 1}\n    });\n\n    this.ui.$main.ampStack('visible', true);\n\n    this.ui.$nav.ampCarousel({\n        'onActivate': {'select': false, 'goTo': false},\n        'preloadNext': false,\n        'dir': 'horz',\n        'loop': false,\n        'height': 55,\n        'width': 450,\n        'responsive': false,\n        'easing': 'ease-in-out',\n        'animDuration': 600\n    });\n\n    this.ui.$main.find('.amp-zoomable').ampZoomInline({\n        'scaleSteps': true,\n        'events': {'zoomIn': 'none', 'zoomOut': 'none', 'move': 'none'},\n        'pan': true,\n        'pinch': true,\n        'transforms': this.templates.imageZoom\n    });\n\n};\n\nFullscreenViewer.prototype._destroyViewerComponents = function () {\n    this.ui.$main.find('.amp-zoomable').ampZoomInline('destroy');\n    this.$currentSlide = void 0;\n};\n\nFullscreenViewer.prototype._cacheViewerDom = function ($renderedDom) {\n    var self = this;\n    $.extend(true, this.ui, {\n        controls: {\n            $close: $renderedDom.find('.amp-close'),\n            $zoomIn: $renderedDom.find('.amp-zoom-in'),\n            $zoomOut: $renderedDom.find('.amp-zoom-out')\n        },\n        getMainChildren: function () {\n            return self.ui.$main.children();\n        },\n        mainSelect: function (slideIndex) {\n            self.ui.$main.ampStack('goTo', slideIndex);\n        },\n        currentSlide: function () {\n            return self.ui.$main.children('.amp-layer.amp-selected');\n        }\n    });\n};\n\nFullscreenViewer.prototype._resize = function () {\n    this.ui.controllers.zoomController.zoomOutFull(true);\n    this._maintainAspectRatio();\n};\n\nFullscreenViewer.prototype._maintainAspectRatio = function () {\n    var cw = this.ui.$main.width();\n    var ch = this.ui.$main.height();\n    var oas = 600 / 318;\n    var cas = cw / ch;\n    if (cas >= oas) {\n        this.ui.$main.find('[data-amp-src]').css({'height': '100%', 'width': 'auto'});\n    } else {\n        this.ui.$main.find('[data-amp-src]').css({'width': '100%', 'height': 'auto'});\n    }\n};\n\nFullscreenViewer.prototype.open = function () {\n    this.disableTouchScroll();\n    this.disableCssScroll();\n    this.ui.$el.css({display: 'block'});\n    this._maintainAspectRatio();\n    this.ui.controllers.videoController._resizeCurrentVideo();\n    $(window).on('resize.amp.fullscreen.resize', this._resizeBase.bind(this));\n};\n\nFullscreenViewer.prototype.close = function () {\n    this.enableTouchScroll();\n    this.enableCssScroll();\n    this.ui.controllers.videoController.pause();\n    this.ui.controllers.zoomController.reset(this.ui.currentSlide());\n    $(window).off('resize.amp.fullscreen.resize');\n    this.ui.$el.css({display: 'none'});\n    this.ui.controllers.videoController._resizeCurrentVideo();\n};\n\nmodule.exports = FullscreenViewer;\n","\"use strict\";\nvar log = require('../utils/log');\nvar templates = require('../templates/templates.compiled');\n\nvar roundels = {\n    parsePosition: function(positionText) {\n        // pity we can't base this on ordinal.\n        // start switch at pos 9 after 'position'\n        // ie. we expect positions by spec to be\n        // positionOne, positionTwo, ...\n        switch (positionText.substring(9).toLowerCase()) {\n            case 'one':\n                return 0;\n            case 'two':\n                return 1;\n            case 'three':\n                return 2;\n            case 'four':\n                return 3;\n            case 'five':\n                return 4;\n            case 'six':\n                return 5;\n            default:\n                return 0;\n        }\n    },\n\n    render: function($target, config) {\n        var parsedRoundels = [];\n\n        for (var i = 0, len = config.length; i < len; i++) {\n            // expect a roundel to have a position, class and description\n            if (config[i].length !== 3) {\n                log.warn('expected roundel to have a position, class and description.  Received',\n                    JSON.stringify(config[i])\n                );\n                continue;\n            }\n\n            parsedRoundels.push({\n                index: roundels.parsePosition(config[i][0]),\n                position: config[i][0],\n                className: config[i][1],\n                description: config[i][2]\n            });\n        }\n\n        parsedRoundels.sort(function compareIndex(a, b) {\n            return a.index - b.index;\n        });\n\n        var roundelsTemplate = templates['template-roundels'];\n        var renderedDom = roundelsTemplate({\n            roundels: parsedRoundels\n        });\n\n        $target\n            .empty()\n            .append(renderedDom)\n            .addClass('amp-roundels-' + parsedRoundels.length);\n    }\n};\n\nmodule.exports = roundels;\n","\"use strict\";\nthis[\"amp\"] = this[\"amp\"] || {};\nthis[\"amp\"][\"templates\"] = this[\"amp\"][\"templates\"] || {};\nthis[\"amp\"][\"templates\"][\"dfs\"] = this[\"amp\"][\"templates\"][\"dfs\"] || {};\n\nHandlebars.registerPartial(\"_template-main-item\", this[\"amp\"][\"templates\"][\"dfs\"][\"_template-main-item\"] = Handlebars.template({\"1\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1;\n\n  return \"       <ul class=\\\"amp-recliner amp-ui-hint\\\">\\n\"\n    + ((stack1 = helpers.blockHelperMissing.call(depth0,container.lambda(((stack1 = ((stack1 = (depth0 != null ? depth0.item : depth0)) != null ? stack1.set : stack1)) != null ? stack1.items : stack1), depth0),{\"name\":\"item.set.items\",\"hash\":{},\"fn\":container.program(2, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"        </ul>\\n        <div class=\\\"amp-cover-box amp-exit-prompt hidden\\\">\\n            <div class=\\\"amp-message\\\">\\n                <span class=\\\"amp-message-tagline\\\">Double tap to exit</span>\\n            </div>\\n        </div>\\n        <div class=\\\"amp-cover-box amp-double-tap-prompt\\\">\\n            <div class=\\\"amp-message\\\">\\n                <span class=\\\"amp-message-tagline\\\">Double tap for Recliner spin</span>\\n                <div class=\\\"amp-message-icon amp-icon-recliner\\\">\"\n    + ((stack1 = container.invokePartial(partials[\"icons-recliner\"],depth0,{\"name\":\"icons-recliner\",\"data\":data,\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\")\n    + \"</div>\\n            </div>\\n        </div>\\n\";\n},\"2\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1;\n\n  return \"                <li>\\n                    <div class=\\\"amp-image-container\\\">\\n                        <span class=\\\"amp-centerer\\\"></span>\\n\"\n    + ((stack1 = helpers[\"if\"].call(depth0 != null ? depth0 : (container.nullContext || {}),((stack1 = (depth0 != null ? depth0.templates : depth0)) != null ? stack1.screenWidth : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(3, data, 0, blockParams, depths),\"inverse\":container.program(5, data, 0, blockParams, depths),\"data\":data})) != null ? stack1 : \"\")\n    + \"                    </div>\\n                </li>\\n\";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    var stack1, helper, alias1=container.escapeExpression;\n\n  return \"                            <img data-amp-dimensions='[{\\\"w\\\" : {\\\"domName\\\" : \\\"window\\\", \\\"domProp\\\" : \\\"width\\\"}}]' data-amp-src=\\\"\"\n    + alias1(((helper = (helper = helpers.src || (depth0 != null ? depth0.src : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"src\",\"hash\":{},\"data\":data}) : helper)))\n    + \"?\"\n    + alias1(container.lambda(((stack1 = (depth0 != null ? depth0.templates : depth0)) != null ? stack1.imageMain : stack1), depth0))\n    + \"\\\" class=\\\"amp-main-img\\\">\\n\";\n},\"5\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1, helper, alias1=container.escapeExpression;\n\n  return \"                            <img data-amp-src=\\\"\"\n    + alias1(((helper = (helper = helpers.src || (depth0 != null ? depth0.src : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"src\",\"hash\":{},\"data\":data}) : helper)))\n    + \"?\"\n    + alias1(container.lambda(((stack1 = (depths[1] != null ? depths[1].templates : depths[1])) != null ? stack1.imageMain : stack1), depth0))\n    + \"\\\" class=\\\"amp-main-img\\\">\\n\";\n},\"7\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1;\n\n  return ((stack1 = helpers[\"if\"].call(depth0 != null ? depth0 : (container.nullContext || {}),((stack1 = (depth0 != null ? depth0.item : depth0)) != null ? stack1.box : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(8, data, 0, blockParams, depths),\"inverse\":container.program(14, data, 0, blockParams, depths),\"data\":data})) != null ? stack1 : \"\");\n},\"8\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1;\n\n  return \"               <ul class=\\\"amp-box\\\">\\n\"\n    + ((stack1 = helpers.blockHelperMissing.call(depth0,container.lambda(((stack1 = ((stack1 = (depth0 != null ? depth0.item : depth0)) != null ? stack1.set : stack1)) != null ? stack1.items : stack1), depth0),{\"name\":\"item.set.items\",\"hash\":{},\"fn\":container.program(9, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"                </ul>\\n\";\n},\"9\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1;\n\n  return \"                        <li>\\n                            <div class=\\\"amp-image-container\\\">\\n                                <span class=\\\"amp-centerer\\\"></span>\\n\"\n    + ((stack1 = helpers[\"if\"].call(depth0 != null ? depth0 : (container.nullContext || {}),((stack1 = (depth0 != null ? depth0.templates : depth0)) != null ? stack1.screenWidth : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(10, data, 0, blockParams, depths),\"inverse\":container.program(12, data, 0, blockParams, depths),\"data\":data})) != null ? stack1 : \"\")\n    + \"                            </div>\\n                        </li>\\n\";\n},\"10\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1, helper, alias1=container.escapeExpression;\n\n  return \"                                    <img data-amp-dimensions='[{\\\"w\\\" : {\\\"domName\\\" : \\\"window\\\", \\\"domProp\\\" : \\\"width\\\"}}]' data-amp-src=\\\"\"\n    + alias1(((helper = (helper = helpers.src || (depth0 != null ? depth0.src : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"src\",\"hash\":{},\"data\":data}) : helper)))\n    + \"?\"\n    + alias1(container.lambda(((stack1 = (depths[1] != null ? depths[1].templates : depths[1])) != null ? stack1.imageMain : stack1), depth0))\n    + \"\\\" class=\\\"amp-main-img\\\">\\n\";\n},\"12\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1, helper, alias1=container.escapeExpression;\n\n  return \"                                    <img data-amp-src=\\\"\"\n    + alias1(((helper = (helper = helpers.src || (depth0 != null ? depth0.src : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"src\",\"hash\":{},\"data\":data}) : helper)))\n    + \"?\"\n    + alias1(container.lambda(((stack1 = (depths[1] != null ? depths[1].templates : depths[1])) != null ? stack1.imageMain : stack1), depth0))\n    + \"\\\" class=\\\"amp-main-img\\\">\\n\";\n},\"14\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1;\n\n  return ((stack1 = helpers[\"if\"].call(depth0 != null ? depth0 : (container.nullContext || {}),((stack1 = (depth0 != null ? depth0.item : depth0)) != null ? stack1.set : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(15, data, 0, blockParams, depths),\"inverse\":container.program(21, data, 0, blockParams, depths),\"data\":data})) != null ? stack1 : \"\");\n},\"15\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1;\n\n  return \"                    <ul class=\\\"amp-spinset amp-ui-hint\\\">\\n\"\n    + ((stack1 = helpers.blockHelperMissing.call(depth0,container.lambda(((stack1 = ((stack1 = (depth0 != null ? depth0.item : depth0)) != null ? stack1.set : stack1)) != null ? stack1.items : stack1), depth0),{\"name\":\"item.set.items\",\"hash\":{},\"fn\":container.program(16, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"                    </ul>\\n                    <div class=\\\"amp-cover-box amp-exit-prompt hidden\\\">\\n                        <div class=\\\"amp-message\\\">\\n                            <span class=\\\"amp-message-tagline\\\">Double tap to exit</span>\\n                        </div>\\n                    </div>\\n                    <div class=\\\"amp-cover-box amp-double-tap-prompt\\\">\\n                        <div class=\\\"amp-message\\\">\\n                            <span class=\\\"amp-message-tagline\\\">Double tap for 360&deg; spin</span>\\n                            <div class=\\\"amp-message-icon amp-icon-360\\\">\"\n    + ((stack1 = container.invokePartial(partials[\"icons-360\"],depth0,{\"name\":\"icons-360\",\"data\":data,\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\")\n    + \"</div>\\n                        </div>\\n                    </div>\\n\";\n},\"16\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1;\n\n  return \"                            <li>\\n                                <div class=\\\"amp-image-container\\\">\\n                                    <span class=\\\"amp-centerer\\\"></span>\\n\"\n    + ((stack1 = helpers[\"if\"].call(depth0 != null ? depth0 : (container.nullContext || {}),((stack1 = (depth0 != null ? depth0.templates : depth0)) != null ? stack1.screenWidth : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(17, data, 0, blockParams, depths),\"inverse\":container.program(19, data, 0, blockParams, depths),\"data\":data})) != null ? stack1 : \"\")\n    + \"                                </div>\\n                            </li>\\n\";\n},\"17\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1, helper, alias1=container.escapeExpression;\n\n  return \"                                        <img data-amp-dimensions='[{\\\"w\\\" : {\\\"domName\\\" : \\\"window\\\", \\\"domProp\\\" : \\\"width\\\"}}]' data-amp-src=\\\"\"\n    + alias1(((helper = (helper = helpers.src || (depth0 != null ? depth0.src : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"src\",\"hash\":{},\"data\":data}) : helper)))\n    + \"?\"\n    + alias1(container.lambda(((stack1 = (depths[1] != null ? depths[1].templates : depths[1])) != null ? stack1.imageMain : stack1), depth0))\n    + \"\\\" class=\\\"amp-zoomable amp-main-img\\\">\\n\";\n},\"19\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1, helper, alias1=container.escapeExpression;\n\n  return \"                                        <img data-amp-src=\\\"\"\n    + alias1(((helper = (helper = helpers.src || (depth0 != null ? depth0.src : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(depth0 != null ? depth0 : (container.nullContext || {}),{\"name\":\"src\",\"hash\":{},\"data\":data}) : helper)))\n    + \"?\"\n    + alias1(container.lambda(((stack1 = (depths[1] != null ? depths[1].templates : depths[1])) != null ? stack1.imageMain : stack1), depth0))\n    + \"\\\" class=\\\"amp-zoomable amp-main-img\\\">\\n\";\n},\"21\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = helpers[\"if\"].call(depth0 != null ? depth0 : (container.nullContext || {}),((stack1 = (depth0 != null ? depth0.item : depth0)) != null ? stack1.media : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(22, data, 0),\"inverse\":container.program(25, data, 0),\"data\":data})) != null ? stack1 : \"\");\n},\"22\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression;\n\n  return \"                        <div class=\\\"amp-video-holder\\\" data-amp-width=\\\"\"\n    + alias2(alias1(((stack1 = (depth0 != null ? depth0.item : depth0)) != null ? stack1.vidWidth : stack1), depth0))\n    + \"\\\" data-amp-height=\\\"\"\n    + alias2(alias1(((stack1 = (depth0 != null ? depth0.item : depth0)) != null ? stack1.vidHeight : stack1), depth0))\n    + \"\\\">\\n                            <div class=\\\"amp-video amp-hidden\\\">\\n                                <video poster=\\\"\"\n    + alias2(alias1(((stack1 = (depth0 != null ? depth0.item : depth0)) != null ? stack1.src : stack1), depth0))\n    + \"?\"\n    + alias2(alias1(((stack1 = (depth0 != null ? depth0.templates : depth0)) != null ? stack1.imageMain : stack1), depth0))\n    + \"&w=\"\n    + alias2(alias1(((stack1 = (depth0 != null ? depth0.item : depth0)) != null ? stack1.vidWidth : stack1), depth0))\n    + \"&h=\"\n    + alias2(alias1(((stack1 = (depth0 != null ? depth0.item : depth0)) != null ? stack1.vidHeight : stack1), depth0))\n    + \"\\\" preload=\\\"none\\\">\\n\"\n    + ((stack1 = helpers.blockHelperMissing.call(depth0,alias1(((stack1 = (depth0 != null ? depth0.item : depth0)) != null ? stack1.media : stack1), depth0),{\"name\":\"item.media\",\"hash\":{},\"fn\":container.program(23, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"                                </video>\\n                            </div>\\n                        </div>\\n\";\n},\"23\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"                                        <source data-quality-label=\\\"\"\n    + alias4(((helper = (helper = helpers.profileLabel || (depth0 != null ? depth0.profileLabel : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"profileLabel\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" data-bitrate=\\\"\"\n    + alias4(((helper = (helper = helpers.bitrate || (depth0 != null ? depth0.bitrate : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"bitrate\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" data-res=\\\"\"\n    + alias4(((helper = (helper = helpers.profileLabel || (depth0 != null ? depth0.profileLabel : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"profileLabel\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" src=\\\"\"\n    + alias4(((helper = (helper = helpers.src || (depth0 != null ? depth0.src : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"src\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\" type=\\\"\"\n    + alias4(((helper = (helper = helpers.htmlCodec || (depth0 != null ? depth0.htmlCodec : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"htmlCodec\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\">\\n\";\n},\"25\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = helpers[\"if\"].call(depth0 != null ? depth0 : (container.nullContext || {}),((stack1 = (depth0 != null ? depth0.item : depth0)) != null ? stack1.content : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(26, data, 0),\"inverse\":container.program(28, data, 0),\"data\":data})) != null ? stack1 : \"\");\n},\"26\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"                            <div class=\\\"amp-webgl  amp-ui-hint\\\" data-amp-webgl=\\\"\"\n    + container.escapeExpression(container.lambda(((stack1 = (depth0 != null ? depth0.item : depth0)) != null ? stack1.value : stack1), depth0))\n    + \"\\\"></div>\\n                            <div class=\\\"amp-cover-box amp-double-tap-prompt\\\">\\n                                <div class=\\\"amp-message\\\">\\n                                    <span class=\\\"amp-message-tagline\\\">Double tap to activate 3D</span>\\n                                    <div class=\\\"amp-message-icon amp-icon-webgl\\\">\"\n    + ((stack1 = container.invokePartial(partials[\"icons-webgl\"],depth0,{\"name\":\"icons-webgl\",\"data\":data,\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\")\n    + \"</div>\\n                                </div>\\n                            </div>\\n\";\n},\"28\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"                            <div class=\\\"amp-image-container\\\">\\n                                <span class=\\\"amp-centerer\\\"></span>\\n\"\n    + ((stack1 = helpers[\"if\"].call(depth0 != null ? depth0 : (container.nullContext || {}),((stack1 = (depth0 != null ? depth0.templates : depth0)) != null ? stack1.screenWidth : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(29, data, 0),\"inverse\":container.program(31, data, 0),\"data\":data})) != null ? stack1 : \"\")\n    + \"\\n                            </div>\\n\";\n},\"29\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression;\n\n  return \"                                    <img data-amp-dimensions='[{\\\"w\\\" : {\\\"domName\\\" : \\\"window\\\", \\\"domProp\\\" : \\\"width\\\"}}]' data-amp-src=\\\"\"\n    + alias2(alias1(((stack1 = (depth0 != null ? depth0.item : depth0)) != null ? stack1.src : stack1), depth0))\n    + \"?\"\n    + alias2(alias1(((stack1 = (depth0 != null ? depth0.templates : depth0)) != null ? stack1.imageMain : stack1), depth0))\n    + \"\\\" class=\\\"amp-zoomable amp-main-img\\\">\\n\";\n},\"31\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression;\n\n  return \"                                    <img data-amp-src=\\\"\"\n    + alias2(alias1(((stack1 = (depth0 != null ? depth0.item : depth0)) != null ? stack1.src : stack1), depth0))\n    + \"?\"\n    + alias2(alias1(((stack1 = (depth0 != null ? depth0.templates : depth0)) != null ? stack1.imageMain : stack1), depth0))\n    + \"\\\" class=\\\"amp-zoomable amp-main-img\\\">\\n\";\n},\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1;\n\n  return \"<li>\\n\"\n    + ((stack1 = helpers[\"if\"].call(depth0 != null ? depth0 : (container.nullContext || {}),((stack1 = (depth0 != null ? depth0.item : depth0)) != null ? stack1.recliner : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0, blockParams, depths),\"inverse\":container.program(7, data, 0, blockParams, depths),\"data\":data})) != null ? stack1 : \"\")\n    + \"</li>\\n\";\n},\"usePartial\":true,\"useData\":true,\"useDepths\":true}));\n\nHandlebars.registerPartial(\"_template-nav-item-alt\", this[\"amp\"][\"templates\"][\"dfs\"][\"_template-nav-item-alt\"] = Handlebars.template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<div class=\\\"amp-nav-link-container\\\">\\n    <div class=\\\"amp-nav-link\\\"></div>\\n</div>\";\n},\"useData\":true}));\n\nHandlebars.registerPartial(\"_template-nav-item\", this[\"amp\"][\"templates\"][\"dfs\"][\"_template-nav-item\"] = Handlebars.template({\"1\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression;\n\n  return \"            <div class=\\\"amp-icon amp-icon-recliner\\\">\"\n    + ((stack1 = container.invokePartial(partials[\"icons-recliner\"],depth0,{\"name\":\"icons-recliner\",\"data\":data,\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\")\n    + \"</div>\\n            <img src=\\\"\"\n    + alias2(alias1(((stack1 = (depth0 != null ? depth0.item : depth0)) != null ? stack1.src : stack1), depth0))\n    + \"/1?\"\n    + alias2(alias1(((stack1 = (depth0 != null ? depth0.templates : depth0)) != null ? stack1.imageThumb : stack1), depth0))\n    + \"\\\" class=\\\"amp-main-img\\\">\\n\";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = helpers[\"if\"].call(depth0 != null ? depth0 : (container.nullContext || {}),((stack1 = (depth0 != null ? depth0.item : depth0)) != null ? stack1.box : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(4, data, 0),\"inverse\":container.program(6, data, 0),\"data\":data})) != null ? stack1 : \"\");\n},\"4\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression;\n\n  return \"                <div class=\\\"amp-icon amp-icon-box-open\\\">\"\n    + ((stack1 = container.invokePartial(partials[\"icons-box-open\"],depth0,{\"name\":\"icons-box-open\",\"data\":data,\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\")\n    + \"</div>\\n                <img src=\\\"\"\n    + alias2(alias1(((stack1 = (depth0 != null ? depth0.item : depth0)) != null ? stack1.src : stack1), depth0))\n    + \"/1?\"\n    + alias2(alias1(((stack1 = (depth0 != null ? depth0.templates : depth0)) != null ? stack1.imageThumb : stack1), depth0))\n    + \"\\\" class=\\\"amp-main-img\\\">\\n\";\n},\"6\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = helpers[\"if\"].call(depth0 != null ? depth0 : (container.nullContext || {}),((stack1 = (depth0 != null ? depth0.item : depth0)) != null ? stack1.set : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(7, data, 0),\"inverse\":container.program(9, data, 0),\"data\":data})) != null ? stack1 : \"\");\n},\"7\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression;\n\n  return \"                    <div class=\\\"amp-icon amp-icon-360\\\">\"\n    + ((stack1 = container.invokePartial(partials[\"icons-360\"],depth0,{\"name\":\"icons-360\",\"data\":data,\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\")\n    + \"</div>\\n                    <img src=\\\"\"\n    + alias2(alias1(((stack1 = (depth0 != null ? depth0.item : depth0)) != null ? stack1.src : stack1), depth0))\n    + \"/1?\"\n    + alias2(alias1(((stack1 = (depth0 != null ? depth0.templates : depth0)) != null ? stack1.imageThumb : stack1), depth0))\n    + \"\\\" class=\\\"amp-main-img\\\">\\n\";\n},\"9\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = helpers[\"if\"].call(depth0 != null ? depth0 : (container.nullContext || {}),((stack1 = (depth0 != null ? depth0.item : depth0)) != null ? stack1.media : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(10, data, 0),\"inverse\":container.program(12, data, 0),\"data\":data})) != null ? stack1 : \"\");\n},\"10\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression;\n\n  return \"                        <div class=\\\"amp-icon amp-icon-video\\\">\"\n    + ((stack1 = container.invokePartial(partials[\"icons-video\"],depth0,{\"name\":\"icons-video\",\"data\":data,\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\")\n    + \"</div>\\n                        <img src=\\\"\"\n    + alias2(alias1(((stack1 = (depth0 != null ? depth0.item : depth0)) != null ? stack1.src : stack1), depth0))\n    + \"?\"\n    + alias2(alias1(((stack1 = (depth0 != null ? depth0.templates : depth0)) != null ? stack1.imageThumb : stack1), depth0))\n    + \"\\\" class=\\\"amp-main-img\\\">\\n\";\n},\"12\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = helpers[\"if\"].call(depth0 != null ? depth0 : (container.nullContext || {}),((stack1 = (depth0 != null ? depth0.item : depth0)) != null ? stack1.content : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(13, data, 0),\"inverse\":container.program(15, data, 0),\"data\":data})) != null ? stack1 : \"\");\n},\"13\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"                            <div class=\\\"amp-icon amp-icon-webgl\\\">\"\n    + ((stack1 = container.invokePartial(partials[\"icons-webgl\"],depth0,{\"name\":\"icons-webgl\",\"data\":data,\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\")\n    + \"</div>\\n                            <div class=\\\"amp-main-img\\\"></div>\\n\";\n},\"15\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=container.lambda, alias2=container.escapeExpression;\n\n  return \"                            <img src=\\\"\"\n    + alias2(alias1(((stack1 = (depth0 != null ? depth0.item : depth0)) != null ? stack1.src : stack1), depth0))\n    + \"?\"\n    + alias2(alias1(((stack1 = (depth0 != null ? depth0.templates : depth0)) != null ? stack1.imageThumb : stack1), depth0))\n    + \"\\\" class=\\\"amp-main-img\\\">\\n\";\n},\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"<li>\\n    <div class=\\\"amp-thumb-image-container amp-moz-invisible\\\">\\n\"\n    + ((stack1 = helpers[\"if\"].call(depth0 != null ? depth0 : (container.nullContext || {}),((stack1 = (depth0 != null ? depth0.item : depth0)) != null ? stack1.recliner : stack1),{\"name\":\"if\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.program(3, data, 0),\"data\":data})) != null ? stack1 : \"\")\n    + \"    </div>\\n</li>\";\n},\"usePartial\":true,\"useData\":true}));\n\nHandlebars.registerPartial(\"_template-quicklinks\", this[\"amp\"][\"templates\"][\"dfs\"][\"_template-quicklinks\"] = Handlebars.template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"<div class=\\\"amp-quicklinks-container\\\">\\n    <div class=\\\"amp-quicklinks-wrapper\\\">\\n        <div class=\\\"amp-quicklink amp-quicklink-fullscreen\\\">\"\n    + ((stack1 = container.invokePartial(partials[\"icons-zoom-in\"],depth0,{\"name\":\"icons-zoom-in\",\"data\":data,\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\")\n    + \"</div>\\n        <div class=\\\"amp-quicklink amp-quicklink-video\\\">\"\n    + ((stack1 = container.invokePartial(partials[\"icons-video\"],depth0,{\"name\":\"icons-video\",\"data\":data,\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\")\n    + \"</div>\\n        <div class=\\\"amp-quicklink amp-quicklink-recliner\\\">\"\n    + ((stack1 = container.invokePartial(partials[\"icons-recliner\"],depth0,{\"name\":\"icons-recliner\",\"data\":data,\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\")\n    + \"</div>\\n        <div class=\\\"amp-quicklink amp-quicklink-box\\\">\\n            <div class=\\\"amp-icon-box-open\\\">\"\n    + ((stack1 = container.invokePartial(partials[\"icons-box-open\"],depth0,{\"name\":\"icons-box-open\",\"data\":data,\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\")\n    + \"</div>\\n            <div class=\\\"amp-icon-box-close\\\">\"\n    + ((stack1 = container.invokePartial(partials[\"icons-box-close\"],depth0,{\"name\":\"icons-box-close\",\"data\":data,\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\")\n    + \"</div>\\n        </div>\\n        <div class=\\\"amp-quicklink amp-quicklink-spinset\\\">\"\n    + ((stack1 = container.invokePartial(partials[\"icons-360\"],depth0,{\"name\":\"icons-360\",\"data\":data,\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\")\n    + \"</div>\\n    </div>\\n</div>\";\n},\"usePartial\":true,\"useData\":true}));\n\nHandlebars.registerPartial(\"icons-360\", this[\"amp\"][\"templates\"][\"dfs\"][\"icons-360\"] = Handlebars.template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<svg class=\\\"amp-svg-icon\\\" viewBox=\\\"0 0 200 200\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:svg=\\\"http://www.w3.org/2000/svg\\\">\\n    <g>\\n        \\n        <g>\\n            <path d=\\\"m124.5,126.5c28.299988,-2.899994 48.5,-10.299988 48.5,-19c0,-5.399994 -7.799988,-10.399994 -20.600006,-14l0,-4c18.600006,4.899994 30.399994,12.200012 30.399994,20.399994c0,11.899994 -24.5,21.800018 -58.399994,25.300018l0.100006,-8.700012z\\\" fill=\\\"#6B6B6B\\\"/>\\n        </g>\\n        <path d=\\\"m101.5,136.5c-0.899994,0 -1.899994,0 -2.799988,0c-46.500015,0 -84.200012,-11.899994 -84.200012,-26.600006c0,-8.799988 13.600006,-16.600006 34.5,-21.5l0,4c-15.199997,3.700012 -24.800003,9.100006 -24.800003,15.100006c0,11.200012 33.300003,20.299988 74.400009,20.299988c1,0 2,0 3,0l0,-8.799988l12.700012,13.200012l-12.800018,13.299988l0,-9z\\\" fill=\\\"#6B6B6B\\\"/>\\n        <text x=\\\"-194\\\" y=\\\"-326\\\" font-size=\\\"55.8251\\\" font-family=\\\"'HelveticaNeue-Bold'\\\" fill=\\\"#6B6B6B\\\" transform=\\\"matrix(1,0,0,1,244.6686,434.4716) \\\">36</text>\\n        <text x=\\\"-194\\\" y=\\\"-326\\\" font-size=\\\"55.8251\\\" font-family=\\\"'HelveticaNeue-Bold'\\\" fill=\\\"#6B6B6B\\\" transform=\\\"matrix(1,0,0,1,306.7799,434.4716) \\\">0</text>\\n        <text x=\\\"-194\\\" y=\\\"-326\\\" font-size=\\\"55.8251\\\" font-family=\\\"'HelveticaNeue-Bold'\\\" fill=\\\"#6B6B6B\\\" transform=\\\"matrix(1,0,0,1,336.3517,434.4716) \\\">&#176;</text>\\n    </g>\\n</svg>\\n\\n\";\n},\"useData\":true}));\n\nHandlebars.registerPartial(\"icons-box-close\", this[\"amp\"][\"templates\"][\"dfs\"][\"icons-box-close\"] = Handlebars.template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<svg class=\\\"amp-svg-icon\\\" viewBox=\\\"0 0 200 200\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\n    <g>\\n        \\n        <g>\\n            <path stroke=\\\"#4C4C4C\\\" d=\\\"m146.469559,110.587593l0,20.769707l-46.71431,20.839615c0,0 -10.699562,8.461716 -26.993629,0l-48.952175,-21.399078l0,-23.077446c0,0 -0.559444,-3.007057 5.384747,-3.426651c0,0 -5.454672,-6.084061 -5.454672,-12.238037l0,-10.979279c0,0 0.559456,-7.482681 10.489748,-9.370834l45.24577,-13.426868c0,0 4.685432,-1.608448 12.377914,0l45.945084,12.447826c0,0 8.4617,0.559441 8.671524,6.014122l0,12.937355c0,0 1.538513,12.238052 -5.594528,13.007294c0,0 5.594528,-3.146927 5.594528,7.902275z\\\" stroke-miterlimit=\\\"10\\\" stroke-linejoin=\\\"round\\\" stroke-linecap=\\\"round\\\" stroke-width=\\\"7\\\" fill=\\\"none\\\"/>\\n            <path stroke=\\\"#4C4C4C\\\" d=\\\"m144.161835,101.076881l-48.112991,21.81868c-3.70636,1.678368 -6.993156,2.377663 -9.650551,2.517525c-4.475624,0.279747 -7.20295,-0.839157 -7.20295,-0.839157s-46.994087,-18.601837 -52.099104,-19.16127\\\" stroke-miterlimit=\\\"10\\\" stroke-linejoin=\\\"round\\\" stroke-linecap=\\\"round\\\" stroke-width=\\\"7\\\" fill=\\\"none\\\"/>\\n            <line stroke=\\\"#4C4C4C\\\" y2=\\\"102.685313\\\" x2=\\\"85.629037\\\" y1=\\\"155.903305\\\" x1=\\\"86.328354\\\" stroke-miterlimit=\\\"10\\\" stroke-linejoin=\\\"round\\\" stroke-linecap=\\\"round\\\" stroke-width=\\\"7\\\" fill=\\\"none\\\"/>\\n            <path stroke=\\\"#4C4C4C\\\" d=\\\"m143.392624,75.691696l-48.113022,21.818687c-3.706383,1.678345 -6.993179,2.37767 -9.650558,2.517525c-4.475624,0.279747 -7.202965,-0.83918 -7.202965,-0.83918s-46.994078,-18.601807 -52.099091,-19.161263\\\" stroke-miterlimit=\\\"10\\\" stroke-linejoin=\\\"round\\\" stroke-linecap=\\\"round\\\" stroke-width=\\\"7\\\" fill=\\\"none\\\"/>\\n            <path d=\\\"m169.826736,105.972092l-7.69249,-11.888374l4.195908,-0.699318c0,0 3.846268,-24.126419 -26.364212,-48.043037c0,0 33.427338,16.853512 32.378357,47.064003l4.405701,-0.629379l-6.923264,14.196106z\\\" fill=\\\"#4C4C4C\\\"/>\\n        </g>\\n    </g>\\n</svg>\";\n},\"useData\":true}));\n\nHandlebars.registerPartial(\"icons-box-open\", this[\"amp\"][\"templates\"][\"dfs\"][\"icons-box-open\"] = Handlebars.template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<svg class=\\\"amp-svg-icon\\\" viewBox=\\\"0 0 200 200\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:svg=\\\"http://www.w3.org/2000/svg\\\">\\n <g>\\n     \\n     <g>\\n      <path d=\\\"m50.699997,112.5l35.099991,-10.100006c0,0 8.600006,-4 22.100006,0l35.600006,10.100006c0,0 6.600006,2.600006 6.100006,12.600006l0,18.5l-41.600006,18.600006c0,0 -9.600006,7.600006 -24.100006,0l-43.699997,-19.100006l0,-20.600006c0,0 0.600006,-3.5 4,-6.599976c1.5,-1.300018 3.699997,-2.600037 6.5,-3.400024z\\\" stroke-miterlimit=\\\"10\\\" stroke-linejoin=\\\"round\\\" stroke-linecap=\\\"round\\\" stroke-width=\\\"7\\\" stroke=\\\"#6B6B6B\\\" fill=\\\"none\\\"/>\\n      <path d=\\\"m147.899994,116.600006l-42.899994,19.5c-3.299988,1.5 -6.200012,2.100006 -8.600006,2.200012c-4,0.199982 -6.399994,-0.700012 -6.399994,-0.700012s-42,-16.600006 -46.600006,-17.100006\\\" stroke-miterlimit=\\\"10\\\" stroke-linejoin=\\\"round\\\" stroke-linecap=\\\"round\\\" stroke-width=\\\"7\\\" stroke=\\\"#6B6B6B\\\" fill=\\\"none\\\"/>\\n      <polyline points=\\\"96.29998779296875,102.10000610351562 96.29998779296875,114.20001220703125 128.60000610351562,123.79998779296875 \\\" stroke-miterlimit=\\\"10\\\" stroke-linejoin=\\\"round\\\" stroke-linecap=\\\"round\\\" stroke-width=\\\"7\\\" stroke=\\\"#6B6B6B\\\" fill=\\\"none\\\"/>\\n      <line y2=\\\"126.1\\\" x2=\\\"59.8\\\" y1=\\\"113.6\\\" x1=\\\"96.9\\\" stroke-miterlimit=\\\"10\\\" stroke-linejoin=\\\"round\\\" stroke-linecap=\\\"round\\\" stroke-width=\\\"7\\\" stroke=\\\"#6B6B6B\\\" fill=\\\"none\\\"/>\\n      <path d=\\\"m92.899994,90.299988c0,0 -4.700012,0.700012 -12.299988,4.200012l-41.200012,20.5l-8.800003,-20.299988c0,0 -2.199997,-4.200012 6,-8.5l45.099991,-19.400024l52.100006,-17l10.100006,22.100006l-50.399994,18.399994l-11.5,-22.199982\\\" stroke-miterlimit=\\\"10\\\" stroke-linejoin=\\\"round\\\" stroke-linecap=\\\"round\\\" stroke-width=\\\"7\\\" stroke=\\\"#6B6B6B\\\" fill=\\\"none\\\"/>\\n      <line y2=\\\"139.8\\\" x2=\\\"95.7\\\" y1=\\\"165.6\\\" x1=\\\"96.3\\\" stroke-miterlimit=\\\"10\\\" stroke-linejoin=\\\"round\\\" stroke-linecap=\\\"round\\\" stroke-width=\\\"7\\\" stroke=\\\"#6B6B6B\\\" fill=\\\"none\\\"/>\\n      <path d=\\\"m123.399994,30.200012l6.200012,11l2.199982,-3c0,0 20.700012,7.100006 27,40.799988c0,0 0.600006,-33.399994 -23.699982,-45.099976l2.399994,-3.200012l-14.100006,-0.5z\\\" fill=\\\"#6B6B6B\\\"/>\\n     </g>\\n </g>\\n</svg>\";\n},\"useData\":true}));\n\nHandlebars.registerPartial(\"icons-caret-left\", this[\"amp\"][\"templates\"][\"dfs\"][\"icons-caret-left\"] = Handlebars.template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<svg viewBox=\\\"0 0 64 93\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:svg=\\\"http://www.w3.org/2000/svg\\\">\\n  <g>\\n   <path id=\\\"svg_1\\\" d=\\\"m14.65002,46.05286l35,-35c0,0 4.29999,-5 0,-9.80002c0,0 -4.79999,-3.5 -9.79999,1.20001l-37.60001,37.60001c0,0 -6.60001,5.19998 0,12.10001l39.79999,38.29999c0,0 5.80002,5.3 10.5,1c0,0 5.20001,-4.79999 -2.29999,-12.2l-35.60001,-33.19998l0.00001,-0.00001l0,-0.00001z\\\" fill=\\\"#5C2C91\\\"/>\\n  </g>\\n </svg>\";\n},\"useData\":true}));\n\nHandlebars.registerPartial(\"icons-caret-right\", this[\"amp\"][\"templates\"][\"dfs\"][\"icons-caret-right\"] = Handlebars.template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<svg viewBox=\\\"0 0 64 93\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:svg=\\\"http://www.w3.org/2000/svg\\\">\\n  <g>\\n   <path id=\\\"svg_1\\\" d=\\\"m47.65536,46.05286l-35,-35c0,0 -4.29999,-5 0,-9.80002c0,0 4.79999,-3.5 9.79999,1.20001l37.60001,37.60001c0,0 6.60001,5.19998 0,12.10001l-39.79999,38.29999c0,0 -5.80002,5.29999 -10.5,1c0,0 -5.20001,-4.79999 2.29999,-12.20001l35.60001,-33.19998z\\\" fill=\\\"#5C2C91\\\"/>\\n  </g>\\n </svg>\";\n},\"useData\":true}));\n\nHandlebars.registerPartial(\"icons-close\", this[\"amp\"][\"templates\"][\"dfs\"][\"icons-close\"] = Handlebars.template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<svg class=\\\"amp-svg-icon\\\" viewBox=\\\"0 0 200 200\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:svg=\\\"http://www.w3.org/2000/svg\\\">\\n    <g>\\n        \\n        <g>\\n            <path fill=\\\"#6D6D6C\\\" d=\\\"m147.062088,65.286598l-79.455261,79.455254c-1.570251,1.570251 -3.341545,2.311523 -3.985329,1.66774l-9.785526,-9.785522c-0.643787,-0.643784 0.097481,-2.415085 1.667736,-3.985336l79.455246,-79.455254c1.570282,-1.570286 3.341461,-2.311432 3.985245,-1.667648l9.785538,9.785526c0.643784,0.643784 -0.097382,2.414967 -1.667648,3.985241z\\\"/>\\n            <path fill=\\\"#6D6D6C\\\" d=\\\"m134.958939,144.741898l-79.455196,-79.455193c-1.57024,-1.570236 -2.311516,-3.341545 -1.667732,-3.985329l9.785526,-9.785526c0.643784,-0.643784 2.415092,0.097492 3.985329,1.667732l79.455193,79.455196c1.570313,1.570313 2.311447,3.341476 1.667664,3.98526l-9.785522,9.785522c-0.643784,0.643784 -2.414948,-0.097351 -3.98526,-1.667664z\\\"/>\\n        </g>\\n    </g>\\n</svg>\";\n},\"useData\":true}));\n\nHandlebars.registerPartial(\"icons-recliner\", this[\"amp\"][\"templates\"][\"dfs\"][\"icons-recliner\"] = Handlebars.template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<svg class=\\\"amp-svg-icon\\\" viewBox=\\\"0 0 200 200\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:svg=\\\"http://www.w3.org/2000/svg\\\">\\n    <g>\\n        \\n        <g>\\n            <path\\n                  d=\\\"m142.300018,143.399963l0,-34.299988l24,-35.799988c0,0 11.200012,-18.200012 -7.100006,-21.700012l-38.899994,-6.100006c0,0 -11.899994,0.899994 -8.399994,18.899994c0,0 -11.600006,5 -26.399994,29.400024l0.600006,-12.400024c0,0 -0.200012,-5.099976 -8.100006,-2.199982l-34.800003,13.299988c0,0 -7.200012,1.200012 -7.400009,15.100006c0,0 0.199997,13.399994 0.199997,13.399994c-0.099991,0.100006 -9,7.200012 -8.799988,15.100006l30.199997,16.5c0,0 7.600006,4.200012 19.399994,-9.200012l8.800018,3.300018l0,6.299988l17.799988,7.200012l38.899994,-16.800018z\\\"\\n                  stroke-miterlimit=\\\"10\\\" stroke-linejoin=\\\"round\\\" stroke-width=\\\"6\\\" stroke=\\\"#6B6B6B\\\" fill=\\\"none\\\"/>\\n            <path d=\\\"m162.800018,52.599976c0,0 -15,-2.100006 -12.799988,19.899994l-38.200012,-8.100006\\\"\\n                  stroke-miterlimit=\\\"10\\\" stroke-linejoin=\\\"round\\\" stroke-width=\\\"6\\\" stroke=\\\"#6B6B6B\\\" fill=\\\"none\\\"/>\\n            <path d=\\\"m150,72.499969c0,0 -6.700012,5 -16,21.5\\\" stroke-miterlimit=\\\"10\\\" stroke-width=\\\"6\\\"\\n                  stroke=\\\"#6B6B6B\\\" fill=\\\"none\\\"/>\\n            <path\\n                  d=\\\"m142.300018,109.099976c0,-12.200012 -8.399994,-15.100006 -8.399994,-15.100006c-6,-4 -14,-0.899994 -14,-0.899994l-14.299988,6.600006l-20.400024,-6l-35.499985,16.199982c0,0 -7.400009,3.300018 -14.100006,11\\\"\\n                  stroke-miterlimit=\\\"10\\\" stroke-width=\\\"6\\\" stroke=\\\"#6B6B6B\\\" fill=\\\"none\\\"/>\\n            <path\\n                  d=\\\"m76.5,143.399963c9.799988,-12.299988 8.799988,-18.799988 8.799988,-18.799988l-35.499985,-14.600006l0,-8.899994c0,0 1.199997,-10.700012 -8.100006,-8.200012\\\"\\n                  stroke-miterlimit=\\\"10\\\" stroke-width=\\\"6\\\" stroke=\\\"#6B6B6B\\\" fill=\\\"none\\\"/>\\n            <path d=\\\"m85.400024,124.499969c0,0 -16.299988,-0.300018 -27.199982,28.399994\\\"\\n                  stroke-miterlimit=\\\"10\\\" stroke-width=\\\"6\\\" stroke=\\\"#6B6B6B\\\" fill=\\\"none\\\"/>\\n            <path\\n                  d=\\\"m85.400024,146.599976l0.100006,-25.700012c0,0 -0.5,-13.399994 5.799988,-14.699982c0,0 10.800018,-2.800018 11.899994,7.699982l0,44.700012\\\"\\n                  stroke-miterlimit=\\\"10\\\" stroke-width=\\\"6\\\" stroke=\\\"#6B6B6B\\\" fill=\\\"none\\\"/>\\n            <line y2=\\\"106.199976\\\" x2=\\\"91.200012\\\" y1=\\\"99.699976\\\" x1=\\\"105.800012\\\" stroke-miterlimit=\\\"10\\\"\\n                  stroke-width=\\\"6\\\" stroke=\\\"#6B6B6B\\\" fill=\\\"none\\\"/>\\n            <path\\n                  d=\\\"m90.400024,66.099976c0,0 8.100006,-25.600006 34.299988,-31.600006l0,2.100006l8.600006,-4.700012l-8.600006,-4.099976l0,2.299988c0,0.100006 -30.5,2.899994 -34.299988,36z\\\"\\n                  fill=\\\"#6B6B6B\\\"/>\\n            <path\\n                  d=\\\"m58.399994,167.699982l-0.5,2.200012l-7.599976,-5.800018l9.399994,-2.799988l-0.399994,2c0,0 13.699982,0.5 20.699982,-13.200012c-0.099976,0.100006 -0.299988,17.5 -21.600006,17.600006z\\\"\\n                  fill=\\\"#6B6B6B\\\"/>\\n        </g>\\n    </g>\\n</svg>\\n\";\n},\"useData\":true}));\n\nHandlebars.registerPartial(\"icons-video\", this[\"amp\"][\"templates\"][\"dfs\"][\"icons-video\"] = Handlebars.template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<svg class=\\\"amp-svg-icon\\\" viewBox=\\\"0 0 200 200\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:svg=\\\"http://www.w3.org/2000/svg\\\">\\n    <g>\\n        <g>\\n            <path\\n                d=\\\"m65.299988,68.200012c0,-7 5,-9.899994 11.100006,-6.399994l62.299988,36c6.100006,3.600006 6.100006,9.299988 0,12.699982l-62.299988,36c-6.100006,3.600006 -11.100006,0.600006 -11.100006,-6.399994l0,-71.899994z\\\"\\n                fill=\\\"#6D6D6C\\\"/>\\n        </g>\\n    </g>\\n</svg>\\n\";\n},\"useData\":true}));\n\nHandlebars.registerPartial(\"icons-webgl\", this[\"amp\"][\"templates\"][\"dfs\"][\"icons-webgl\"] = Handlebars.template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<svg class=\\\"amp-svg-icon\\\" viewbox=\\\"0 0 200 200\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:svg=\\\"http://www.w3.org/2000/svg\\\">\\n\\n <g>\\n     \\n     <g>\\n      <text x=\\\"-240.545567\\\" y=\\\"-327\\\" font-size=\\\"53.8919\\\" font-family=\\\"'HelveticaNeue-Bold'\\\" fill=\\\"#6B6B6B\\\" transform=\\\"matrix(0.8065,0,0,1,262.5151,472.5182) \\\">3D</text>\\n      <path d=\\\"m139.799988,130.399994l0,10.899994c0,0 38.399994,-3.899994 39.200012,-15.899994c0,0 3.5,-11.700012 -43.800018,-20.700012c0,0 -68.299988,-9.5 -108.899994,10.100006c0,0 -34.199997,19.100006 37.899994,34.200012c0,0 -58.299988,-4.200012 -53.799988,-27.299988c0,0 7.199997,-17.800018 75,-21.800018c0,0 67.399994,-2.399994 93.600006,15.100006c0,0 20.399994,9.700012 -4.900024,22.799988c0,0 -8.5,3.900024 -34.199982,8.5l0,10.300018l-13.300018,-12.800018l13.200012,-13.399994z\\\" fill=\\\"#6B6B6B\\\"/>\\n      <g>\\n       <path d=\\\"m78.299988,105.700012c0.700012,-11.5 1.700012,-19 1.700012,-19c9,-47.299988 20.699982,-43.799988 20.699982,-43.799988c11.899994,0.799988 15.899994,39.199982 15.899994,39.199982l-11,0l13.5,13l12.800018,-13.299988l-10.300018,0c-4.5,-25.700012 -8.5,-34.200012 -8.5,-34.200012c-13,-25.199982 -22.799988,-4.899994 -22.799988,-4.899994c-9.700012,14.5 -13.299988,41.600006 -14.5,62.899994l2.5,0.100006l0,0l0,0z\\\" fill=\\\"#828282\\\"/>\\n      </g>\\n     </g>\\n </g>\\n</svg>\";\n},\"useData\":true}));\n\nHandlebars.registerPartial(\"icons-zoom-in\", this[\"amp\"][\"templates\"][\"dfs\"][\"icons-zoom-in\"] = Handlebars.template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<svg class=\\\"amp-svg-icon\\\" viewBox=\\\"0 0 200 200\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:svg=\\\"http://www.w3.org/2000/svg\\\">\\n    <g>\\n        \\n        <g>\\n            <circle fill=\\\"none\\\" stroke=\\\"#6D6D6C\\\" stroke-width=\\\"9\\\" stroke-miterlimit=\\\"10\\\" cx=\\\"87.525001\\\" cy=\\\"85.362332\\\" r=\\\"50.462687\\\"/>\\n            <path fill=\\\"#6D6D6C\\\" d=\\\"m173.131363,157.271667l-14.59816,14.59816c-3.063766,3.063766 -7.929825,3.063766 -10.813431,0l-36.40519,-36.405243c-3.06382,-3.063812 -3.06382,-7.92984 0,-10.813438l14.598099,-14.59816c3.063835,-3.063766 7.929893,-3.063766 10.813438,0l36.405243,36.405251c2.883545,3.063797 2.883545,7.749664 0,10.813431z\\\"/>\\n            <path fill=\\\"#6D6D6C\\\" d=\\\"m110.954124,94.914177l-45.596626,0c-0.901123,0 -1.622047,-0.720871 -1.622047,-1.621994l0,-13.697029c0,-0.901123 0.720924,-1.622002 1.622047,-1.622002l45.596626,0c0.901115,0 1.621994,0.720879 1.621994,1.622002l0,13.697029c0,0.901123 -0.720879,1.621994 -1.621994,1.621994z\\\"/>\\n            <path fill=\\\"#6D6D6C\\\" d=\\\"m79.77536,109.332092l0,-45.59663c0,-0.901119 0.720879,-1.622044 1.621994,-1.622044l13.697037,0c0.901115,0 1.621994,0.720924 1.621994,1.622044l0,45.59663c0,0.901115 -0.720879,1.621994 -1.621994,1.621994l-13.697037,0c-0.901115,-0.180183 -1.621994,-0.720879 -1.621994,-1.621994z\\\"/>\\n        </g>\\n    </g>\\n</svg>\";\n},\"useData\":true}));\n\nHandlebars.registerPartial(\"icons-zoom-out\", this[\"amp\"][\"templates\"][\"dfs\"][\"icons-zoom-out\"] = Handlebars.template({\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    return \"<svg class=\\\"amp-svg-icon\\\" viewBox=\\\"0 0 200 200\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:svg=\\\"http://www.w3.org/2000/svg\\\">\\n    <g>\\n        \\n        <g>\\n            <circle fill=\\\"none\\\" stroke=\\\"#6D6D6C\\\" stroke-width=\\\"9\\\" stroke-miterlimit=\\\"10\\\" cx=\\\"87.525001\\\" cy=\\\"85.362332\\\" r=\\\"50.462687\\\"/>\\n            <path fill=\\\"#6D6D6C\\\" d=\\\"m173.131363,157.271667l-14.59816,14.59816c-3.063766,3.063766 -7.929825,3.063766 -10.813431,0l-36.40519,-36.405243c-3.06382,-3.063812 -3.06382,-7.92984 0,-10.813438l14.598099,-14.59816c3.063835,-3.063766 7.929893,-3.063766 10.813438,0l36.405243,36.405251c2.883545,3.063797 2.883545,7.749664 0,10.813431z\\\"/>\\n            <path fill=\\\"#6D6D6C\\\" d=\\\"m110.954124,94.914177l-45.596626,0c-0.901123,0 -1.622047,-0.720871 -1.622047,-1.621994l0,-13.697029c0,-0.901123 0.720924,-1.622002 1.622047,-1.622002l45.596626,0c0.901115,0 1.621994,0.720879 1.621994,1.622002l0,13.697029c0,0.901123 -0.720879,1.621994 -1.621994,1.621994z\\\"/>\\n        </g>\\n    </g>\\n</svg>\";\n},\"useData\":true}));\n\nthis[\"amp\"][\"templates\"][\"dfs\"][\"template-desktop\"] = Handlebars.template({\"1\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    return \"                \"\n    + container.escapeExpression((helpers.renderPartial || (depth0 && depth0.renderPartial) || helpers.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"_template-main-item\",{\"name\":\"renderPartial\",\"hash\":{\"productName\":(depths[1] != null ? depths[1].productName : depths[1]),\"templates\":(depths[1] != null ? depths[1].templates : depths[1]),\"item\":depth0},\"data\":data}))\n    + \"\\n\";\n},\"3\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    return \"                        \"\n    + container.escapeExpression((helpers.renderPartial || (depth0 && depth0.renderPartial) || helpers.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"_template-nav-item\",{\"name\":\"renderPartial\",\"hash\":{\"templates\":(depths[1] != null ? depths[1].templates : depths[1]),\"item\":depth0},\"data\":data}))\n    + \"\\n\";\n},\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<section class=\\\"amp-viewer amp-desktop-viewer \"\n    + alias4(((helper = (helper = helpers.touch || (depth0 != null ? depth0.touch : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"touch\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\">\\n    <header class=\\\"amp-header\\\">\\n        <div class=\\\"amp-header-wrapper\\\">\\n            <div class=\\\"amp-header-product-title\\\">\\n                <h3>\"\n    + alias4(((helper = (helper = helpers.rangeName || (depth0 != null ? depth0.rangeName : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"rangeName\",\"hash\":{},\"data\":data}) : helper)))\n    + \": \"\n    + alias4(((helper = (helper = helpers.productName || (depth0 != null ? depth0.productName : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"productName\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</h3>\\n            </div>\\n            <div class=\\\"amp-roundels\\\"></div>\\n        </div>\\n    </header>\\n\\n    <div class=\\\"amp-main-container\\\">\\n        <ul class=\\\"amp-viewer-main\\\">\\n\"\n    + ((stack1 = helpers.each.call(alias1,(depth0 != null ? depth0.items : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"        </ul>\\n    </div>\\n    <div class=\\\"amp-nav-container\\\">\\n        <div class=\\\"amp-navigation-wrapper\\\">\\n            <div class=\\\"amp-prev amp-nav-prev amp-nav-button amp-moz-invisible\\\">\\n                <div class=\\\"amp-svg-icon-wrapper\\\">\\n\"\n    + ((stack1 = container.invokePartial(partials[\"icons-caret-left\"],depth0,{\"name\":\"icons-caret-left\",\"data\":data,\"indent\":\"                \",\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\")\n    + \"                </div>\\n            </div>\\n            <div class=\\\"amp-nav-thumbs\\\">\\n                <ul class=\\\"amp-navigation-main\\\">\\n\"\n    + ((stack1 = helpers.each.call(alias1,(depth0 != null ? depth0.items : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(3, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"                </ul>\\n            </div>\\n            <div class=\\\"amp-next amp-nav-next amp-nav-button amp-moz-invisible\\\">\\n                <div class=\\\"amp-svg-icon-wrapper\\\">\\n\"\n    + ((stack1 = container.invokePartial(partials[\"icons-caret-right\"],depth0,{\"name\":\"icons-caret-right\",\"data\":data,\"indent\":\"                \",\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\")\n    + \"                </div>\\n            </div>\\n\"\n    + ((stack1 = container.invokePartial(partials[\"_template-quicklinks\"],depth0,{\"name\":\"_template-quicklinks\",\"data\":data,\"indent\":\"            \",\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\")\n    + \"        </div>\\n    </div>\\n\\n</section>\\n\";\n},\"usePartial\":true,\"useData\":true,\"useDepths\":true});\n\nthis[\"amp\"][\"templates\"][\"dfs\"][\"template-fullscreen\"] = Handlebars.template({\"1\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    return \"               \"\n    + container.escapeExpression((helpers.renderPartial || (depth0 && depth0.renderPartial) || helpers.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"_template-main-item\",{\"name\":\"renderPartial\",\"hash\":{\"productName\":(depths[1] != null ? depths[1].productName : depths[1]),\"templates\":(depths[1] != null ? depths[1].templates : depths[1]),\"item\":depth0},\"data\":data}))\n    + \"\\n\";\n},\"3\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    return \"                        \"\n    + container.escapeExpression((helpers.renderPartial || (depth0 && depth0.renderPartial) || helpers.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"_template-nav-item\",{\"name\":\"renderPartial\",\"hash\":{\"templates\":(depths[1] != null ? depths[1].templates : depths[1]),\"item\":depth0},\"data\":data}))\n    + \"\\n\";\n},\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<section class=\\\"amp-viewer amp-fullscreen-viewer \"\n    + alias4(((helper = (helper = helpers.touch || (depth0 != null ? depth0.touch : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"touch\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\">\\n    <header>\\n    <h3>\"\n    + alias4(((helper = (helper = helpers.rangeName || (depth0 != null ? depth0.rangeName : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"rangeName\",\"hash\":{},\"data\":data}) : helper)))\n    + \": \"\n    + alias4(((helper = (helper = helpers.productName || (depth0 != null ? depth0.productName : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"productName\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</h3>\\n     <div class=\\\"amp-toplinks-container\\\">\\n            <div class=\\\"amp-toplinks-wrapper\\\">\\n                <div class=\\\"amp-toplinks amp-close\\\">\"\n    + ((stack1 = container.invokePartial(partials[\"icons-close\"],depth0,{\"name\":\"icons-close\",\"data\":data,\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\")\n    + \"</div>\\n                <div class=\\\"amp-toplinks amp-zoom-out\\\">\"\n    + ((stack1 = container.invokePartial(partials[\"icons-zoom-out\"],depth0,{\"name\":\"icons-zoom-out\",\"data\":data,\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\")\n    + \"</div>\\n                <div class=\\\"amp-toplinks amp-zoom-in\\\">\"\n    + ((stack1 = container.invokePartial(partials[\"icons-zoom-in\"],depth0,{\"name\":\"icons-zoom-in\",\"data\":data,\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\")\n    + \"</div>\\n            </div>\\n        </div>\\n    </header>\\n    <div class=\\\"amp-main-container\\\">\\n        <ul class=\\\"amp-viewer-main\\\">\\n\"\n    + ((stack1 = helpers.each.call(alias1,(depth0 != null ? depth0.items : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"        </ul>\\n    </div>\\n\\n    <div class=\\\"amp-nav-container\\\">\\n        <div class=\\\"amp-navigation-wrapper\\\">\\n            \\n            <div class=\\\"amp-prev amp-nav-prev amp-nav-button\\\">\\n                <div class=\\\"amp-svg-icon-wrapper\\\">\\n\"\n    + ((stack1 = container.invokePartial(partials[\"icons-caret-left\"],depth0,{\"name\":\"icons-caret-left\",\"data\":data,\"indent\":\"                \",\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\")\n    + \"                </div>\\n            </div>\\n            <div class=\\\"amp-nav-thumbs\\\">\\n                <ul class=\\\"amp-navigation-main\\\">\\n\"\n    + ((stack1 = helpers.each.call(alias1,(depth0 != null ? depth0.items : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(3, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"                </ul>\\n            </div>\\n            <div class=\\\"amp-next amp-nav-next amp-nav-button\\\">\\n                <div class=\\\"amp-svg-icon-wrapper\\\">\\n\"\n    + ((stack1 = container.invokePartial(partials[\"icons-caret-right\"],depth0,{\"name\":\"icons-caret-right\",\"data\":data,\"indent\":\"                \",\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\")\n    + \"                </div>\\n            </div>\\n\\n\"\n    + ((stack1 = container.invokePartial(partials[\"_template-quicklinks\"],depth0,{\"name\":\"_template-quicklinks\",\"data\":data,\"indent\":\"            \",\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\")\n    + \"        </div>\\n    </div>\\n</section>\\n\";\n},\"usePartial\":true,\"useData\":true,\"useDepths\":true});\n\nthis[\"amp\"][\"templates\"][\"dfs\"][\"template-integration\"] = Handlebars.template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"    <li class=\\\"key-value-pair\\\">\\n        <span class=\\\"key\\\">\"\n    + alias4(((helper = (helper = helpers.key || (depth0 != null ? depth0.key : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"key\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</span>\\n        <span class=\\\"value\\\"><pre>\"\n    + alias4(((helper = (helper = helpers.value || (depth0 != null ? depth0.value : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"value\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</pre></span>\\n    </li>\\n\";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"        <li class=\\\"key-value-pair\\\">\\n            <span class=\\\"key\\\">\"\n    + alias4(((helper = (helper = helpers.key || (depth0 != null ? depth0.key : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"key\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</span>\\n            <span class=\\\"value\\\"><pre>\"\n    + alias4(((helper = (helper = helpers.value || (depth0 != null ? depth0.value : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"value\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</pre></span>\\n        </li>\\n\";\n},\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, alias1=depth0 != null ? depth0 : (container.nullContext || {});\n\n  return \"<h1>Amplience DFS Viewer</h1>\\n\\n<h2>Integration Debug View</h2>\\n<ul class=\\\"key-value-pair-list\\\">\\n\"\n    + ((stack1 = helpers.each.call(alias1,(depth0 != null ? depth0.integrationPoints : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"</ul>\\n\\n<h2>Viewer Options</h2>\\n<ul class=\\\"key-value-pair-list\\\">\\n\"\n    + ((stack1 = helpers.each.call(alias1,(depth0 != null ? depth0.viewerOptions : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(3, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"</ul>\\n\\n\";\n},\"useData\":true});\n\nthis[\"amp\"][\"templates\"][\"dfs\"][\"template-mobile\"] = Handlebars.template({\"1\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    return \"                \"\n    + container.escapeExpression((helpers.renderPartial || (depth0 && depth0.renderPartial) || helpers.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"_template-main-item\",{\"name\":\"renderPartial\",\"hash\":{\"productName\":(depths[1] != null ? depths[1].productName : depths[1]),\"templates\":(depths[1] != null ? depths[1].templates : depths[1]),\"item\":depth0},\"data\":data}))\n    + \"\\n\";\n},\"3\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return ((stack1 = container.invokePartial(partials[\"_template-nav-item-alt\"],depth0,{\"name\":\"_template-nav-item-alt\",\"data\":data,\"indent\":\"                            \",\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\");\n},\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {});\n\n  return \"<section class=\\\"amp-viewer amp-mobile-viewer \"\n    + container.escapeExpression(((helper = (helper = helpers.touch || (depth0 != null ? depth0.touch : depth0)) != null ? helper : helpers.helperMissing),(typeof helper === \"function\" ? helper.call(alias1,{\"name\":\"touch\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\">\\n    <header>\\n        <div class=\\\"amp-toplinks-container\\\">\\n            <div class=\\\"amp-toplinks-wrapper\\\">\\n                <div class=\\\"amp-toplinks amp-zoom-out\\\">\"\n    + ((stack1 = container.invokePartial(partials[\"icons-zoom-out\"],depth0,{\"name\":\"icons-zoom-out\",\"data\":data,\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\")\n    + \"</div>\\n                <div class=\\\"amp-toplinks amp-zoom-in\\\">\"\n    + ((stack1 = container.invokePartial(partials[\"icons-zoom-in\"],depth0,{\"name\":\"icons-zoom-in\",\"data\":data,\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\")\n    + \"</div>\\n            </div>\\n        </div>\\n    </header>\\n    <div class=\\\"amp-main-container\\\" >\\n        <ul class=\\\"amp-viewer-main\\\">\\n\"\n    + ((stack1 = helpers.each.call(alias1,(depth0 != null ? depth0.items : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"        </ul>\\n    </div>\\n\\n    <div class=\\\"amp-nav-container\\\">\\n        <div class=\\\"amp-navigation-wrapper\\\">\\n            <div class=\\\"amp-navigation-container\\\">\\n                 <div class=\\\"amp-prev amp-nav-prev amp-nav-button\\\">\\n                     <div class=\\\"amp-svg-icon-wrapper\\\">\\n\"\n    + ((stack1 = container.invokePartial(partials[\"icons-caret-left\"],depth0,{\"name\":\"icons-caret-left\",\"data\":data,\"indent\":\"                     \",\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\")\n    + \"                     </div>\\n                 </div>\\n                 <div class=\\\"amp-nav-links\\\">\\n                     <ul class=\\\"amp-navigation-main\\\">\\n\"\n    + ((stack1 = helpers.each.call(alias1,(depth0 != null ? depth0.items : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(3, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"                     </ul>\\n                 </div>\\n                 <div class=\\\"amp-next amp-nav-next amp-nav-button\\\">\\n                     <div class=\\\"amp-svg-icon-wrapper\\\">\\n\"\n    + ((stack1 = container.invokePartial(partials[\"icons-caret-right\"],depth0,{\"name\":\"icons-caret-right\",\"data\":data,\"indent\":\"                     \",\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\")\n    + \"                     </div>\\n                 </div>\\n            </div>\\n\"\n    + ((stack1 = container.invokePartial(partials[\"_template-quicklinks\"],depth0,{\"name\":\"_template-quicklinks\",\"data\":data,\"indent\":\"           \",\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\")\n    + \"        </div>\\n    </div>\\n\\n</section>\\n\";\n},\"usePartial\":true,\"useData\":true,\"useDepths\":true});\n\nthis[\"amp\"][\"templates\"][\"dfs\"][\"template-quickview\"] = Handlebars.template({\"1\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    return \"                \"\n    + container.escapeExpression((helpers.renderPartial || (depth0 && depth0.renderPartial) || helpers.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"_template-main-item\",{\"name\":\"renderPartial\",\"hash\":{\"productName\":(depths[1] != null ? depths[1].productName : depths[1]),\"templates\":(depths[1] != null ? depths[1].templates : depths[1]),\"item\":depth0},\"data\":data}))\n    + \"\\n\";\n},\"3\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    return \"                        \"\n    + container.escapeExpression((helpers.renderPartial || (depth0 && depth0.renderPartial) || helpers.helperMissing).call(depth0 != null ? depth0 : (container.nullContext || {}),\"_template-nav-item\",{\"name\":\"renderPartial\",\"hash\":{\"templates\":(depths[1] != null ? depths[1].templates : depths[1]),\"item\":depth0},\"data\":data}))\n    + \"\\n\";\n},\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data,blockParams,depths) {\n    var stack1, helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"<section class=\\\"amp-viewer amp-quickview-viewer \"\n    + alias4(((helper = (helper = helpers.touch || (depth0 != null ? depth0.touch : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"touch\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\">\\n    <header>\\n        <h3>\"\n    + alias4(((helper = (helper = helpers.rangeName || (depth0 != null ? depth0.rangeName : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"rangeName\",\"hash\":{},\"data\":data}) : helper)))\n    + \": \"\n    + alias4(((helper = (helper = helpers.productName || (depth0 != null ? depth0.productName : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"productName\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</h3>\\n        <div class=\\\"amp-toplinks-container\\\">\\n            <div class=\\\"amp-toplinks-wrapper\\\">\\n                <div class=\\\"amp-toplinks amp-close close\\\">\"\n    + ((stack1 = container.invokePartial(partials[\"icons-close\"],depth0,{\"name\":\"icons-close\",\"data\":data,\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\")\n    + \"</div>\\n                <div class=\\\"amp-toplinks amp-zoom-out\\\">\"\n    + ((stack1 = container.invokePartial(partials[\"icons-zoom-out\"],depth0,{\"name\":\"icons-zoom-out\",\"data\":data,\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\")\n    + \"</div>\\n                <div class=\\\"amp-toplinks amp-zoom-in\\\">\"\n    + ((stack1 = container.invokePartial(partials[\"icons-zoom-in\"],depth0,{\"name\":\"icons-zoom-in\",\"data\":data,\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\")\n    + \"</div>\\n            </div>\\n        </div>\\n    </header>\\n    <div class=\\\"amp-main-container\\\" >\\n        <ul class=\\\"amp-viewer-main\\\">\\n\"\n    + ((stack1 = helpers.each.call(alias1,(depth0 != null ? depth0.items : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"        </ul>\\n    </div>\\n\\n    <div class=\\\"amp-nav-container\\\">\\n        <div class=\\\"amp-navigation-wrapper\\\">\\n            <div class=\\\"amp-prev amp-nav-prev amp-nav-button\\\">\\n                <div class=\\\"amp-svg-icon-wrapper\\\">\\n\"\n    + ((stack1 = container.invokePartial(partials[\"icons-caret-left\"],depth0,{\"name\":\"icons-caret-left\",\"data\":data,\"indent\":\"                \",\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\")\n    + \"                </div>\\n            </div>\\n            <div class=\\\"amp-nav-thumbs\\\">\\n                <ul class=\\\"amp-navigation-main\\\">\\n\"\n    + ((stack1 = helpers.each.call(alias1,(depth0 != null ? depth0.items : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(3, data, 0, blockParams, depths),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"                </ul>\\n            </div>\\n            <div class=\\\"amp-next amp-nav-next amp-nav-button\\\">\\n                <div class=\\\"amp-svg-icon-wrapper\\\">\\n\"\n    + ((stack1 = container.invokePartial(partials[\"icons-caret-right\"],depth0,{\"name\":\"icons-caret-right\",\"data\":data,\"indent\":\"                \",\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\")\n    + \"                </div>\\n            </div>\\n\"\n    + ((stack1 = container.invokePartial(partials[\"_template-quicklinks\"],depth0,{\"name\":\"_template-quicklinks\",\"data\":data,\"indent\":\"           \",\"helpers\":helpers,\"partials\":partials,\"decorators\":container.decorators})) != null ? stack1 : \"\")\n    + \"        </div>\\n    </div>\\n\\n</section>\\n\";\n},\"usePartial\":true,\"useData\":true,\"useDepths\":true});\n\nthis[\"amp\"][\"templates\"][\"dfs\"][\"template-roundels\"] = Handlebars.template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=helpers.helperMissing, alias3=\"function\", alias4=container.escapeExpression;\n\n  return \"\t<div class=\\\"amp-dfs-roundel \"\n    + alias4(((helper = (helper = helpers.position || (depth0 != null ? depth0.position : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"position\",\"hash\":{},\"data\":data}) : helper)))\n    + \" \"\n    + alias4(((helper = (helper = helpers.className || (depth0 != null ? depth0.className : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"className\",\"hash\":{},\"data\":data}) : helper)))\n    + \"\\\">\\n\t\t<span>\"\n    + alias4(((helper = (helper = helpers.description || (depth0 != null ? depth0.description : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"description\",\"hash\":{},\"data\":data}) : helper)))\n    + \"</span>\\n\t</div>\\n\";\n},\"compiler\":[7,\">= 4.0.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1;\n\n  return \"<div class=\\\"roundels\\\">\\n\"\n    + ((stack1 = helpers.each.call(depth0 != null ? depth0 : (container.nullContext || {}),(depth0 != null ? depth0.roundels : depth0),{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data})) != null ? stack1 : \"\")\n    + \"</div>\\n\\n\";\n},\"useData\":true});\n\nmodule.exports = this[\"amp\"][\"templates\"][\"dfs\"];","\"use strict\";\nvar log = require('../utils/log');\n\nvar Handlebars = window.Handlebars;\nHandlebars.registerHelper('renderPartial', function (partialName, options) {\n    if (!partialName) {\n        log.error('No partial name given.');\n        return '';\n    }\n    var partial = Handlebars.partials[partialName];\n    if (!partial) {\n        log.error('Couldnt find the compiled partial: ' + partialName);\n        return '';\n    }\n    return new Handlebars.SafeString(partial(options.hash));\n});\n\nHandlebars.registerHelper('compare', function (lvalue, operator, rvalue, options) {\n\n    var operators;\n    var result;\n\n    if (arguments.length < 3) {\n        throw new Error('Handlerbars Helper \"compare\" needs 2 parameters');\n    }\n\n    if (options === undefined) {\n        options = rvalue;\n        rvalue = operator;\n        operator = '===';\n    }\n\n    operators = {\n        '===': function (l, r) { return l === r; },\n        '!==': function (l, r) { return l !== r; },\n        '<': function (l, r) { return l < r; },\n        '>': function (l, r) { return l > r; },\n        '<=': function (l, r) { return l <= r; },\n        '>=': function (l, r) { return l >= r; },\n        'typeof': function (l, r) { return typeof l === r; }\n    };\n\n    if (!operators[operator]) {\n        throw new Error('Handlerbars Helper \"compare\" doesn\\'t know the operator ' + operator);\n    }\n\n    result = operators[operator](lvalue, rvalue);\n\n    if (result) {\n        return options.fn(this);\n    } else {\n        return options.inverse(this);\n    }\n\n});\n\nmodule.exports = Handlebars;\n","\"use strict\";\nvar amp = window.amp;\n\nmodule.exports = amp;\n","\"use strict\";\n/*jshint browserify: true */\nvar log = require('../utils/log');\nvar $ = require('../common/jquery');\nvar amp = require('../utils/namespace');\n\nvar defaultErrorSet = function () {\n    return [{src:this.diService.errImgURL}];\n};\n\nvar DiService = function (options) {\n    if (this._validOptions(options)) {\n        this.options = $.extend({}, options);\n\n        var path = this.options.path;\n\n        if (path.substring(path.length - 1) !== '/') {\n            this.options.path = this.options.path + '/';\n        }\n\n        try {\n            var initOptions = {\n                'client_id': this.options.account,\n                'cache_window':1,\n                'di_basepath': this.options.path\n            };\n\n            if (options.cacheBust) {\n                initOptions['cache_window'] = this.options.cacheBust;\n            }\n\n            amp.init(initOptions);\n            this.errImgURL = amp.getAssetURL({type:'i', name:this.options.errImgName});\n        } catch (e) {\n            log.warn('failed to initialize Amplience DI API', e);\n        }\n\n    }\n};\n\nDiService.prototype = {\n    _validOptions: function (options) {\n        if (!options.account) {\n            log.warn('[DiService] `account` required to initialize API');\n            return false;\n        }\n\n        if (!options.path) {\n            log.warn('[DiService] `path` required to initialize API');\n            return false;\n        }\n\n        if (!options.path) {\n            log.warn('[DiService] `contentPath` required to initialize API');\n            return false;\n        }\n\n        return true;\n    },\n\n    getMediaSet: function (setName, success, error) {\n        amp.get({\n            name: setName,\n            type: 's'\n        }, success, error ? error : defaultErrorSet, this.options.videoSortOrder);\n    }\n};\n\nmodule.exports = DiService;\n\n","\"use strict\";\n/* global console */\n/* jshint -W097 */\n\n// set up safe console\nvar logFns = ['log', 'error', 'warn', 'info'];\n\nvar log = {\n    history: []\n};\n\nvar fallback = function () {\n    log.history.push(arguments);\n};\n\nvar ieLegacy = function () {\n    Function.prototype.call.call(console.log, console, Array.prototype.slice.call(arguments));\n};\n\nvar specializedFn;\nvar defaultFn;\n\nfor (var i = 0; i < logFns.length; i++) {\n\n    if (typeof console !== 'undefined' && typeof console.log === 'object') {\n        // ie8 + ie9\n        log[logFns[i]] = ieLegacy;\n    } else if (typeof console !== 'undefined' && typeof console.log === 'function') {\n        specializedFn = window.console && window.console[logFns[i]] && window.console[logFns[i]].bind(window.console);\n        defaultFn = window.console && window.console.log && window.console.log.bind(window.console);\n\n        log[logFns[i]] = specializedFn || defaultFn || fallback;\n    } else {\n        log[logFns[i]] = fallback;\n    }\n}\n\n// put this on global scope to allow interrogation of history for fallback\nwindow.ampLog = log;\n\nmodule.exports = log;\n","\"use strict\";\n/*jshint browserify: true */\nvar $ = require('./jquery');\n\nvar NavController = function ($nav, $main, $next, $prev, mainSelect) {\n    this.ui = {\n        $nav: $nav,\n        $main: $main,\n        $next: $next,\n        $prev: $prev,\n        //mainSelect will call either stack select or carousel select depending on viewer\n        mainSelect: mainSelect\n    };\n\n    this.updateNavUI();\n    this._bindEvents();\n};\n\nNavController.prototype = {\n    _bindEvents: function () {\n        var self = this;\n\n        self.ui.$nav.on('click', '.amp-slide', function () {\n            self.select($(this).index());\n        });\n\n        self.ui.$prev.click($.proxy(self.prev, self));\n        self.ui.$next.click($.proxy(self.next, self));\n    },\n    _positionVisibleThumbs: function (opts) {\n        /*\n         * If thumbs number is less then minimum (now it is 4),\n         * then assign width to '.amp-navigation-container', so it could be centered\n         * @param {Object} opts.$thumbs - All thumbs tags\n         **/\n        var $thumbs = opts.$thumbs;\n        var thumbsLength = $thumbs.length;\n        var $thumbsContainer = this.ui.$nav.find('.amp-navigation-container');\n        if ($thumbs.filter('.amp-partially-visible').length > 0) {\n            $thumbsContainer.css({width: ''});\n            return false;\n        }\n\n        var calculatedWidth = ($thumbs.slice(0, 1).outerWidth(true) * thumbsLength) +\n            (this.ui.$next.outerWidth(true) + this.ui.$prev.outerWidth(true));\n        $thumbsContainer.css({\n            width: calculatedWidth + 'px'\n        });\n    },\n    _resizeNavThumbsOverflow: function () {\n\n        var self = this;\n        var $thumbs = self.ui.$nav.find('.amp-slide');\n        self.resizeNavtimeout = null;\n        var resizeCallback = function () {\n            if (self.resizeNavtimeout) {\n                clearTimeout(this.timeout);\n            }\n            $thumbs.addClass('amp-overflow-hidden');\n\n            self.resizeNavtimeout = setTimeout(function () {\n                $thumbs = self.ui.$nav.find('.amp-slide');\n                $thumbs.removeClass('amp-overflow-hidden');\n            }, 250);\n        };\n        return resizeCallback;\n    },\n    updateNavUI: function () {\n        var $thumbs = this.visibleThumbs();\n\n        if (this.visibleThumbs().length === this.numberOfThumbs()) {\n            this.ui.$next.css('visibility', 'hidden');\n            this.ui.$prev.css('visibility', 'hidden');\n            this._positionVisibleThumbs({\n                $thumbs: $thumbs\n            });\n            return false;\n        }\n        if (!this.canNext()) {\n            this.ui.$next.css('visibility', 'hidden');\n        } else if (this.visibleThumbs().length !== this.numberOfThumbs()) {\n            this.ui.$next.css('visibility', 'visible');\n        }\n\n        if (!this.canPrev()) {\n            this.ui.$prev.css('visibility', 'hidden');\n        } else if (this.visibleThumbs().length !== this.numberOfThumbs()) {\n            this.ui.$prev.css('visibility', 'visible');\n        }\n\n        this._positionVisibleThumbs({\n            $thumbs: $thumbs\n        });\n    },\n    canNext: function () {\n        return this.currentIndex() < this.numberOfThumbs() - 1;\n    },\n    canPrev: function () {\n        return this.currentIndex() > 0;\n    },\n    currentIndex: function () {\n        return this.ui.$nav.find('.amp-slide.amp-selected').index();\n    },\n    visibleThumbs: function () {\n        return this.ui.$nav.find('.amp-slide.amp-visible');\n    },\n    totalThumbsArr: function () {\n        var arr = [];\n        for (var i = 1; i < this.numberOfThumbs() + 1; i++) {\n            arr.push(i);\n        }\n        return arr;\n    },\n    getVisibleArr: function () {\n        var rootNavEl = this.ui.$nav.find('.amp-anim-container');\n        var assets = Array.prototype.slice.call(rootNavEl[0].children);\n        var result = [];\n        assets.forEach(function (el, index) {\n            if ($(el).hasClass('amp-visible')) {\n                result.push(index + 1);\n            }\n        });\n        return result;\n    },\n    currentThumbArr: function (index) {\n        var total = this.totalThumbsArr();\n        var visibleAssets = this.getVisibleArr();\n\n        var answer = {};\n\n        var centralEl = Math.floor(visibleAssets.length / 2);\n        var direction = visibleAssets[centralEl] - index;\n\n        if (direction < 0 && index !== total[total.length - 1]) {\n            answer.next = Math.abs(direction);\n        } else if (direction > 0 && index !== total[0]) {\n            answer.prev = Math.abs(direction);\n        } else {\n            answer.next = 0;\n            answer.prev = 0;\n        }\n        return answer;\n    },\n    numberOfThumbs: function () {\n        return this.ui.$nav.find('.amp-slide').length;\n    },\n    next: function () {\n        var currIndex = this.currentIndex() + 1;\n\n        if (currIndex < this.numberOfThumbs()) {\n            if (!this.currentThumbArr(currIndex + 1).next) {\n                this.ui.$nav.ampCarousel('select', ++currIndex);\n            } else {\n                this.ui.$nav.ampCarousel('next');\n                this.ui.$nav.ampCarousel('select', ++currIndex);\n            }\n        }\n\n        this.ui.mainSelect(currIndex);\n        this.updateNavUI();\n    },\n    prev: function () {\n        var currIndex = this.currentIndex();\n\n        if (currIndex > 0) {\n            // select starts at 1 so this will select previous\n            this.ui.$nav.ampCarousel('select', currIndex);\n        }\n\n        if (this.currentThumbArr(currIndex).prev) {\n            this.ui.$nav.ampCarousel('prev');\n        }\n\n        this.ui.mainSelect(currIndex);\n        this.updateNavUI();\n    },\n    select: function (elIndex) {\n        var index = elIndex + 1;\n        var central = Math.floor(this.visibleThumbs().length / 2);\n        var arr = this.getVisibleArr();\n        var diff = index - arr[arr.length - 1];\n\n        //construction to fix IE9 unnatural transition animation\n        if (this.currentIndex() + 1 - index < 0 && index > arr[arr.length - 1]) {\n            if (diff <= central) {\n                for (var count = diff; count > 0; count--) {\n                    this.ui.$nav.ampCarousel('next');\n                }\n            } else {\n                this.ui.$nav.ampCarousel('select', index - 1);\n            }\n        }\n\n        this.ui.$nav.ampCarousel('select', index);\n        var currIndex = this.currentIndex();\n        var answer = this.currentThumbArr(currIndex + 1);\n\n        if (answer.next) {\n            for (var i = answer.next; i > 0; i--) {\n                this.ui.$nav.ampCarousel('next');\n            }\n        } else if (answer.prev) {\n            for (var j = answer.prev; j > 0; j--) {\n                this.ui.$nav.ampCarousel('prev');\n            }\n        }\n\n        this.ui.mainSelect(index);\n        this.updateNavUI();\n    },\n    reset: function () {\n        this.updateNavUI();\n    }\n};\n\nmodule.exports = NavController;\n","\"use strict\";\nvar amp = require('./namespace');\n/*jshint browserify: true */\nvar quickLinkMap = {\n    spinset: 'amp-spinset',\n    video: 'amp-video-holder',\n    recliner: 'amp-recliner',\n    box: 'amp-box'\n};\n\nvar QuickLinksController = function (navController, zoomController, videoController, $main,\n        $quicklinks, currentSlide, getMainChildren, openFullscreen) {\n    this.quicklinkModel = {};\n    this.ui = {\n        $main: $main,\n        $quicklinks: $quicklinks,\n        currentSlide: currentSlide,\n        getMainChildren: getMainChildren\n    };\n\n    if (this.ui.$quicklinks.$fullscreenLink && this.ui.$quicklinks.$fullscreenLink.length) {\n        this.ui.$quicklinks.$fullscreenLink.css('display', 'block');\n        this.ui.$quicklinks.$fullscreenLink.click(openFullscreen);\n    }\n    this.navController = navController;\n    this.zoomController = zoomController;\n    this.videoController = videoController;\n\n    this.init();\n};\n\nQuickLinksController.prototype = {\n    _spinsetIsSpinning: false,\n    _spinsetSpinningEvent: function () {\n        var self = this;\n        self._spinningTimeout = null;\n        amp.stats.bind([\n            {'type': 'spin', 'event': 'change', 'cb': function () {\n                    self._spinsetIsSpinning = true;\n                    if (self._spinningTimeout) {\n                        clearTimeout(self._spinningTimeout);\n                    }\n                    self._spinningTimeout = setTimeout(function () {\n                        self._spinsetIsSpinning = false;\n                    }, 100);\n\n                }\n            }\n        ]);\n    },\n    init: function () {\n        for (var p in quickLinkMap) {\n            var model = {name: p, class: quickLinkMap[p], open: false};\n            if (p === 'recliner' || p === 'spinset') {\n                model.action = 'spin';\n            } else {\n                model.action = p;\n            }\n            this.quicklinkModel['$' + p + 'Link'] = model;\n        }\n        this.ui.$quicklinks.$boxLink.find('.amp-icon-box-close').css('display', 'none');\n        this.ui.$quicklinks.$boxLink.find('.amp-icon-box-open').css('display', 'block');\n        this._bindEvents();\n    },\n    _bindEvents: function () {\n        var self = this;\n\n        for (var p in this.ui.$quicklinks) {\n\n            var model = this.quicklinkModel[p];\n            if (!model) {\n                continue;\n            }\n\n            this.ui.$quicklinks[p].unbind('click');\n            var index = self.ui.$main.find('.' + model.class).first().parent('li').index();\n            this.ui.$quicklinks[p].css('display', 'none');\n            if (index >= 0) {\n                this.ui.$quicklinks[p].css('display', 'block');\n            }\n\n            this.ui.$quicklinks[p].click(this.action.bind(this, index, model));\n\n            this._spinsetSpinningEvent();\n        }\n    },\n    action: function (index, model) {\n        if (typeof this[model.action + 'Action'] === 'function') {\n            this[model.action + 'Action'](index, model);\n        } else {\n            this.navController.select.call(this.navController, index);\n        }\n    },\n    videoAction: function (index, model) {\n        var self = this;\n        var currentSlide = this.ui.currentSlide();\n        this.navController.select.call(this.navController, index);\n        var $videoHolder = currentSlide.find('.' + model.class);\n        if ($videoHolder.length === 0) {\n            this.navController.select.call(this.navController, index);\n            setTimeout(function () {\n                self.videoController.play();\n            }, 300);\n\n        }\n    },\n    boxAction: function (index, model) {\n        var self = this;\n        clearTimeout(this.timeout);\n        var currentSlide = this.ui.currentSlide();\n        if (currentSlide.find('.' + model.class).length === 0) {\n            this.navController.select.call(this.navController, index);\n            setTimeout(function () {\n                self.boxToggle(index, model);\n            }, 300);\n        } else {\n            this.boxToggle(currentSlide.index(), model);\n        }\n    },\n    boxToggle: function (index, model) {\n        model.open = !model.open;\n        if (model.open) {\n            this.ui.getMainChildren().eq(index).find('.' + model.class).ampStack('goTo', 2);\n            this.ui.$quicklinks.$boxLink.find('.amp-icon-box-open').css('display', 'none');\n            this.ui.$quicklinks.$boxLink.find('.amp-icon-box-close').css('display', '');\n        } else {\n            this.ui.getMainChildren().eq(index).find('.' + model.class).ampStack('goTo', 1);\n            this.ui.$quicklinks.$boxLink.find('.amp-icon-box-open').css('display', '');\n            this.ui.$quicklinks.$boxLink.find('.amp-icon-box-close').css('display', 'none');\n        }\n    },\n    spinAction: function (index, model) {\n        var $spin;\n        var currentSlide = this.ui.currentSlide();\n        if (currentSlide.find('.' + model.class).length === 0) {\n            this.navController.select.call(this.navController, index);\n        } else {\n            if (this._spinsetIsSpinning) {\n                return false;\n            }\n            $spin = currentSlide.find('.' + model.class);\n            $spin.ampSpin('playRepeat', 1);\n        }\n    },\n    reset: function ($lastSlide) {\n        if ($lastSlide && $lastSlide.find('.' + quickLinkMap.box).length > 0) {\n            var index = $lastSlide.index();\n            this.quicklinkModel.$boxLink.open = true;\n            this.boxToggle(index, this.quicklinkModel.$boxLink);\n        }\n    }\n};\n\nmodule.exports = QuickLinksController;\n","\"use strict\";\n/*jshint browserify: true */\nvar $ = require('./jquery');\n\nvar UiHintController = function (configObject) {\n    this.config = configObject || {};\n};\n\nUiHintController.prototype = {\n    _overlayTimeouts: {\n        //store hide timeout with initial false\n\n    },\n    hideMobileOverlayTimeout: function (opts) {\n        var self = this;\n        var $overlay = opts.$overlay;\n\n        if (self._overlayTimeouts[self._baseViewer.viewerType]) {\n            clearTimeout(self._overlayTimeouts[self._baseViewer.viewerType]);\n        }\n\n        self.showMobileOverlay($overlay);\n\n        self._overlayTimeouts[self._baseViewer.viewerType] = setTimeout(function () {\n            self.hideMobileOverlay($overlay);\n        }, self.config.uiHintTimers.displayTimer);\n    },\n    _createUi: function () {\n        // set ui\n        var self = this;\n\n        this.ui = {\n            $viewer: self._baseViewer.ui.$el.find('.amp-viewer'),\n            $main: self._baseViewer.ui.$main,\n            uiHints: {\n                $clickTraps: self._baseViewer.ui.$el.find('.amp-cover-box.amp-double-tap-prompt'),\n                $exitHints: self._baseViewer.ui.$el.find('.amp-cover-box.amp-exit-prompt')\n            },\n            currentSlide: self._baseViewer.ui.currentSlide\n        };\n    },\n    showMobileOverlay: function ($overlay, callback) {\n        var self = this;\n        $overlay\n                .css('display', 'block')\n                .removeClass('hidden');\n        $overlay.animate({\n            opacity: 1\n        }, self.config.uiHintTimers.transitionTimer, function () {\n            if (callback) {\n                callback.call(self);\n            }\n        });\n    },\n    hideMobileOverlay: function ($overlay, callback) {\n        var self = this;\n        $overlay.animate({\n            opacity: 0\n        }, self.config.uiHintTimers.transitionTimer, function () {\n            $overlay\n                    .css('display', 'none')\n                    .addClass('hidden');\n\n            if (callback) {\n                callback.call(self);\n            }\n        });\n    },\n    _doubleTapBehavior: function (opts) {\n        var self = this;\n        var ts = opts.e.timeStamp;\n        var oldTime = opts.$tag.data('ampTouchTimestamp');\n        if (oldTime) {\n            if (ts - oldTime < 250) {\n                opts.e.preventDefault();\n                opts.callback.call(self, opts.$tag);\n            }\n        }\n        opts.$tag.data('ampTouchTimestamp', ts);\n    },\n    _eventHelpers: {\n        showSpinModeClickTrap: function ($target) {\n            var self = this;\n            if (self.ui.$viewer.hasClass('amp-ui-touch')) {\n                var $clickTrap = $target.parent().find('.amp-cover-box.amp-double-tap-prompt');\n                self.showMobileOverlay($clickTrap);\n                self.hideMobileOverlayTimeout({\n                    $overlay: $clickTrap.find('.amp-message')\n                });\n            }\n        },\n        showExitSpinModeHint: function ($target) {\n            var self = this;\n            var $exitHint = $target.parent().find('.amp-exit-prompt');\n            self.showMobileOverlay($exitHint);\n            self.hideMobileOverlayTimeout({\n                $overlay: $exitHint\n            });\n        }\n    },\n    _bindEvents: function () {\n        var self = this;\n        var $uiHints = self.ui.$main.find('.amp-ui-hint');\n\n        // provide touch friendly double tap to exit spin mode\n        $uiHints.on('touchstart', function (e) {\n            var $this = $(this);\n            self._doubleTapBehavior({\n                e: e,\n                $tag: $this,\n                callback: function ($tag) {\n                    self._eventHelpers.showSpinModeClickTrap.call(self, $tag);\n                }\n            });\n        });\n\n        self.ui.uiHints.$exitHints.on('touchstart', function (e) {\n\n            var $this = $(this);\n            self.hideMobileOverlay($this, function () {\n                self._doubleTapBehavior({\n                    e: e,\n                    $tag: $this,\n                    callback: function ($tag) {\n                        self._eventHelpers.showSpinModeClickTrap.call(self, $tag);\n                    }\n                });\n            });\n\n            // access private method on spin widget to start the drag\n            // behind the prompt's click trap layer\n            $this.parent().find('ul').data()['ampAmpSpin']._startDrag(e);\n        });\n\n        // provide touch friendly double tap to enter spin mode\n        self.ui.uiHints.$clickTraps.on('touchstart', function (e) {\n            var $this = $(this);\n            self._doubleTapBehavior({\n                e: e,\n                $tag: $this,\n                callback: function ($tag) {\n                    self.hideMobileOverlay($tag, function () {\n                        self._eventHelpers.showExitSpinModeHint.call(self, $tag);\n                    });\n                }\n            });\n\n        });\n\n        // allow user to enter spin mode using double click if they are on\n        // a mixed pointer input device\n        self.ui.uiHints.$clickTraps.on('dblclick', function () {\n            var $this = $(this);\n            self.hideMobileOverlay($this, function () {\n                self._eventHelpers.showExitSpinModeHint.call(self, $this);\n            });\n        });\n    },\n    update: function () {\n        var $currentSlide = this.ui.currentSlide();\n        var isHintSlide = $currentSlide.find('.amp-ui-hint').length;\n        var self = this;\n\n        if (isHintSlide && this.ui.$viewer.hasClass('amp-ui-touch')) {\n            var $showOverlay = $currentSlide.find('.amp-cover-box.amp-double-tap-prompt');\n            var $hideOverlay = $currentSlide.find('.amp-exit-prompt');\n            // Show 'double tap' init overlay\n            self.showMobileOverlay($showOverlay);\n\n            //hide 'double tap' hider overlay\n            self.hideMobileOverlay($hideOverlay);\n\n            //hide 'double tap init' overlay after specified timeout\n            self.hideMobileOverlayTimeout({\n                $overlay: $showOverlay.find('.amp-message')\n            });\n        }\n    },\n    init: function (baseViewer) {\n        var self = this;\n        //cache baseViewer object\n        self._baseViewer = baseViewer;\n        //initAll\n        this._createUi();\n        this.update();\n        this._bindEvents();\n    }\n};\n\nmodule.exports = UiHintController;\n","\"use strict\";\n/*jshint browserify: true */\nvar $ = require('./jquery');\nvar BoxController = function ($main, $boxLink, quickLinksController) {\n    this.ui = {\n        $main: $main,\n        $boxLink: $boxLink\n    };\n\n    this._bindEvents();\n    this.quickLinksController = quickLinksController;\n};\n\nBoxController.prototype = {\n    _bindEvents: function () {\n        var self = this;\n\n        self.ui.$main.find('.amp-box').click(function () {\n            var $this = $(this);\n            var selectedIndex = $this.find('.amp-selected').index();\n            var toggledIndex = !selectedIndex;\n            if ($this.data('amp-ampStack')) {\n                self.quickLinksController.quicklinkModel.$boxLink.open = toggledIndex;\n                $this.ampStack('goTo', toggledIndex + 1);\n                self.ui.$boxLink.find('.amp-icon-box-open').toggle();\n                self.ui.$boxLink.find('.amp-icon-box-close').toggle();\n            }\n        });\n    },\n\n    reset: function () {\n        this._bindEvents();\n    }\n\n};\n\nmodule.exports = BoxController;\n","\"use strict\";\n/*jshint browserify: true */\nvar $ = require('./jquery');\nvar amp = require('../common/namespace');\n\nvar VideoController = function ($main, currentSlide) {\n    this.timer = null;\n    this.ui = {\n        $main: $main,\n        $currentPiPSlide: null,\n        currentSlide: currentSlide\n    };\n\n    this._bindEvents();\n};\n\nVideoController.prototype = {\n    _bindEvents: function () {\n        var self = this;\n        //had to set timeout here because it doesn't calculate 98 of main container properly,\n        // as carousel was not fully loaded\n        setTimeout(self._resizeAllVideo.bind(self), 100);\n        amp.stats.bind({\n            'type': 'video', 'event': 'fullScreenChange', 'cb': self._resizeVideo.bind(self)\n        });\n\n        //ios9 PiP pause video if not current video\n        var $allVideo = self.ui.$main.find('.amp-video video');\n        if ($allVideo && $allVideo.length) {\n            if ($allVideo[0].webkitSupportsPresentationMode &&\n                    typeof $allVideo[0].webkitSetPresentationMode === 'function') {\n                $allVideo.each(function () {\n                    $(this).bind('webkitpresentationmodechanged', (function ($video) {\n                        return function () {\n                            if ($video[0].webkitPresentationMode === 'picture-in-picture') {\n                                self.ui.$currentPiPSlide = self.ui.currentSlide();\n                            }\n                            if ($video[0].webkitPresentationMode === 'inline') {\n                                if (self.ui.$currentPiPSlide.index() !== self.ui.currentSlide().index()) {\n                                    var $vidWidget = self.ui.$currentPiPSlide.find('.amp-video');\n                                    if ($vidWidget.data('ampAmpVideo')) {\n                                        $vidWidget.ampVideo('pause');\n                                    }\n                                }\n                            }\n                        };\n                    })($(this)));\n                });\n            }\n        }\n    },\n    play: function () {\n        var $currentVideoSlide = this.ui.currentSlide().find('.amp-video');\n        var VIDEO_PAUSED = 2;\n        var VIDEO_STOPPED = 0;\n\n        if ($currentVideoSlide.length) {\n            var currentState = $currentVideoSlide.ampVideo('state');\n            if (currentState === VIDEO_PAUSED || currentState === VIDEO_STOPPED) {\n                $currentVideoSlide.ampVideo('play');\n            } else {\n                $currentVideoSlide\n                        .ampVideo('pause');\n\n                setTimeout(function () {\n                    $currentVideoSlide\n                            .ampVideo('seek', 0)\n                            .ampVideo('play');\n                }, 1);\n            }\n        }\n    },\n    pause: function () {\n        var $currentSlide = this.ui.currentSlide();\n        var $currentVideoSlide = $currentSlide.find('.amp-video');\n\n        if ($currentVideoSlide.length) {\n            $currentVideoSlide.ampVideo('pause');\n        }\n    },\n    pauseAllVideo: function () {\n        $('body').find('.amp-viewer .amp-video').each(function () {\n            var $video = $(this);\n            if ($video.data('amp-ampVideo') && $video.find('.vjs-playing').length > 0) {\n                $video.ampVideo('pause');\n            }\n        });\n    },\n    _debouncedResizeVideo: function () {\n        if (this.timer) {\n            clearTimeout(this.timer);\n        }\n        this.timer = setTimeout(this._resizeCurrentVideo.bind(this, arguments), 20);\n    },\n    _resizeAllVideo: function () {\n        var self = this;\n        this.ui.$main.find('.amp-video-holder').each(function () {\n            var $videoHolder = $(this);\n            var $ampVideo = $videoHolder.find('.amp-video');\n            $ampVideo\n                    .css({\n                        visibility: 'hidden'\n                    })\n                    .removeClass('amp-hidden');\n            self._resizeVideo($videoHolder);\n            setTimeout(function () {\n                $ampVideo.css({\n                    visibility: 'visible'\n                });\n            }, 200);\n        });\n    },\n    _resizeCurrentVideo: function () {\n        var $currentSlide = this.ui.currentSlide();\n        var $videoHolder = $currentSlide.find('.amp-video-holder');\n        this._resizeVideo($videoHolder);\n    },\n    _resizeVideo: function ($videoHolder) {\n        var $videoEl;\n        var containerSize = {};\n        var originalMediaSize = {};\n        var aspectFit = {};\n\n        if (!$videoHolder.length) {\n            return;\n        }\n\n        $videoEl = $videoHolder.find('.video-js');\n\n        originalMediaSize.width = $videoHolder.attr('data-amp-width');\n        originalMediaSize.height = $videoHolder.attr('data-amp-height');\n        containerSize.width = this.ui.$main.width();\n        containerSize.height = this.ui.$main.height();\n\n        originalMediaSize.aspectRatio = originalMediaSize.width / originalMediaSize.height;\n        containerSize.aspectRatio = containerSize.width / containerSize.height;\n\n        if (containerSize.aspectRatio >= originalMediaSize.aspectRatio) {\n            aspectFit.height = containerSize.height;\n            aspectFit.width = originalMediaSize.aspectRatio * containerSize.height;\n        } else {\n            aspectFit.height = (originalMediaSize.height / originalMediaSize.width) * containerSize.width;\n            aspectFit.width = containerSize.width;\n        }\n\n        $videoHolder\n                .find('.amp-video .video-js, video')\n                .css({\n                    'height': aspectFit.height,\n                    'width': aspectFit.width\n                });\n    }\n};\n\nmodule.exports = VideoController;\n"]}