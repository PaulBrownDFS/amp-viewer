!function(i,e){var t=0,n=Array.prototype.slice,d=i.cleanData;i.cleanData=function(e){for(var t,n=0;null!=(t=e[n]);n++)try{i(t).triggerHandler("remove")}catch(o){}d(e)},i.widget=function(t,n,d){var o,a,r,s,h={},u=t.split(".")[0];t=t.split(".")[1],o=u+"-"+t,d||(d=n,n=i.Widget),i.expr[":"][o.toLowerCase()]=function(e){return!!i.data(e,o)},i[u]=i[u]||{},a=i[u][t],r=i[u][t]=function(i,t){return this._createWidget?(arguments.length&&this._createWidget(i,t),e):new r(i,t)},i.extend(r,a,{version:d.version,_proto:i.extend({},d),_childConstructors:[]}),s=new n,s.options=i.widget.extend({},s.options),i.each(d,function(t,d){return i.isFunction(d)?(h[t]=function(){var i=function(){return n.prototype[t].apply(this,arguments)},e=function(i){return n.prototype[t].apply(this,i)};return function(){var t,n=this._super,o=this._superApply;return this._super=i,this._superApply=e,t=d.apply(this,arguments),this._super=n,this._superApply=o,t}}(),e):(h[t]=d,e)}),r.prototype=i.widget.extend(s,{widgetEventPrefix:a?s.widgetEventPrefix||t:t},h,{constructor:r,namespace:u,widgetName:t,widgetFullName:o}),a?(i.each(a._childConstructors,function(e,t){var n=t.prototype;i.widget(n.namespace+"."+n.widgetName,r,t._proto)}),delete a._childConstructors):n._childConstructors.push(r),i.widget.bridge(t,r)},i.widget.extend=function(t){for(var d,o,a=n.call(arguments,1),r=0,s=a.length;s>r;r++)for(d in a[r])o=a[r][d],a[r].hasOwnProperty(d)&&o!==e&&(t[d]=i.isPlainObject(o)?i.isPlainObject(t[d])?i.widget.extend({},t[d],o):i.widget.extend({},o):o);return t},i.widget.bridge=function(t,d){var o=d.prototype.widgetFullName||t;i.fn[t]=function(a){var r="string"==typeof a,s=n.call(arguments,1),h=this;return a=!r&&s.length?i.widget.extend.apply(null,[a].concat(s)):a,r?this.each(function(){var n,d=i.data(this,o);return d?i.isFunction(d[a])&&"_"!==a.charAt(0)?(n=d[a].apply(d,s),n!==d&&n!==e?(h=n&&n.jquery?h.pushStack(n.get()):n,!1):e):i.error("no such method '"+a+"' for "+t+" widget instance"):i.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+a+"'")}):this.each(function(){var e=i.data(this,o);e?e.option(a||{})._init():i.data(this,o,new d(a,this))}),h}},i.Widget=function(){},i.Widget._childConstructors=[],i.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,n){n=i(n||this.defaultElement||this)[0],this.element=i(n),this.uuid=t++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=i.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=i(),this.hoverable=i(),this.focusable=i(),n!==this&&(i.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(i){i.target===n&&this.destroy()}}),this.document=i(n.style?n.ownerDocument:n.document||n),this.window=i(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:i.noop,_getCreateEventData:i.noop,_create:i.noop,_init:i.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(i.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:i.noop,widget:function(){return this.element},option:function(t,n){var d,o,a,r=t;if(0===arguments.length)return i.widget.extend({},this.options);if("string"==typeof t)if(r={},d=t.split("."),t=d.shift(),d.length){for(o=r[t]=i.widget.extend({},this.options[t]),a=0;d.length-1>a;a++)o[d[a]]=o[d[a]]||{},o=o[d[a]];if(t=d.pop(),1===arguments.length)return o[t]===e?null:o[t];o[t]=n}else{if(1===arguments.length)return this.options[t]===e?null:this.options[t];r[t]=n}return this._setOptions(r),this},_setOptions:function(i){var e;for(e in i)this._setOption(e,i[e]);return this},_setOption:function(i,e){return this.options[i]=e,"disabled"===i&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,d){var o,a=this;"boolean"!=typeof t&&(d=n,n=t,t=!1),d?(n=o=i(n),this.bindings=this.bindings.add(n)):(d=n,n=this.element,o=this.widget()),i.each(d,function(d,r){function s(){return t||a.options.disabled!==!0&&!i(this).hasClass("ui-state-disabled")?("string"==typeof r?a[r]:r).apply(a,arguments):e}"string"!=typeof r&&(s.guid=r.guid=r.guid||s.guid||i.guid++);var h=d.match(/^(\w+)\s*(.*)$/),u=h[1]+a.eventNamespace,p=h[2];p?o.delegate(p,u,s):n.bind(u,s)})},_off:function(i,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,i.unbind(e).undelegate(e)},_delay:function(i,e){function t(){return("string"==typeof i?n[i]:i).apply(n,arguments)}var n=this;return setTimeout(t,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){i(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){i(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){i(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){i(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,t,n){var d,o,a=this.options[e];if(n=n||{},t=i.Event(t),t.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),t.target=this.element[0],o=t.originalEvent)for(d in o)d in t||(t[d]=o[d]);return this.element.trigger(t,n),!(i.isFunction(a)&&a.apply(this.element[0],[t].concat(n))===!1||t.isDefaultPrevented())}},i.each({show:"fadeIn",hide:"fadeOut"},function(e,t){i.Widget.prototype["_"+e]=function(n,d,o){"string"==typeof d&&(d={effect:d});var a,r=d?d===!0||"number"==typeof d?t:d.effect||t:e;d=d||{},"number"==typeof d&&(d={duration:d}),a=!i.isEmptyObject(d),d.complete=o,d.delay&&n.delay(d.delay),a&&i.effects&&i.effects.effect[r]?n[e](d):r!==e&&n[r]?n[r](d.duration,d.easing,o):n.queue(function(t){i(this)[e](),o&&o.call(n[0]),t()})}})}(jQuery);var amp=amp||{};!function(){function i(i){var e=[];for(var t in i)i.hasOwnProperty(t)&&e.push(t+"="+i[t]);return e.join("&")}function e(i,e){for(var t=i.split("&"),n=[],d=0;d<t.length;d++){var o=t[d].split("="),a={};e?e(o,a):a[o[0]]=o[1],n.push(a)}return n}function t(i){return"[object Array]"===Object.prototype.toString.call(i)}amp.di={},amp.stats={},function(){for(var i=0,e=["webkit","moz"],t=0;t<e.length&&!window.requestAnimationFrame;++t)window.requestAnimationFrame=window[e[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[t]+"CancelAnimationFrame"]||window[e[t]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,t){var n=(new Date).getTime(),d=Math.max(0,16-(n-i)),o=window.setTimeout(function(){e(n+d)},d);return i=n+d,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(i){clearTimeout(i)})}();var n=n||{};n.stringify=n.stringify||function(i){var e=typeof i;if("object"!=e||null===i)return"string"==e&&(i='"'+i+'"'),String(i);var t,d,o=[],a=i&&i.constructor==Array;for(t in i)i.hasOwnProperty(t)&&(d=i[t],e=typeof d,"string"==e?d='"'+d+'"':"object"==e&&null!==d&&(d=n.stringify(d)),o.push((a?"":'"'+t+'":')+String(d)));return(a?"[":"{")+String(o)+(a?"]":"}")},n.parse=n.parse||function(i){if("string"!=typeof i||!i)return null;var e=/^[\],:{}\s]*$/,t=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,n=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,d=/(?:^|:|,)(?:\s*\[)+/g,o=/^\s+|\s+$/g;return e.test(i.replace(o,"").replace(t,"@").replace(n,"]").replace(d,""))?new Function("return "+i)():void 0},function(){var i,e,t,n;!function(){var d={},o={};i=function(i,e,t){d[i]={deps:e,callback:t}},n=t=e=function(i){function t(e){if("."!==e.charAt(0))return e;for(var t=e.split("/"),n=i.split("/").slice(0,-1),d=0,o=t.length;o>d;d++){var a=t[d];if(".."===a)n.pop();else{if("."===a)continue;n.push(a)}}return n.join("/")}if(n._eak_seen=d,o[i])return o[i];if(o[i]={},!d[i])throw new Error("Could not find module "+i);for(var a,r=d[i],s=r.deps,h=r.callback,u=[],p=0,c=s.length;c>p;p++)"exports"===s[p]?u.push(a={}):u.push(e(t(s[p])));var m=h.apply(this,u);return o[i]=a||m}}(),i("promise/all",["./utils","exports"],function(i,e){"use strict";function t(i){var e=this;if(!n(i))throw new TypeError("You must pass an array to all.");return new e(function(e,t){function n(i){return function(e){o(i,e)}}function o(i,t){r[i]=t,0===--s&&e(r)}var a,r=[],s=i.length;0===s&&e([]);for(var h=0;h<i.length;h++)a=i[h],a&&d(a.then)?a.then(n(h),t):o(h,a)})}var n=i.isArray,d=i.isFunction;e.all=t}),i("promise/asap",["exports"],function(i){"use strict";function e(){return function(){process.nextTick(d)}}function t(){var i=0,e=new s(d),t=document.createTextNode("");return e.observe(t,{characterData:!0}),function(){t.data=i=++i%2}}function n(){return function(){h.setTimeout(d,1)}}function d(){for(var i=0;i<u.length;i++){var e=u[i],t=e[0],n=e[1];t(n)}u=[]}function o(i,e){var t=u.push([i,e]);1===t&&a()}var a,r="undefined"!=typeof window?window:{},s=r.MutationObserver||r.WebKitMutationObserver,h="undefined"!=typeof global?global:void 0===this?window:this,u=[];a="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?e():s?t():n(),i.asap=o}),i("promise/config",["exports"],function(i){"use strict";function e(i,e){return 2!==arguments.length?t[i]:void(t[i]=e)}var t={instrument:!1};i.config=t,i.configure=e}),i("promise/polyfill",["./promise","./utils","exports"],function(i,e,t){"use strict";function n(){var i;i="undefined"!=typeof global?global:"undefined"!=typeof window&&window.document?window:self;var e="Promise"in i&&"resolve"in i.Promise&&"reject"in i.Promise&&"all"in i.Promise&&"race"in i.Promise&&function(){var e;return new i.Promise(function(i){e=i}),o(e)}();e||(i.Promise=d)}var d=i.Promise,o=e.isFunction;t.polyfill=n}),i("promise/promise",["./config","./utils","./all","./race","./resolve","./reject","./asap","exports"],function(i,e,t,n,d,o,a,r){"use strict";function s(i){if(!$(i))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof s))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._subscribers=[],h(i,this)}function h(i,e){function t(i){l(e,i)}function n(i){f(e,i)}try{i(t,n)}catch(d){n(d)}}function u(i,e,t,n){var d,o,a,r,s=$(t);if(s)try{d=t(n),a=!0}catch(h){r=!0,o=h}else d=n,a=!0;m(e,d)||(s&&a?l(e,d):r?f(e,o):i===R?l(e,d):i===T&&f(e,d))}function p(i,e,t,n){var d=i._subscribers,o=d.length;d[o]=e,d[o+R]=t,d[o+T]=n}function c(i,e){for(var t,n,d=i._subscribers,o=i._detail,a=0;a<d.length;a+=3)t=d[a],n=d[a+e],u(e,t,n,o);i._subscribers=null}function m(i,e){var t,n=null;try{if(i===e)throw new TypeError("A promises callback cannot return that same promise.");if(b(e)&&(n=e.then,$(n)))return n.call(e,function(n){return t?!0:(t=!0,void(e!==n?l(i,n):v(i,n)))},function(e){return t?!0:(t=!0,void f(i,e))}),!0}catch(d){return t?!0:(f(i,d),!0)}return!1}function l(i,e){i===e?v(i,e):m(i,e)||v(i,e)}function v(i,e){i._state===C&&(i._state=k,i._detail=e,w.async(V,i))}function f(i,e){i._state===C&&(i._state=k,i._detail=e,w.async(g,i))}function V(i){c(i,i._state=R)}function g(i){c(i,i._state=T)}var w=i.config,b=(i.configure,e.objectOrFunction),$=e.isFunction,S=(e.now,t.all),P=n.race,y=d.resolve,_=o.reject,z=a.asap;w.async=z;var C=void 0,k=0,R=1,T=2;s.prototype={constructor:s,_state:void 0,_detail:void 0,_subscribers:void 0,then:function(i,e){var t=this,n=new this.constructor(function(){});if(this._state){var d=arguments;w.async(function(){u(t._state,n,d[t._state-1],t._detail)})}else p(this,n,i,e);return n},"catch":function(i){return this.then(null,i)}},s.all=S,s.race=P,s.resolve=y,s.reject=_,r.Promise=s}),i("promise/race",["./utils","exports"],function(i,e){"use strict";function t(i){var e=this;if(!n(i))throw new TypeError("You must pass an array to race.");return new e(function(e,t){for(var n,d=0;d<i.length;d++)n=i[d],n&&"function"==typeof n.then?n.then(e,t):e(n)})}var n=i.isArray;e.race=t}),i("promise/reject",["exports"],function(i){"use strict";function e(i){var e=this;return new e(function(e,t){t(i)})}i.reject=e}),i("promise/resolve",["exports"],function(i){"use strict";function e(i){if(i&&"object"==typeof i&&i.constructor===this)return i;var e=this;return new e(function(e){e(i)})}i.resolve=e}),i("promise/utils",["exports"],function(i){"use strict";function e(i){return t(i)||"object"==typeof i&&null!==i}function t(i){return"function"==typeof i}function n(i){return"[object Array]"===Object.prototype.toString.call(i)}var d=Date.now||function(){return(new Date).getTime()};i.objectOrFunction=e,i.isFunction=t,i.isArray=n,i.now=d}),e("promise/polyfill").polyfill()}(),amp.conf={cache_window:216e5,default_size:190,client_id:null,di_basepath:"http://i1.adis.ws/",content_basepath:"http://c1.adis.ws/",err_img:null},function(){amp.init=function(i){for(var e in i)amp.conf.hasOwnProperty(e)&&(amp.conf[e]=i[e])}}();var d=amp.indexOf=function(i,e){"use strict";if(null==i)throw new TypeError;var t=Object(i),n=t.length>>>0;if(0===n)return-1;var d=0;if(arguments.length>1&&(d=Number(arguments[2]),d!=d?d=0:0!=d&&d!=1/0&&d!=-(1/0)&&(d=(d>0||-1)*Math.floor(Math.abs(d)))),d>=n)return-1;for(var o=d>=0?d:Math.max(n-Math.abs(d),0);n>o;o++)if(o in t&&t[o]===e)return o;return-1},o=function(){var i=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],n=t.length;return function(d){if("object"!=typeof d&&("function"!=typeof d||null===d))throw new TypeError("Object.keys called on non-object");var o,a,r=[];for(o in d)i.call(d,o)&&r.push(o);if(e)for(a=0;n>a;a++)i.call(d,t[a])&&r.push(t[a]);return r}}();!function(){function e(i){var e=0;for(var t in i)i.hasOwnProperty(t)&&++e;return e}amp.getAssetURL=function(i){return amp.conf.di_basepath+i.type+"/"+amp.conf.client_id+"/"+i.name};var n=function(i){var e=[];if(i.items||i.set&&i.set.items)for(var t=i.items||i.set.items,d=0;d<t.length;d++){var o=t[d];"video"==o.type?e.push({name:o.name,type:"v"}):(o.items||o.set&&o.set.items)&&(e=e.concat(n(o)))}return e},o=function(i,e){for(var t=[],n=0;n<i.length;n++){for(var d=i[n],o=!1,a=0;a<e.length;a++){var r=e[a];if(r.name===d.name&&r.type===d.type){o=!0;break}}o||t.push(d)}return t},a=function(i,e,t){for(var n in e)if(e.hasOwnProperty(n)){if(-1!=d(t,n))continue;i[n]=e[n]}return i},r=function(i){for(var e in i)if(i.hasOwnProperty(e))for(var t=i[e],n=0;n<t.media.length;n++)t.media[n].htmlCodec=amp.videoToFormat(t.media[n]);return i},s=function(i,e){for(var t in i)if(i.hasOwnProperty(t)){var n=i[t];n.media=amp.sortVideoSource(n.media,e)}return i},h=function(i,e){for(var t in i){if(i.hasOwnProperty(t))var n=i[t],d=function(i,e){if(i.items||i.set&&i.set.items)for(var t=i.items||i.set.items,n=0;n<t.length;n++){var o=t[n];"video"==o.type&&o.name==e.name?o=a(o,e,["url"]):(o.items||o.set&&o.set.items)&&(o=d(o,e))}return i};e=d(e,n)}return e},u=function(i,e){for(var t in i){if(i.hasOwnProperty(t))var n=i[t],d=function(i,e){if(i.items||i.set&&i.set.items)for(var t=i.items||i.set.items,n=0;n<t.length;n++){var o=t[n];"video"==o.type?t.splice(n,1):(o.items||o.set&&o.set.items)&&(o=d(o,e))}return i};e=d(e,n)}return e};amp.get=function(i,d,a,p,c){var m=0,l=!0,v={},V={},g=0,c=c||6e4,w=function(e){return function(t,d){var a=n(d),c=o(a,i),l=function(){m++,v[t]=d,v[t].url=e,v[t].name=v[t].name?v[t].name:t,m==g&&$()};c.length?amp.get(c,function(i){i=r(i),p&&(i=s(i,p)),d=h(i,d),l()},function(i){d=u(i,d),l()}):(d.media&&(d=r({d:d}).d,p&&(d=s({d:d},p).d)),l())}},b=function(i){return function(e,t){m++,V[e]=t,V[e].url=i,l=!0,m==g&&$()}},$=function(){e(v)>0&&d&&d(v),e(V)>0&&a&&a(V)},S=function(i){return i&&i.type&&i.name?!0:!1};if(t(i)){g=i.length;for(var P=0;g>P;P++)if(S(i[P])){var y=amp.getAssetURL(i[P]);f(y+".js",i[P].name,w(y),b(y),i.transform,c)}}else{if(g=1,!S(i))return;var y=amp.getAssetURL(i);f(amp.getAssetURL(i)+".js",i.name,w(y),b(y),i.transform,c)}};var p=function(){var i=new Date;return i-=i%amp.conf.cache_window},c=function(i){var e=l[i];e&&e.dispose(),delete m[i],delete v[i],delete l[i]},m=[],l=[],v=[];amp.jsonCache={},amp.jsonReturn=function(i,e){if(m[i]){clearTimeout(v[i]);for(var t=0;t<m[i].length;t++){var n=m[i][t];"error"==e.status?n.fail&&n.fail(i,e):(amp.jsonCache[i]=e,n.win&&n.win(i,e))}c(i)}},amp.get.createScript=function(i,e){var t=document.createElement("script");return t.src=i,t.onerror=e,t.dispose=function(){document.body.removeChild(t)},document.body.appendChild(t),t},amp.clearJsonCache=function(){amp.jsonCache={}};var f=amp.jsonp=function(e,t,n,d,o,a){var a=a||6e4;if(o?o+="&":o="",amp.jsonCache[t])return void n(t,amp.jsonCache[t]);if(m[t])return void m[t].push({win:n,fail:d});m[t]=[{win:n,fail:d}],v[t]=setTimeout(function(){amp.jsonReturn(t,{status:"error",code:404,message:"Not Found",name:t})},a);var r=e+"?"+o+i({deep:!0,timestamp:p(),arg:"'"+t+"'",func:"amp.jsonReturn"}),s=amp.get.createScript(r,function(i){amp.jsonReturn(t,{status:"error",code:404,message:"Not Found",name:t})});l[t]=s}}(),function(){var i=10;amp.content=function(i,n,o,a){var a=a||6e4;t(i)||(i=[i]),d(i,a,function(i,t){i.length>0&&n(e(i)),t.length>0&&o(t)})};var e=function(i){for(var e=[],t=0;t<i.length;t++)for(var n=i[t].result.payload,d=0;d<n.length;d++){var o=n[d];o.name=o.key.split("/"),o.name=o.name[o.name.length-1],e.push(o)}return e},n=function(i){return amp.conf.content_basepath+"p/"+amp.conf.client_id+"/["+o(i)+"].js"},d=function(e,t,d){for(var o=[],a=[],r=Math.ceil(e.length/i),s=function(i,e){o.push({name:i,result:e}),u()},h=function(i,e){a.push({name:i,result:e}),u()},u=function(){o.length+a.length===r&&d&&d(o,a)},p=0;r>p;p++){var c=e.slice(p*i,p*i+i);amp.jsonp(n(e),c.join(","),s,h,t)}},o=function(i){for(var e=[],t=0;t<i.length;t++)e.push('"/c//'+i[t]+'"');return e.join(",")}}(),function(){amp.genHTML=function(i,e,d,o){if(i){var a={},r=function(i){var t=n(i,d,o);a[i.name]=t,e&&e.appendChild&&e.appendChild(t)};if(t(i))for(var s=0;s<i.length;s++)r(i[s]);else{if("object"!=typeof i)return;r(i)}return a}};var i=function(i){if(!i||!i.src&&!i.url)return!1;for(var e=i.isImage?i.url:i.src,t=amp.di.get(e),n=0;n<t.length;n++){var d=t[n];if(d.width&&"undefined"!=d.width||d.height&&"undefined"!=d.height)return!0}return!1};amp.videoToFormat=function(i){if(i){var e=i.format,t="",n="";switch(e&&e.toLowerCase()){case"flash video":e="flv";break;case"mpeg4":e="mp4"}switch(i["video.codec"]&&i["video.codec"].toLowerCase()){case"h264":break;case"theora":t="theora";break;case"vp8":t="vp8"}switch(i["audio.codec"]&&i["audio.codec"].toLowerCase()){case"aac":"mp4"==e&&(n="mp4a.40.2");break;case"vorbis":n="vorbis"}var d=e?"video/"+e:d;return""!=t&&(d+='; codecs="',d+=t,""!=n&&(d+=", "+n),d+='"'),d}},amp.genVideoHTML=function(e,t){e.src||(e.src=e.url);var n=document.createElement("div");n.setAttribute("id",e.name);var d=document.createElement("video");i(e)?d.setAttribute("poster",e.src):d.setAttribute("poster",amp.di.width(e.src,amp.conf.default_size));try{d.setAttribute("preload","auto")}catch(o){}d.setAttribute("controls","");var a,r=e.media;if(a=t?amp.sortVideoSource(r,t):r)for(var s=0;s<a.length;s++){var r=a[s],h=document.createElement("source");h.setAttribute("src",r.src),h.setAttribute("data-res",r.profileLabel),h.setAttribute("data-bitrate",r.bitrate),h.setAttribute("type",amp.videoToFormat(r)),d.appendChild(h)}return n.appendChild(d),n},amp.sortVideoSource=function(i,e){if(t(e)){if(e.length>0){for(var n=i.length,o=[],a=0;a<e.length;a++)for(var r=0;n>r;r++)(e[a]==i[r].profile||e[a]==i[r].profileLabel)&&o.push(i[r]);for(var r=0;n>r;r++)-1==d(e,i[r].profile)&&-1==d(e,i[r].profileLabel)&&o.push(i[r]);return o}}else if(!isNaN(e))return i.sort(function(i,t){var n=Math.abs(e-parseInt(i.bitrate)),d=Math.abs(e-parseInt(t.bitrate));return n-d});return i};var e=function(i){var e=i.split("/"),t=e[e.length-1];return t.split("?")[0]},n=function(t,d,a){var r;if(t.isImage||"img"==t.type){var r=document.createElement("img"),s=t.isImage?t.url:t.src;i(t)||(s=s+"?"+o(t)),d?r.setAttribute("data-amp-src",s):r.setAttribute("src",s),r.setAttribute("class","amp-main-img"),t.name?r.setAttribute("id",t.name):r.setAttribute("id",e(s))}else if("video"==t.type||t.media)r=amp.genVideoHTML(t,a);else if(t.items||t.set.items){var h=t.items||t.set.items,r=document.createElement("ul");r.setAttribute("id",t.name);for(var u=0;u<h.length;u++){var p=document.createElement("li");r.appendChild(p);var c=h[u];c.url=t.url,p.appendChild(n(c,d))}}return r},o=function(i){return i.width>i.height?"w="+amp.conf.default_size:"h="+amp.conf.default_size}}(),function(){var n=[{shortName:"cs",fullName:"grayscale",val:"gray"},{shortName:"dpi",fullName:"dpi",type:"number"},{shortName:"dpiFilter",fullName:"dpiFilter",type:"string"},{shortName:"resize",fullName:"resize",type:"boolean"},{shortName:"filter",fullName:"filter",type:"string"},{shortName:"upscale",fullName:"upscale",type:"boolean"},{shortName:"bg",fullName:"background",type:"string"},{shortName:"qlt",fullName:"quality",type:"number"},{shortName:"cm",fullName:"compositeMode",type:"string"},{shortName:"cs",fullName:"colourSpace",type:"string"},{shortName:"maxW",fullName:"maxWidth",type:"number"},{shortName:"maxH",fullName:"maxHeight",type:"number"},{shortName:"template",fullName:"template",type:"array"},{shortName:"w",fullName:"width",type:"number"},{shortName:"h",fullName:"height",type:"number"},{shortName:"fmt",fullName:"format",type:"string"},{shortName:"unsharp",fullName:"sharpen",type:"string"},{shortName:"crop",fullName:"crop",type:"string"},{shortName:"pcrop",fullName:"preCrop",type:"string"},{shortName:"img404",fullName:"missingImage",type:"string"},{shortName:"sm",fullName:"scaleMode",type:"string"},{shortName:"strip",fullName:"strip",type:"boolean"},{shortName:"orig",fullName:"original",type:"boolean"}],d=function(i,e,t){for(var d=0;d<i.length;d++){"object"==typeof i[d]&&o(i[d]);for(var a in i[d])if(i[d].hasOwnProperty(a))for(var r=0;r<n.length;r++)n[r][e]==a&&(n[r].val&&(i[d][n[r][e]]=n[r].val),n[r][t]!=n[r][e]&&(i[d][n[r][t]]=i[d][a],delete i[d][a]))}return i},a=function(i){for(var e={},t=i.length;t--;){var n="object"==typeof i[t]&&o(i[t]);e[n]&&"template"!=n&&i.splice(t,1),e[n]=!0}return i},r=function(t,n,d){var r=t.split("?"),s=r[1]?e(r[1],function(i,e){i[1]?e[i[0]]=i[1]:e.template=i[0]}):[];if(!s)return!1;if(!n&&!d)return a(s);if(s=a(s),!n&&d){for(var h=[],u=0;u<s.length;u++)if(s[u][d]){if("template"!=d)return s[u][d];h.push(s[u][d])}return h.length>0?h:!1}s=a(s.concat(n));for(var p=[],u=0;u<s.length;u++){var c=o(s[u]);if("template"==c){var m=s[u][c];if("[object Array]"===Object.prototype.toString.call(m))for(var l=0;l<m.length;l++)p.push(m[l]);else p.push(m)}else p.push(i(s[u]))}return r[0]+"?"+p.join("&")},s=function(i,e,t,n){for(var d in i)if(i.hasOwnProperty(d))if(null!=i[d]&&"object"==typeof i[d]){if(("img"==i[d].type||"set"==i[d].type||"video"==i[d].type)&&t&&t.exclude){for(var o=!1,a=0;a<t.exclude.length;a++)i[d].name==t.exclude[a]&&(o=!0);if(o)continue}s(i[d],e,t,n)}else("src"==d&&("img"==i.type||"set"==i.type||"video"==i.type)||"url"==d&&i.isImage)&&(i[d]=r(i[d],e,n));return i};amp.di.get=function(i){return i?d(r(i),"shortName","fullName"):!1},amp.di.set=function(i,e,n,o){return e&&(e=t(e)?d(e,"fullName","shortName"):d([e],"fullName","shortName")),"string"!=typeof i?s(i,e,n,o):r(i,e,o)},function(){for(var i=0;i<n.length;i++)!function(i){amp.di[i.fullName]=function(e,t){if(e){var n="grayscale"!=i.fullName?i.shortName:null,d="undefined"!=typeof i.val?i.val:t;if("undefined"!=typeof d){var o={};return o[i.shortName]=d,amp.di.set(e,o,null,n)}var a=amp.di.set(e,null,null,n);switch(i.type){case"number":return Number(a);case"boolean":if("true"==a)return!0;if("false"==a)return!1;case"string":default:return a}}}}(n[i])}()}(),function(){var i=[];i.all=[],amp.stats.bind=function(n){if("function"==typeof n)return void i.all.push(n);if(t(n))for(var d=0;d<n.length;d++)amp.stats.bind(n[d]);else"object"==typeof n&&n.cb&&(n.type&&n.event?e(n.type+"."+n.event,n.cb):n.type?e(n.type,n.cb):n.event&&e(n.event,n.cb))};var e=function(e,t){i[e]?i[e].push(t):i[e]=[t]};amp.stats.event=function(e,t,n,d){var o=[];o=o.concat(i.all,i[t]?i[t]:[],i[n]?i[n]:[],i[t+"."+n]?i[t+"."+n]:[]);for(var a=0;a<o.length;a++)o[a](e,t,n,d)}}()}(),function(i){i.widget("amp.ampStack",{options:{delay:3e3,autoplay:!1,loop:!0,fade:!1,start:1,responsive:!0,center:!1,parentSize:!1,gesture:{enabled:!1,fingers:1,dir:"horz",distance:50},states:{selected:"amp-selected",seen:"amp-seen"}},_getCreateOptions:function(){var e=this.element.data().ampStack;return e?i.extend(!0,{},this.options,e):this.options},_create:function(){var e=this,t=this._children=this.element.children();this.canTouch=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),this.element.addClass("amp"),this.element.addClass("amp-stack"),this.count=this._children.length,this._index=Math.max(1,Math.min(this.options.start,this.count)),t.addClass("amp-layer"),t.css({display:"none"}),t.eq(this._index-1).css("display","block"),t.eq(this._index-1).addClass(this.options.states.selected+" "+this.options.states.seen),this._addGestures(),this.options.autoplay&&this.play(),setTimeout(function(i){return function(){return i._calcSize()}}(e),1),i(window).bind("resize",function(e){return function(){return setTimeout(i.proxy(e._calcSize,e),1)}}(e)),this._track("created",{index:this._index,canNext:this.canNext(),canPrev:this.canPrev()})},_addGestures:function(){if(this.options.gesture.enabled&&this.canTouch){this._startG=function(e){if(e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches[0]&&e.originalEvent.touches.length!=this.options.gesture.fingers)return!0;if(e.originalEvent&&e.originalEvent.target&&"range"===e.originalEvent.target.type)return!0;this.changed=!1,this.moved=!1,this.startTouchEvent=e;var e=this._getEvent(e);return this.startPos="horz"==this.options.gesture.dir?e.pageX-e.target.offsetLeft:e.pageY-e.target.offsetTop,i(window).on("touchmove",i.proxy(this._moveG,this)),i(window).on("touchcancel",i.proxy(this._stopG,this)),i(window).on("touchend",i.proxy(this._stopG,this)),!0},this._getEvent=function(i){return("touchend"==i.type||"touchcancel"==i.type)&&(i=this.lastEvent),i.originalEvent&&i.originalEvent.touches&&i.originalEvent.touches[0]&&(i=i.originalEvent.touches[0]),i},this._moveG=function(i){return i.originalEvent&&i.originalEvent.touches&&i.originalEvent.touches[0]&&i.originalEvent.touches.length!=this.options.gesture.fingers?!0:i.originalEvent&&i.originalEvent.target&&"range"===i.originalEvent.target.type?!0:(this.moved=!0,this.lastEvent=i,i=this._getEvent(i),("horz"==this.options.gesture.dir?i.pageX-this.startPos:i.pageY-this.startPos!=0)?!1:!0)},this._stopG=function(e){if(i(window).off("touchmove",i.proxy(this._moveG,this)),i(window).off("touchcancel",i.proxy(this._stopG,this)),i(window).off("touchend",i.proxy(this._stopG,this)),this.moved&&!this.changed){this.changed=!0,e=this._getEvent(e);var t="horz"==this.options.gesture.dir?e.pageX-e.target.offsetLeft:e.pageY-e.target.offsetTop,n=t-this.startPos;if(Math.abs(n)<this.options.gesture.distance)return;n>0?this.prev():this.next()}},this._children.on("touchstart",i.proxy(this._startG,this))}},_getIndex:function(i){var e=this._children;if(i>e.length){if(!this.options.loop)return i;for(;i>e.length;)i-=e.length}else if(1>i){if(!this.options.loop)return i;for(;1>i;)i+=e.length}return i},play:function(){var i=this;clearInterval(this.interval),this.interval=setInterval(function(){i.next()},this.options.delay),this._track("play",null)},pause:function(){clearInterval(this.interval),this._track("pause",null)},next:function(){this.goTo(this._index+1)},prev:function(){this.goTo(this._index-1)},redraw:function(){this._calcSize()},_calcSize:function(){var i,e;if(this.options.responsive&&this.options.width&&this.options.height&&"auto"!=this.options.width&&"auto"!=this.options.height)this.options.parentSize?(i=Math.round(this.element.parent().width()),e=Math.round(i*(this.options.height/this.options.width)),e>this.element.parent().height()&&(e=this.element.parent().height(),i=Math.round(e*(this.options.width/this.options.height))),this.element.width(i),this.element.height(e)):(i=Math.round(this.element.width()),e=Math.round(i*(this.options.height/this.options.width)),this.element.height(e)),this.options.center&&(this.element.css("margin-left",this.element.parent().width()/2-i/2+"px"),this.element.css("margin-top",this.element.parent().height()/2-e/2+"px"));else{if(this.options.width&&"auto"!=this.options.width)this.element.width(this.options.width);else if("auto"==this.options.width){for(var t=0,n=0;n<this.count;n++)for(var n=0;n<this.count;n++){var d=this._children.eq(n),o=d.css("display");d.css("display","block"),t=Math.max(d.outerWidth(!0),t),d.css("display",o)}this.element.width(t)}if(this.options.height&&"auto"!=this.options.height)this.element.height(this.options.height);else if("auto"==this.options.height){for(var t=0,n=0;n<this.count;n++)for(var n=0;n<this.count;n++){var d=this._children.eq(n),o=d.css("display");d.css("display","block");var e=d.outerHeight(!0);t=Math.max(d.outerHeight(!0),t),d.css("display",o)}this.element.height(t)}}},_onFinish:function(){for(var i=1,e=this;0!=this._asyncMethods.length;){var t=this._asyncMethods.splice(0,1)[0];t.func&&t.args&&(setTimeout(function(){t&&t.func&&t.func.apply(e,t.args)},i),i++)}},visible:function(i,e){i!=this._visible&&(this._track("visible",{visible:i}),this._visible=i,this.callChildMethod(this._children.eq(this._index-1),"visible",i),i&&this._calcSize())},callChildMethod:function(e,t,n){var d=function(e){for(var o=0;o<e.length;o++){var a=!1,r=i(e[o]),s=r.data();for(var h in s)if(s.hasOwnProperty(h)){var u=s[h];u[t]&&"function"==typeof u[t]&&"amp"==h.substring(0,3)&&(u[t](n),a=!0)}a||d(r.children())}};d(e.children())},goTo:function(i,e,t){if(i=parseInt(i),!isNaN(i)){if(this._animating)return void this._asyncMethods.push({func:this.goTo,args:arguments});if(e||this._exeBinds(i,"goTo"),this._getIndex(i)!=this._index){if(i>this.count){if(!this.options.loop)return;for(;i>this.count;)i-=this.count;this._track("looped","forwards")}else if(1>i){if(!this.options.loop)return;for(;1>i;)i+=this.count;this._track("looped","backwards")}t||this._animate(i)}}},_exeBinds:function(e,t){if(this._boundArray)for(var n=0;n<this._boundArray.length;n++){var d=this._boundArray[n];if(!t||t==d.on){var o=i(d.selector),a=o.data();for(var r in a)if(a.hasOwnProperty(r)){var s=a[r];s[d.action]&&"amp"==r.substring(0,3)&&s[d.action](e,!0)}}}},_numToIndex:function(i){if(i>this.count){if(!this.options.loop)return this.count;for(;i>this.count;)i-=this.count}else if(1>i){if(!this.options.loop)return 1;for(;1>i;)i+=this.count}return i},bind:function(i){this._boundArray||(this._boundArray=[]),this._boundArray.push(i)},canPrev:function(){return this.options.loop||this._index>1},canNext:function(){return this.options.loop||this._index<this.count},_animate:function(i){var e=this.element,t=e.children("li").eq(this._index-1),n=e.children("li").eq(i-1);t.removeClass(this.options.states.selected),this.options.fade?t.fadeOut():t.css("display","none"),n.addClass(this.options.states.selected+" "+this.options.states.seen),this.options.fade?n.fadeIn():n.css("display","block"),this._setIndex(i)},_setIndex:function(i,e){if(!e){var t=this._children.eq(this._index-1),n=this._children.eq(i-1);this.callChildMethod(n,"visible",!0),this.callChildMethod(t,"visible",!1);
}this._index=i,this._track("change",{index:i,canPrev:this.canPrev(),canNext:this.canNext()})},_track:function(i,e){this._trigger(i,null,e),window.amp&&amp.stats&&amp.stats.event&&amp.stats.event(this.element,"stack",i,e)},_destroy:function(){this.element.removeClass("amp"),this.element.removeClass("amp-stack"),this._removeEmptyAttributeHelper(this.element);var e=this._children;e.removeClass("amp-layer"),e.removeClass(this.options.states.selected),e.removeClass(this.options.states.seen),e.css("display","");for(var t=0,n=e.length;n>t;t++)this._removeEmptyAttributeHelper(i(e[t]))},_removeEmptyAttributeHelper:function(i,e){for(var t=e||["class","style"],n=0,d=t.length;d>n;n++)i.attr(t[n])&&i.prop(t[n])||i.removeAttr(t[n])}})}(jQuery),function(i){i.widget("amp.ampCarousel",i.amp.ampStack,{options:{animDuration:250,easing:"",dir:"horz",animate:!0,layout:"standard",start:1,preferForward:!1,no3D:!1,thumbWidthExceed:0,gesture:{enabled:!1,fingers:2,distance:50},onActivate:{select:!0,goTo:!0},preloadNext:!0,responsive:!0,states:{visible:"amp-visible",partiallyVisible:"amp-partially-visible"}},_getCreateOptions:function(){var e=this.element.data().ampCarousel;return e?i.extend(!0,{},this.options,e):this.options},_layoutManagers:{},_create:function(){this._elms=[],this._visible=0,this._asyncMethods=[],this._canNext=!0;var e=this;if(this.options.delay=Math.max(this.options.delay,this.options.animDuration+1),this.options.animDuration=this.options.animate?this.options.animDuration:1,this.canTouch=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),this.element.addClass("amp"),this.element.addClass("amp-carousel"),this.element.wrapInner("<div class='amp-anim-container' style='width:100%;height:100%;position:absolute'></div>"),this._container=this.element.children().eq(0),this._containerPos=0,this._children=this.element.children().eq(0).children(),this.count=this._children.length,this._checkCSS3(),this._index=Math.max(1,Math.min(this.options.start,this.count)),this._selectedIndex=this._index,this._children.addClass("amp-slide"),this._calcSize(),this._chooseLayoutManager(),this._children.eq(this._index-1).addClass(this.options.states.selected),this.options.onActivate.goTo||this.options.onActivate.select)for(var t=0;t<this.count;t++){var n=function(){e.moved=!1,setTimeout(function(){i(window).on(this.canTouch?"touchmove":"mousemove",i.proxy(d,e))},1)},d=function(){e.moved=!0},o=function(t){var n=e;return function(o){return i(window).off(this.canTouch?"touchmove":"mousemove",i.proxy(d,e)),n.moved?!0:(n.options.onActivate.goTo&&n.goTo(t),n.options.onActivate.select&&n.select(t),!0)}}(t+1);this._children.eq(t).on(this.canTouch?"touchstart":"mousedown",i.proxy(n,e)),this._children.eq(t).on(this.canTouch?"touchend":"mouseup",i.proxy(o,e))}this._calcSize(),setTimeout(i.proxy(this._calcSize,this),1),this.options.responsive&&i(window).bind("resize",function(e){return function(){return setTimeout(i.proxy(e.redraw,e),1)}}(e)),this.options.autoplay&&this.play(),this._preloadNext(),this._track("created",{index:this._index,canNext:this.canNext(),canPrev:this.canPrev(),visible:this._visible,count:this.count})},_chooseLayoutManager:function(){var i,e;if("[object Array]"===Object.prototype.toString.call(this.options.layout)){for(var t=0;t<this.options.layout.length;t++)if(e=this._layoutManagers[this.options.layout[t]],this.checkFeatures(e)){i=e;break}}else e=this._layoutManagers[this.options.layout],this.checkFeatures(e)&&(i=e);i||(i=this._layoutManagers.standard),this._layoutManager=i.create(this)},_calcSize:function(){this._super(),this._layoutManager&&this._layoutManager.layout(this._index),this._track("resized",{index:this._index,canNext:this.canNext(),canPrev:this.canPrev(),visible:this._visible,count:this.count})},_firstCharLowerCase:function(i){return i.substr(0,1).toLowerCase()+i.substr(1)},_dashConvert:function(i){for(var e="",t=0;t<i.length;t++){var n=i.substr(t,1);e+=n===n.toUpperCase()?"-"+n.toLowerCase():n}return e},_checkCSS3:function(){var i=["","Webkit","Moz","O","ms","Khtml"],e=[{name:"transform",dom:"Transform"},{name:"transition",dom:"Transition"},{name:"transitionDuration",dom:"TransitionDuration"},{name:"transitionTimingFunction",dom:"TransitionTimingFunction"},{name:"anim",dom:"AnimationName"}],t=this.element[0],n=document.createElement("p");this._canCSS3={},document.body.insertBefore(n,null);for(var d=0;d<i.length;d++)for(var o=i[d],a=0;a<e.length;a++){var r=e[a];this._canCSS3[r.name]||(void 0!==t.style[o+r.dom]&&(this._canCSS3[r.name]=o+r.dom),void 0!==t.style[o+this._firstCharLowerCase(r.dom)]&&(this._canCSS3[r.name]=o+this._firstCharLowerCase(r.dom)))}if(this._canCSS3.transform&&!this.options.no3D&&void 0!==n.style[this._canCSS3.transform]){n.style[this._canCSS3.transform]="translate3d(1px,1px,1px)";var s=window.getComputedStyle(n).getPropertyValue(this._dashConvert(this._canCSS3.transform));this._canCSS3.can3D=null!=s&&""!=s}document.body.removeChild(n)},_direction:function(i){if(!this.options.loop)return i>this._index;var e=0,t=0;this._index=Math.min(this._index,this.count);for(var n=this._index;n!=i;)n>this.count?n=1:(n++,e++);for(n=this._index;n!=i;)1>n?n=this.count:(n--,t++);return this.options.preferForward&&e>1&&t>1?!0:t>=e},_loopIndex:function(i,e,t){for(var n=i?1:-1,d=e,o=0;t>o;o++)d+n>this.count?d=1:1>d+n?d=this.count:d+=n;return d},_loopCount:function(i,e,t){t=Math.min(t,this.count);for(var n=i?1:-1,d=e,o=0;d!=t;)o++,d+n>this.count?d=1:1>d+n?d=this.count:d+=n;return o},_resetPos:function(i){this._canCSS3.transform&&this._canCSS3.transition?i.css(this._canCSS3.transform,""):"horz"==this.options.dir?i.css("left",""):i.css("top","")},_removeStates:function(){this._children.removeClass(this.options.states.visible),this._children.removeClass(this.options.states.partiallyVisible)},_setState:function(i,e){switch(e){case"visible":i.addClass(this.options.states.visible),i.addClass(this.options.states.seen),this.callChildMethod(i,"visible",!0);break;case"invisible":i.removeClass(this.options.states.visible),this.callChildMethod(i,"visible",!1);break;case"partial":i.addClass(this.options.states.partiallyVisible),this.callChildMethod(i,"visible",!1)}},_posElm:function(i,e,t,n){this._elms[t]||(this._elms[t]=0);var d=n?this._elms[t]+e:e;this._canCSS3.transform&&this._canCSS3.transition?this._canCSS3.can3D?"horz"==this.options.dir?i.css(this._canCSS3.transform,"translate3d("+d+"px,0,0)"):i.css(this._canCSS3.transform,"translate3d(0,"+d+"px,0)"):"horz"==this.options.dir?i.css(this._canCSS3.transform,"translate("+d+"px,0)"):i.css(this._canCSS3.transform,"translate(0,"+d+"px)"):"horz"==this.options.dir?i.css("left",d+"px"):i.css("top",d+"px"),this._elms[t]=d},_preloadNext:function(){if(this.options.preloadNext){var i=this._visible+(this._index-1),e=this._loopIndex(!0,i,1),t=this._children.eq(e-1);this.callChildMethod(t,"preload",!0)}},_measureElements:function(i,e,t){for(var n=0,d=("horz"==this.options.dir,0);t>d;d++){var o=i?e+d:e-d;o>this.count&&(o=1),1>o&&(o=this.count),n+=this._measureElement(o-1)}return i?0-n:n},_moveElements:function(i,e,t){var n=this._container,d=this;if(this._containerPos==i)return d._canCSS3.transform&&d._canCSS3.transitionDuration&&(n.css(d._canCSS3.transitionTimingFunction,""),n.css(d._canCSS3.transitionDuration,"")),void(e&&e());if(this._containerPos=i,!t){if(d._canCSS3.transform&&d._canCSS3.transitionDuration){var o=d._canCSS3.can3D?"horz"==d.options.dir?"translate3d("+i+"px,0,0)":"translate3d(0, "+i+"px,0)":"horz"==d.options.dir?"translateX("+i+"px)":"translateY("+i+"px";n.css(d._canCSS3.transform,o)}else"horz"==d.options.dir?n.css("left",i+"px"):n.css("top",i+"px");return void(e&&e())}if(d._canCSS3.transform&&d._canCSS3.transitionDuration){var o=d._canCSS3.can3D?"horz"==d.options.dir?"translate3d("+i+"px,0,0)":"translate3d(0, "+i+"px,0)":"horz"==d.options.dir?"translateX("+i+"px)":"translateY("+i+"px";n.css(d._canCSS3.transform,o),n.css(d._canCSS3.transitionTimingFunction,d.options.easing),n.css(d._canCSS3.transitionDuration,d.options.animDuration+"ms"),n.off().on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(){n.css(d._canCSS3.transitionTimingFunction,""),n.css(d._canCSS3.transitionDuration,""),e&&e()})}else{var a={};"horz"==d.options.dir?a.left=i+"px":a.top=i+"px",n.animate(a,d.options.animDuration,"swing",e)}},_measureElement:function(i){var e,t="horz"==this.options.dir,n=this._children.eq(i);return n.css("display","block"),e=t?n.outerWidth(!0):n.outerHeight(!0),n.css("display",""),e},_elmSize:function(){return"horz"==this.options.dir?this.element.width():this.element.height()},_animate:function(i){var e=this;this._animating=!0,this._layoutManager.focus(i,!0,function(){e._setIndex(i)})},_setIndex:function(i){this._index=i,this._track("change",{index:this._index,canNext:this.canNext(),canPrev:this.canPrev(),visible:this._visible,count:this.count}),this._animating=!1,this._preloadNext(),this._onFinish()},_track:function(i,e){this._trigger(i,null,e),window.amp&&amp.stats&&amp.stats.event&&amp.stats.event(this.element,"carousel",i,e)},_destroy:function(){this.element.removeClass("amp"),this.element.removeClass("amp-carousel"),this._removeEmptyAttributeHelper(this.element);var i=this._children;i.removeClass("amp-slide"),i.removeClass(this.options.states.visible),i.removeClass(this.options.states.partiallyVisible),i.removeClass(this.options.states.selected),i.removeClass(this.options.states.seen);for(var e=0;e<i.length;e++){var t=i.eq(e);this._resetPos(t,0),this._removeEmptyAttributeHelper(t)}this._container.replaceWith(i)},checkFeatures:function(i){if(i){if(i.requiredFeatures){for(var e=!0,t=0;t<i.requiredFeatures.length;t++){var n=i.requiredFeatures[t];this._canCSS3[n]||(e=!1)}return e}return!0}return!1},canNext:function(){return this.options.loop||this._canNext&&this._index<this.count},redraw:function(){return this._animating?void this._asyncMethods.push({func:self._calcSize,args:arguments}):this._calcSize()},select:function(i,e){var t=this._numToIndex(i),n=this._children.eq(this._selectedIndex-1),d=this._children.eq(t-1);n.removeClass(this.options.states.selected),d.addClass(this.options.states.selected+" "+this.options.states.seen),this._selectedIndex=t,d.hasClass(this.options.states.visible)||this.goTo(t,e),e||this._exeBinds(t,"select"),this._preloadNext(),this._track("selected",{index:t})}}),function(){var e=function(e,t){function n(){this.name="standard",this.options=t,this.duplicated=[]}var d=n.prototype;d.init=function(){e.canTouch&&e.options.gesture.enabled&&e._children.on("touchstart",i.proxy(this.start,this))},d.start=function(t){if(!this.animating){if(t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches[0]&&t.originalEvent.touches.length!=e.options.gesture.fingers)return!0;this.duplicationOffsets={},this.duplicationOffsets.left=0,this.duplicationOffsets.leftSize=0,this.duplicationOffsets.right=0,this.duplicationOffsets.rightSize=0,this.changed=!1,this.startPos=e._containerPos,this.moved=!1,this.startTouchEvent=t;var t=this.getEvent(t);return this.xo=t.pageX-e._containerPos,this.yo=t.pageY-e._containerPos,this.xo2=t.pageX,this.yo2=t.pageY,i(window).on("touchmove",i.proxy(this.move,this)),i(window).on("touchcancel",i.proxy(this.stop,this)),i(window).on("touchend",i.proxy(this.stop,this)),!0}},d.move=function(i){if(i.originalEvent&&i.originalEvent.touches&&i.originalEvent.touches[0]&&i.originalEvent.touches.length!=e.options.gesture.fingers)return!0;this.moved=!0,this.lastEvent=i,i=this.getEvent(i);var t=i.pageX-this.xo,n=i.pageY-this.yo,d=i.pageX-this.xo2,o=i.pageY-this.yo2;if(this.moveDir||(Math.abs(d)<Math.abs(o)?this.moveDir="vert":Math.abs(d)>Math.abs(o)?this.moveDir="horz":this.moveDir=e.options.dir),e.options.dir!=this.moveDir)return!0;var a="horz"==e.options.dir?t:n;return e._moveElements(a,null,!1),e.options.loop&&this.checkDuplicate(a),e.options.dir==this.moveDir?!1:void 0},d.checkDuplicate=function(i){i-this.metrics[this.lastOne-1].size<0-(this.allSize-e._elmSize())&&this.duplicateSlide(!0),0-i-this.metrics[0].size<=0-this.duplicationOffsets.leftSize&&this.duplicateSlide(!1)},d.duplicateSlide=function(i){if(i){var t=e._numToIndex(e._index-1+e.count+this.duplicationOffsets.right+1)-1,n=e._children.eq(t),d=n.clone();e._container.append(d);var o="horz"==e.options.dir?d.width():d.height(),a=this.allSize;e._posElm(d,a,this.count+this.duplicated.length),this.duplicated.push(d),this.duplicationOffsets.right++,this.duplicationOffsets.rightSize+=o,this.lastOne=t+1,this.allSize+=o}else{var t=e._numToIndex(e._index-1-this.duplicationOffsets.left)-1,n=e._children.eq(t),d=n.clone();e._container.append(d);var o="horz"==e.options.dir?d.width():d.height(),a=0-this.duplicationOffsets.leftSize-o;e._posElm(d,a,this.count+this.duplicated.length),this.duplicated.push(d),this.duplicationOffsets.left++,this.duplicationOffsets.leftSize+=o}},d.stop=function(t){if(i(window).off("touchmove",i.proxy(this.move,this)),i(window).off("touchcancel",i.proxy(this.stop,this)),i(window).off("touchend",i.proxy(this.stop,this)),this.moveDir=null,this.moved&&!this.changed){var n=this.findNearest(),d=n.index+1;if(d==e._index){var o=this.startPos-e._containerPos;return Math.abs(o)>=e.options.gesture.distance?o>0?e.canNext()?e.next():e._moveElements(this.startPos,null,!0):e.canPrev()?e.prev():e._moveElements(this.startPos,null,!0):e._moveElements(this.startPos,null,!0),this.changed=!0,void(e.options.loop&&(e._containerPos=0))}e.options.loop?(this.animating=!0,e._moveElements(n.pos,i.proxy(function(){this.allSize=this.oAllSize,this.focus(d,!1),e._containerPos=0,e._setIndex(d),e.goTo(d,null,!0),this.changed=!0,this.animating=!1},this),!0)):(this.changed=!0,e.goTo(d))}},d.getEvent=function(i){return("touchend"==i.type||"touchcancel"==i.type)&&(i=this.startTouchEvent),i.originalEvent&&i.originalEvent.touches&&i.originalEvent.touches[0]&&(i=i.originalEvent.touches[0]),i},d.findNearest=function(){var i=0,t=e._containerPos,n=this.oAllSize,d=0;if(e.options.loop){for(;t<0-this.oAllSize;)t+=this.oAllSize,d--;for(;t>0;)t-=this.oAllSize,d++}for(var o=0;o<this.metrics.length;o++){var a=Math.abs(t+this.metrics[o].pos);n>a&&(n=a,i=o)}var r=e._numToIndex(e._index+e.count-1)-1,a=Math.abs(t+(this.metrics[r].pos+this.metrics[r].size));n>a&&(n=a,i=e._index-1,t+=this.oAllSize);var s=t>=0?this.metrics[i].pos+this.oAllSize*(d-1):0-this.metrics[i].pos+this.oAllSize*d;return{index:i,pos:s}},d.layout=function(i){e.options.loop?(this.arrange(i),this.focusLoop(i,!1)):(this.arrange(1),this.focusNoLoop(i,!1))},d.focus=function(i,t,n){e.options.loop?this.focusLoop(i,t,n):(this.focusNoLoop(i,t),n&&n())},d.focusNoLoop=function(i,t){var n=0-this.metrics[i-1].pos,d=0-(this.allSize-e._elmSize());n=Math.min(Math.max(d,n),0),this.setVisibleStates(i,n),e._moveElements(n,null,t)},d.setVisibleStates=function(i,t){var t=Math.abs(t);e._removeStates();for(var n=0,d=0;d<this.metrics.length;d++){var o=this.metrics[d].pos,a=e._children.eq(d),r=this.metrics[d].size,s=2*parseFloat(e._children.eq(d).css("margin-right"));o>=t&&o+r-e.options.thumbWidthExceed-s-t<=e._elmSize()?(e._setState(a,"visible"),n++):o+r-s>t&&o+r-s-t<e._elmSize()||o>t&&o-t<e._elmSize()?e._setState(a,"partial"):e._setState(a,"invisible")}e._visible=n},d.focusLoop=function(i,t,n){var d=this,o=e._direction(i),a=o?0-this.metrics[i-1].pos:this.allSize-this.metrics[i-1].pos;e._loopCount(o,e._index,i);this.duplicate(o),this.setVisibleStates(i,a),e._moveElements(a,function(){for(e._container[0].style[e._canCSS3.transform]="","horz"===e.options.dir?e._container[0].style.left="":e._container[0].style.top="",d.arrange(i);d.duplicated.length>0;){var t=d.duplicated.splice(0,1);t[0].remove(),delete t[0]}n&&n()},t)},d.duplicate=function(i){for(var t=0;t<e.count;t++){var n=e._children.eq(t),d=n.clone();e._container.append(d);var o=i?this.metrics[t].pos+this.allSize:this.metrics[t].pos-this.allSize;e._posElm(d,o,this.count+this.duplicated.length),this.duplicated.push(d)}},d.arrange=function(i){var t=0,n=[],d=[];e._removeStates();for(var o=0;o<e.count;o++){var a=o;if(void 0!==i)for(a+=i-1;a>=e.count;)a-=e.count;var r=e._children.eq(a),s=e._measureElement(a);s+t<=e._elmSize()?e._setState(r,"visible"):t<e._elmSize()?e._setState(r,"partial"):e._setState(r,"invisible"),n[a]={},n[a].size=s,n[a].pos=t,e._posElm(r,t,a),d[a]=s,t+=s}return e.options.loop&&(e._containerPos=0),this.lastOne=i,delete this.metrics,this.metrics=n,this.allSize=t,this.oAllSize=t,{allSize:t,metrics:n}};var o=new n;return o.init(),o};i.amp.ampCarousel.prototype._layoutManagers.standard={requiredFeatures:null,create:e}}(),function(){var e=function(e,t){function n(){this.name="carousel3D",this.options=t,this.styles=[],this.angles=[]}var d=e._canCSS3.transform,o=n.prototype;o.init=function(){var t=this;this.element=e._container[0],this.rotation=0,this.panelCount=e.count,this.totalPanelCount=this.element.children.length,this.theta=0,this.isHorizontal="horz"==e.options.dir,e._container.css("perspective","1000px"),this.modify(),setTimeout(function(){t.animation(!0)},10),e.canTouch&&e.options.gesture.enabled&&e._children.on("touchstart",i.proxy(this.start,this))},o.animation=function(i){i?(e._children.css("transitionTimingFunction",e.options.easing),e._children.css("transitionDuration",e.options.animDuration+"ms")):(e._children.css("transitionTimingFunction",""),e._children.css("transitionDuration",""))},o.start=function(t){if(t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches[0]&&t.originalEvent.touches.length!=e.options.gesture.fingers)return!0;var t=this.getEvent(t);this.xo=t.pageX-t.target.offsetLeft,this.yo=t.pageY-t.target.offsetTop,this.changed=!1,this.moved=!1,this.animation(!1),this.startPos=this.rotation,i(window).on("touchmove",i.proxy(this.move,this)),i(window).on("touchcancel",i.proxy(this.stop,this)),i(window).on("touchend",i.proxy(this.stop,this))},o.move=function(i){if(i.originalEvent&&i.originalEvent.touches&&i.originalEvent.touches[0]&&i.originalEvent.touches.length!=e.options.gesture.fingers)return!0;this.lastEvent=i,this.moved=!0,i=this.getEvent(i);var t=i.pageX-this.xo,n=this.yo-i.pageY,d="horz"==e.options.dir?t:n;return d=d>0?Math.min(this.theta/2,d/10):Math.max(0-this.theta/2,d/10),this.rotation=this.startPos+d,this.transform(),!1},o.getEvent=function(i){return("touchend"==i.type||"touchcancel"==i.type)&&(i=this.lastEvent),i.originalEvent&&i.originalEvent.touches&&i.originalEvent.touches[0]&&(i=i.originalEvent.touches[0]),i},o.stop=function(t){if(i(window).off("touchmove",i.proxy(this.move,this)),i(window).off("touchcancel",i.proxy(this.stop,this)),i(window).off("touchend",i.proxy(this.stop,this)),this.animation(!0),this.moved&&!this.changed){t=this.getEvent(t);var n=t.pageX-this.xo,d=this.yo-t.pageY,o="horz"==e.options.dir?n:d;if(this.rotation=this.startPos,Math.abs(o)>=e.options.gesture.distance)if(0>o){if(e.canNext())return void e.next()}else if(e.canPrev())return void e.prev();this.transform(),this.changed=!0}},o.modify=function(){var i,t,n;for(this.xOffset=e._container.width()/2-e._children.eq(0).width()/2,this.yOffset=e._container.height()/2-e._children.eq(0).height()/2,this.panelSize=this.isHorizontal?e._children.eq(0).width():e._children.eq(0).height(),this.rotateFn=this.isHorizontal?"rotateY":"rotateX",this.theta=360/this.panelCount,this.radius=Math.round(this.panelSize/2/Math.tan(Math.PI/this.panelCount)),delete this.styles,delete this.angles,this.styles=[],this.angles=[],n=0;n<this.panelCount;n++)i=this.element.children[n],i&&(t=this.theta*n,this.angles[n]=t,this.styles[n]=this.rotateFn+"("+t+"deg) translateZ("+this.radius+"px)",i.style[d]=this.styles[n],"horz"==e.options.dir?i.style.left=this.xOffset+"px":i.style.top=this.yOffset+"px");for(;n<this.totalPanelCount;n++)i=this.element.children[n],i&&(i.style.opacity=0,i.style[d]="none");this.rotation=Math.round(this.rotation/this.theta)*this.theta,this.transform()},o.transform=function(){for(var i=0;i<this.panelCount;i++)if(this.element.children[i]){for(var e=this.angles[i]+this.rotation;e>360;)e-=360;for(;0>e;)e+=360;var t;t=180>=e?180-e:e-180,this.element.children[i].style.zIndex=t,this.element.children[i].style[d]="translateZ(-"+this.radius+"px) "+this.rotateFn+"("+this.rotation+"deg)"+this.styles[i]}},o.focus=function(i,t,n){var d=e._direction(i),o=e._loopCount(d,e._index,i),a=e._children.eq(i-1),r=e._children.eq(e._index-1);e._setState(a,"visible"),e._setState(r,"invisible"),d?this.rotation-=this.theta*o:this.rotation+=this.theta*o,this.transform(),n&&n()},o.layout=function(i){this.modify(),this.focus(i)};var a=new n;return a.init(),a};i.amp.ampCarousel.prototype._layoutManagers.carousel3D={requiredFeatures:["can3D","transform"],create:e}}()}(jQuery),function(i){i.widget("amp.ampImage",{options:{errImg:null,preload:"visible",insertAfter:!1},_loadedHistory:[],_getCreateOptions:function(){var e=this.element.data().ampImage;return e?i.extend(!0,{},this.options,e):this.options},_create:function(){this.element.addClass("amp"),this.element.addClass("amp-image");var e=this;this.element.bind("load",function(i){e._loaded()}),this.element.bind("error",function(){e._failLoad()}),-1==i.inArray(this.options.preload,["created","visible","none"])&&(this.options.preload="visible"),"created"==this.options.preload&&this.newLoad(),this._track("created")},dimensionsParams:function(e){var t=this,n=t.element.data("amp-dimensions"),d=e;if(!n)return d;var o=-1===d.indexOf("?")?"?":"&",a="";return i.each(n[0],function(e,n){var r=new RegExp(o+e+"=[0-9]*","g"),s=d.match(r);s&&s.length>0&&i.each(s,function(i,e){d=d.replace(e,"")});var h="window"===n.domName?i(window):t.element.closest(n.domName);a+=o+e+"="+parseFloat(h[n.domProp](),10),o="&"}),d+=a},newLoad:function(){var e=this.element.attr("src")&&""!=this.element.attr("src")?this.element.attr("src"):this.element.attr("data-amp-src");return e=this.dimensionsParams(e),-1!==i.inArray(e,this._loadedHistory)?(this.loading&&this.loading.remove(),this.element.attr("src",e),void this.element.show()):(this.loading||(this.loading=i('<div class="amp-loading"></div>')),this.element.hide(),this.options.insertAfter?this.options.insertAfter.prepend(this.loading):this.element.parent().append(this.loading),this.element.attr("src",""),void this.element.attr("src",e))},visible:function(i){i&&i!=this._visible&&"visible"==this.options.preload&&this.newLoad(),this._visible=i},load:function(i){this.loaded||this.loading||this.newLoad()},preload:function(){this.element.parent().hasClass("amp-spin")||this.newLoad()},loaded:!1,_loaded:function(){this._loadedHistory.push(this.element.attr("src")),this._track("loaded",!0),this.loaded=!0,this.loading&&this.loading.remove(),this.element.show()},_failLoad:function(){this.options.errImg?this.element.attr("src",this.options.errImg):window.amp&&amp.conf&&amp.conf.err_img&&this.element.attr("src",amp.conf.err_img)},_track:function(i,e){this._trigger(i,null,e),window.amp&&amp.stats&&amp.stats.event&&amp.stats.event(this.element,"image",i,e)},_destroy:function(){this.element.removeClass("amp"),this.element.removeClass("amp-image"),this.loading&&this.loading.remove(),this.element.css("display",""),this._removeEmptyAttributeHelper(this.element)},_removeEmptyAttributeHelper:function(i,e){for(var t=e||["class","style"],n=0,d=t.length;d>n;n++)i.attr(t[n])&&i.prop(t[n])||i.removeAttr(t[n])}})}(jQuery),function(i){i.widget("amp.ampBuild",{options:{},_create:function(){for(var e in i.amp)i.amp.hasOwnProperty(e)&&this.element.find("[data-"+e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()+"]")[e]();this._track("created")},_track:function(i,e){this._trigger(i,null,e),window.amp&&amp.stats&&amp.stats.event&&amp.stats.event(this.element,"build",i,e)}})}(jQuery),function(i){i.widget("amp.ampNav",{options:{},_getCreateOptions:function(){var e=this.element.data().ampNav;return e?i.extend(!0,{},this.options,e):this.options},_create:function(){var i=this.element.data();for(var e in i)if(i.hasOwnProperty(e)){var t=i[e];t.bind&&"amp"==e.substring(0,3)&&t.bind(this.options)}this._track("created")},_track:function(i,e){window.amp&&amp.stats&&amp.stats.event&&amp.stats.event(this.element,"navigation",i,e)}})}(jQuery),function(i){var e={top:0,left:0,opacity:0,width:"",height:""};i.widget("amp.ampZoom",{options:{zoom:3,url:"",activate:{touch:"up",mouse:"up"},pan:!1,map:!1,target:{},lens:!0,fade:!0,preload:{image:"created",zoomed:"none"},responsive:!0,cursor:{active:"auto",inactive:"auto"},transforms:"",states:{active:"amp-active",inactive:"amp-inactive"},width:"auto",height:"auto",create:function(){},created:function(){},zoomedIn:function(){},zoomedOut:function(){},move:function(){},startMove:function(){},stopMove:function(){},startPreload:function(){},preloaded:function(){},visible:function(){}},_zoomLoaded:!1,_getCreateOptions:function(){this.validTypes=this._createValidTypes(this.options);var e=this.element.data().ampZoom;return e?i.extend(!0,{},this.options,e):this.options},_createValidTypes:function(i){var e={};for(var t in i)if(i.hasOwnProperty(t)){var n,d=i[t];n="width"==t||"height"==t?"number":typeof d,e[t]="object"==typeof d?this._createValidTypes(d):{type:n,defaultValue:d}}return e},_checkValidTypes:function(i,e){return i},_create:function(){this.options=this._checkValidTypes(this.options,this.validTypes),i.isArray(this.options.zoom)&&(this._cycle={current:-1,len:this.options.zoom.length});var t=["created","visible","none"];-1==i.inArray(this.options.preload.image,t)&&(this.options.preload.image="created"),-1==i.inArray(this.options.preload.zoomed,t)&&(this.options.preload.zoomed="none"),this.element.addClass("amp amp-zoom"),this.element.wrap('<div class="amp-zoom-container"></div>'),this.parent=this.element.parent(),this.parent.prepend(this.loading),this.element.wrap('<div class="amp-zoom-overflow"></div>'),this.overflow=this.element.parent(),this.wrapper=i('<div class="amp-zoom-wrapper"></div>'),this.imgs=[];var n=0;do{var d=i('<img class="amp-zoom-img">');d.css(e),this.wrapper.append(d),this.imgs.push(d),n++}while(n<(this._cycle&&this._cycle.len));if(this.options.responsive&&this.element.css({height:"auto",width:"100%",maxWidth:"100%"}),this.options.target){this.mark=this.options.map?{name:"map",inner:"inner"}:{name:"box",inner:"wrapper"};try{this[this.mark.name]=i("body").find(this.options.target)}catch(o){this[this.mark.name]=!1}this[this.mark.name]&&this[this.mark.name].length>0?(this.options.lens&&(this.lens=i('<div class="amp-zoom-lens"></div>'),"map"==this.mark.name?(this[this.mark.name].addClass("amp-zoom-map"),this[this.mark.inner]=i('<div class="amp-zoom-wrapper"></div>'),this[this.mark.inner].append(i('<img class="amp-main-img" src="'+this.element.attr("src")+'">')),this[this.mark.inner].append(this.lens)):(this[this.mark.name].addClass("amp-zoom-container"),this.parent.append(this.lens))),this[this.mark.inner].hide(),this[this.mark.name].append(this[this.mark.inner]),this[this.mark.inner].addClass(this.options.states.inactive),this[this.mark.inner][0].relatedUUID=this.uuid):this[this.mark.name]=!1}this.box||(this.overflow.append(this.wrapper),this.canHideEl=!!i.amp.ampImage),this.target=this.imgs[0],this._setZoomCursor(this.parent),this.parent.addClass(this.options.states.inactive),("created"==this.options.preload.image||this.element[0].src)&&this._loadImage(),"created"==this.options.preload.zoomed&&this._loadZoomed()},_onImageLoad:function(){if(!this._imageLoaded){this._track("loaded",!0),this._imageLoaded=!0,this._imageLoading=!1,this._originalImage=this._getNaturalSize(this.element[0].src);var e=this;this._calcSize(),this.options.responsive&&i(window).bind("resize",function(i){return function(){return i.zoomed&&i.zoom(!1),i._calcSize()}}(e)),this.moved=!1,this.canTouch=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),this.zoomBy=1,this.pos={start:{x:0,y:0},last:{x:0,y:0},cur:{x:0,y:0}};var t=function(){var t=function(i){return e.moved=!0,!0},n=function(i){return d(),!0},d=function(o){return e.pos.cur=e.pos.last,e.mousedown=!1,e.parent.off(e.canTouch?"touchmove":"mousemove",i.proxy(t,e)),e.canTouch||e.parent.off("mouseleave",i.proxy(n,e)),e.parent.off(e.canTouch?"touchend":"mouseup",i.proxy(d,e)),e.moved?void 0:e.toggle(o)},o=function(o){e.zoomed&&(o.stopPropagation(),o.preventDefault()),e.mousedown=!0;var a=e._getEvent(o);e.pos.start={x:a.pageX,y:a.pageY},setTimeout(function(){e.parent.on(e.canTouch?"touchmove":"mousemove",i.proxy(t,e)),e.parent.on(e.canTouch?"touchend":"mouseup",i.proxy(d,e))},1),e.canTouch||e.parent.on("mouseleave",i.proxy(n,e)),e.moved=!1;o.timeStamp;return e.startTouchEvent=o,!0};e.parent.on(e.canTouch?"touchstart":"mousedown",i.proxy(o,e))};if(this.canTouch){if("disable"==this.options.activate.touch)return!1;if("doubleTap"==this.options.activate.touch){var n=300,d=20;this._lastEvent="";var o=function(t){e.parent.on("touchend touchcancel",i.proxy(a,e)),this.startTouchEvent=t;var t=this._getEvent(t);e.pos.start={x:t.pageX,y:t.pageY},t.timeStamp=(new Date).getTime();var o=t.timeStamp-(this._lastEvent&&this._lastEvent.timeStamp)||0,r=Math.abs(t.pageX-this._lastEvent.pageX)>d||Math.abs(t.pageY-this._lastEvent.pageY)>d;return n>o&&0!=o&&!r&&this.toggle(this.startTouchEvent),this._lastEvent=t,!0},a=function(t){e.pos.cur=e.pos.last,e.parent.off("touchend touchcancel",i.proxy(a,e))};e.parent.on("touchstart",i.proxy(o,e))}else if("pinch"==this.options.activate.touch){var r=2;this._scale=1,this._scaled=!1,this._cycle?(this.maxZoom=this.options.zoom[this._cycle.len-1],this._cycle=!1):this.maxZoom=this.options.zoom;var o=function(t){if(e.parent.on("touchcancel touchend",i.proxy(h,e)),t.originalEvent&&t.originalEvent.touches&&t.originalEvent.touches[0]){if(1==t.originalEvent.touches.length){var n=e._getEvent(t);return e.pos.start={x:n.pageX,y:n.pageY},!0}if(t.originalEvent.touches.length!=r)return!0}return t.preventDefault(),t.stopPropagation(),this.startZoom=this.zoomBy,this.startPos=this.pos.last,this.pos.start=this._getPosition(t.originalEvent.touches),this.pinching=!0,this.hasPinchEnded=!1,this._scaled||(this.o=this._pinchZoomStart(t)),this._startDist=this._getDistance(t.originalEvent.touches),this._scale=this._lastScale||this._scale,this.parent.on("touchmove",i.proxy(s,this)),this.parent.on("touchcancel touchend",i.proxy(a,this)),!0},s=function(i){if(i.originalEvent&&i.originalEvent.touches&&i.originalEvent.touches[0]&&i.originalEvent.touches.length!=r)return!0;var e=this._getDistance(i.originalEvent.touches),t=this._getPosition(i.originalEvent.touches),n=e/this._startDist;n=Math.max(1,Math.min(n*this._scale,this.maxZoom)),this._pinchZoom(i,n,t,this.o),this._lastScale=n,this._scaled=!0},h=function(t){e.pos.cur=e.pos.last,e.parent.off("touchcancel touchend",i.proxy(h,e))},a=function(t){t.originalEvent&&t.originalEvent.touches&&0==t.originalEvent.touches.length&&(e.hasPinchEnded=!0),e.parent.off("touchmove",i.proxy(s,this)),e.hasPinchEnded&&(1==this.zoomBy&&(this.zoomed=!1),e.pinching=!1,e.pos.cur=e.pos.last,e.parent.off("touchcancel touchend",i.proxy(a,this)))};e.parent.on("touchstart",i.proxy(o,e))}else"none"==this.options.activate.touch||t()}else{if("disable"==this.options.activate.mouse)return!1;if("over"==this.options.activate.mouse||"over-noclick"==this.options.activate.mouse){var u="mouseenter mousedown";"over-noclick"==this.options.activate.mouse&&(u="mouseenter"),e.parent.on(u,function(i){return"mouseenter"!=i.type||e.zoomed?"mousedown"==i.type?e.toggle(i):void 0:e.toggle(i)}),e.parent.on("mouseleave",function(i){return e.zoom(!1,i)})}else"down"==this.options.activate.mouse?(this.options.pan=!1,e.parent.on("mousedown",function(i){e.toggle(i)})):"none"==this.options.activate.mouse||t()}("created"==this.options.preload.zoomed||this.canTouch&&"pinch"==this.options.activate.touch||this._loadZoomedPromise)&&this.preload(),this._track("created")}},zoomed:!1,toggle:function(i,e){this._cycle?this.cycle(i,e):this.zoom(!this.zoomed,i)},cycle:function(e,t){this.animating||(void 0!==t?this._cycle.current=t:this._cycle.current=this._cycle.current+=1,
this.options.zoom[this._cycle.current]?(this.map&&this.inner.off("mousemove touchmove",i.proxy(this._mapMove,this)),this.parent.off("mousemove touchmove"),this.oldTarget=this.target[0]==this.imgs[this._cycle.current][0]?null:this.target,this.oldZoom=this.options.zoom[this._cycle.current],this.target=this.imgs[this._cycle.current],this.zoom(!0,e),this.pos.cur=this.pos.last):(this._cycle.current=-1,this.zoom(!1,e)))},zoom:function(t,n,d){if(t!=this.zoomed||this._cycle||d){this.zoomed=t;var o=this;if(t){if(this.box&&this.box.show(),!this._zoomLoaded)return void this._checkLoaded(n);this.init=!1,this.moveEvent=this.canTouch?"touchmove":"mousemove",this.zoomBy=this._cycle?this.options.zoom[this._cycle.current]||1:this.options.zoom;var a=this.overflow.width(),r=this.overflow.height(),s=a*this.zoomBy,h=r*this.zoomBy,u=this.parent.offset(),p=0,c=0,m=0,l=0,v=0;void 0===n&&(n={pageX:a/2,pageY:r/2}),this._track("startMove",{domEvent:n,zoom:this.zoomBy}),this.parent.removeClass(this.options.states.inactive).addClass(this.options.states.active),this.wrapper.css({width:s,height:h}),this[this.mark.name]&&(this.box&&(p=this.box.width(),c=this.box.height(),this.lens&&(v=this._makeLens(this.lens,p,c,this.zoomBy,{w:a,h:r}))),this.map&&(m=this.map.width(),l=m*(this.element.height()/this.element.width()),this.inner.height(l),this.inner.width(m),this.lens&&(v=this._makeLens(this.lens,m,l,this.zoomBy,{w:m,h:l})),this._mapEnd=function(e){o.mousedownForMap=!1,o.inner.off(o.canTouch?"touchmove":"mousemove",i.proxy(o._mapMove,o)),o.inner.off(o.canTouch?"touchend":"mouseup",i.proxy(o._mapEnd,o))},this._mapMove=function(i){o.mousedownForMap&&o._mouseMove(o._getEvent(i),a,r,s,h,o.map.offset(),p,c,m,l,v,!0)},this._mapStart=function(e){e.preventDefault(),e.stopPropagation(),o.mousedownForMap=!0,o._mouseMove(o._getEvent(e),a,r,s,h,o.map.offset(),p,c,m,l,v,!0),this.inner.on(o.canTouch?"touchmove":"mousemove",i.proxy(o._mapMove,o)),this.inner.on(o.canTouch?"touchend":"mouseup",i.proxy(o._mapEnd,o))},this.inner.on("mouseleave",i.proxy(o._mapEnd,o)),this.inner.on(o.canTouch?"touchstart":"mousedown",i.proxy(this._mapStart,o))),this[this.mark.name].show(),this[this.mark.inner].show(),this[this.mark.inner].removeClass(this.options.states.inactive).addClass(this.options.states.active)),this._parentMove=function(i){i.preventDefault(),i.stopPropagation(),o._mouseMove(o._getEvent(i),a,r,s,h,u,p,c,m,l,v)},this.parent.on(this.moveEvent,i.proxy(o._parentMove,o)),this._mouseMove(o._getEvent(n),a,r,s,h,u,p,c,m,l,v),this._setZoomCursor(o.lens?o.lens:o.parent),this.options.fade?(this.animating=!0,this.target.animate({opacity:1},{complete:function(){o.canHideEl&&o.element.css({opacity:1}),o.animating=!1,o.oldTarget&&o.oldTarget.css(e)}})):(this.target.css({opacity:1}),o.canHideEl&&this.element.css({opacity:1}),o.oldTarget&&o.oldTarget.css(e)),this.lens&&this.lens.show(),this._track("zoomedIn",{domEvent:n,zoom:this.zoomBy})}else this.init=!1,this._track("stopMove",{domEvent:n}),this.pos={start:{x:0,y:0},last:{x:0,y:0},cur:{x:0,y:0}},this.target.css(e),clearInterval(o.interval),this.options.fade&&this.target.stop(),this[this.mark.name]&&(this[this.mark.name].hide(),this[this.mark.inner].hide(),this[this.mark.inner].removeClass(this.options.states.active).addClass(this.options.states.inactive),this.map&&(this.inner.off("mouseleave",i.proxy(o._mapEnd,o)),this.inner.off(o.canTouch?"touchstart":"mousedown",i.proxy(this._mapStart,o)))),this.canHideEl&&this.element.css({opacity:1}),this._cycle&&(this._cycle.current=-1),this.lens&&this.lens.hide(),this.moveEvent&&i.proxy(this._parentMove,this)&&this.parent.off(this.moveEvent,i.proxy(this._parentMove,this)),this.wrapper.css({width:"",height:""}),this._setCursor(this.options.cursor.inactive,this.parent),this.parent.removeClass(this.options.states.active).addClass(this.options.states.inactive),this._track("zoomedOut",n)}},_getEvent:function(i){return i&&"touchend"==i.type&&(i=this.startTouchEvent),i&&i.originalEvent&&i.originalEvent.touches&&i.originalEvent.touches[0]&&(i=i.originalEvent.touches[0]),i},load:function(i){this._loadImage()},visible:function(i){if(this._visible==i){if(i==this._zoomVisible)return;return void(i&&"visible"==this.options.preload.zoomed&&(this._loadZoomed(),this._zoomVisible=i))}i&&this._track("visible",{visible:i}),i?("visible"==this.options.preload.image&&this._loadImage(),"visible"==this.options.preload.zoomed&&(this._loadZoomed(),this._zoomVisible=i),this._calcSize()):this.zoom(!1),this._visible=i},preload:function(){this._loadZoomed()},_makeLens:function(i,e,t,n,d){var o={lw:e/n,lh:t/n,lwh:0,lhh:0,dl:0,dt:0};return i.width(o.lw),i.height(o.lh),o.dl=i.outerWidth(!0)-o.lw,o.dt=i.outerHeight(!0)-o.lh,o.lw+o.dl>d.w&&(o.lw=d.w-o.dl),o.lh+o.dt>d.h&&(o.lh=d.h-o.dt),i.width(o.lw),i.height(o.lh),o.lwh=o.lw/2,o.lhh=o.lh/2,o.dlh=o.dl/2,o.dth=o.dt/2,o},_loadZoomed:function(){if(!this._imageLoaded)return"none"!=this.options.preload.zoomed&&(this._loadZoomedPromise=!0),void this._loadImage();if(!this._zoomLoaded&&!this._zoomLoading){var e=this;this._zoomLoading=!0,this._zoomLoaded=!1,this._toLoadCount=this.imgs.length,this._zoomLoadedCount=0,this._track("startPreload");var t=function(i){e._zoomLoadedCount++,e._zoomLoadedCount==e._toLoadCount&&(e._zoomLoaded=!0,e._zoomLoading=!1,e.loading.hide(),e._track("preloaded"),e._calcSize())};i.each(this.imgs,function(i,n){n.on("load",t),n[0].src=e._getUrl(e.options.zoom[i])})}},_checkLoaded:function(i){var e=this,t=!1;this._zoomLoading||this._loadZoomed(),clearInterval(this.interval),this.interval=setInterval(function(){e._zoomLoaded?(clearInterval(e.interval),e.zoom(e.zoomed,i,!0)):e._zoomLoading&&!t&&(e.canHideEl&&e.element.css({opacity:0}),t=!0)},50)},_pinchZoomStart:function(e){var t=this;this.zoomed=!0,this.options.fade?this.target.animate({opacity:1}):this.target.css({opacity:1}),this.target.show();var n={pw:this.overflow.width(),ph:this.overflow.height(),po:this.parent.offset(),mw:0,mh:0,lens:null};return n.tw=1*n.pw,n.th=1*n.ph,this.wrapper.css({width:this.overflow.width(),height:this.overflow.height()}),this.map&&(n.mw=this.map.width(),n.mh=n.mw*(this.element.height()/this.element.width()),n.mo=this.map.offset(),this.inner.height(n.mh),this.map.show(),this.lens&&(n.lens=this._makeLens(this.lens,n.mw,n.mh,1,{w:n.mw,h:n.mh})),this._mapEnd=function(e){t.inner.off("touchmove",i.proxy(t._mapMove,t)),t.inner.off("touchend",i.proxy(t._mapEnd,t))},this._mapMove=function(i){i.preventDefault(),i.stopPropagation(),t._mouseMove(t._getEvent(i),n.pw,n.ph,n.tw,n.th,t.map.offset(),null,null,n.mw,n.mh,n.lens,!0)},this._mapStart=function(e){e.preventDefault(),e.stopPropagation(),t._mouseMove(t._getEvent(e),n.pw,n.ph,n.tw,n.th,t.map.offset(),null,null,n.mw,n.mh,n.lens,!0),this.inner.on("touchmove",i.proxy(t._mapMove,t)),this.inner.on("touchend",i.proxy(t._mapEnd,t))},this.inner.on("touchstart",i.proxy(this._mapStart,this)),this.inner.removeClass(this.options.states.inactive).addClass(this.options.states.active),this.inner.show(),this.lens&&this.lens.show()),this._parentMove=function(i){return t.hasPinchEnded?i.originalEvent&&i.originalEvent.touches&&i.originalEvent.touches[0]&&1!=i.originalEvent.touches.length?!0:(i.preventDefault(),1!==this.zoomBy&&i.stopPropagation(),void t._mouseMove(t._getEvent(i),n.pw,n.ph,n.tw,n.th,n.po,null,null,n.mw,n.mh,n.lens)):(i.stopPropagation(),!0)},this.parent.on("touchmove",i.proxy(this._parentMove,this)),n},_pinchZoom:function(i,e,t,n){e==this.maxZoom?this._track("maxZoom",{domEvent:i,scale:e,center:t}):1==e&&this._track("minZoom",{domEvent:i,scale:e,center:t}),n.tw=n.pw*e,n.th=n.ph*e,this.zoomBy=e,this.wrapper.css({width:n.tw,height:n.th}),this.lens&&(n.lens=this._makeLens(this.lens,n.mw,n.mh,e,{w:n.mw,h:n.mh})),this._mouseMove({currentTarget:i.currentTarget,pageX:t.x,pageY:t.y},n.pw,n.ph,n.tw,n.th,n.po,null,null,n.mw,n.mh,n.lens)},_mouseMove:function(i,e,t,n,d,o,a,r,s,h,u,p){var c,m,l,v,f,V=a?n-e+(e-a):n-e,g=r?d-t+(t-r):d-t;if(this.init&&this.options.pan){if(!(this.mousedown||this.canTouch||p))return void(this.panning=!1);if(this.pinching)c=(this.startPos.x+(this.pos.start.x-o.left))/this.startZoom,m=(this.startPos.y+(this.pos.start.y-o.top))/this.startZoom,l=V*(c/e),v=g*(m/t);else{this.panning=!0;var w=this.pos.start.x-i.pageX,b=this.pos.start.y-i.pageY;l=w+this.pos.cur.x,v=b+this.pos.cur.y,c=(l+e/2)/(n/e),m=(v+t/2)/(d/t)}}else this.init=!0,this.panning=!1,c=i.pageX-o.left,m=i.pageY-o.top,l=V*(c/e),v=g*(m/t),this.pos.cur.x=this.pos.last.x||l,this.pos.cur.y=this.pos.last.y||v;if(this.lens){if(this.box){this.box[0].lastChild.relatedUUID!=this.uuid&&(this.box.append(this.wrapper),this.wrapper.show().siblings().hide());var $=e,S=t,P=c-u.lwh-u.dlh,y=m-u.lhh-u.dth;l=(P+u.dlh)*this.zoomBy-u.lw/e,v=(y+u.dth)*this.zoomBy-u.lh/t,f=this._setBounds(c,m,e,t,0,0),c=f.x,m=f.y}else if(p){this.panning&&(c=i.pageX-o.left,m=i.pageY-o.top);var $=s,S=h,P=c-u.lwh-u.dlh,y=m-u.lhh-u.dth;l=((P+u.dlh)*this.zoomBy-u.lw/e)*e/s,v=((y+u.dth)*this.zoomBy-u.lh/t)*t/h,this.pos.cur={x:l,y:v}}else if(this.map){if(this.map[0].lastChild.relatedUUID!=this.uuid&&(this.map.append(this.inner),this.inner.show().siblings().hide()),this.panning){var P=c/(e/s)-u.lwh-u.dth;y=m/(t/h)-u.lhh-u.dth}else var _=c/(e/u.lw),z=m/(t/u.lh),P=c/(e/s)-_-u.dlh,y=m/(t/h)-z-u.dth;f=this._setBounds(P,y,s-u.lw-u.dl,h-u.lh-u.dt,0,0),P=f.x,y=f.y}(this.box||p)&&(c+u.lwh+u.dlh>=$&&(P=$-u.lw-u.dl),m+u.lhh+u.dth>=S&&(y=S-u.lh-u.dt),c-u.lwh-u.dlh<=0&&(P=0),m-u.lhh-u.dth<=0&&(y=0)),this.lens.css({top:y+"px",left:P+"px"})}f=this._setBounds(l,v,V,g,0,0),l=f.x,v=f.y,this.pos.last={x:l,y:v},this.lastPos={x:l,y:v},this.oldTarget&&this.oldTarget.css({top:-v+"px",left:-l+"px"}),this.target.css({top:-v+"px",left:-l+"px"}),this._track("move",{domEvent:i,pos:{x:c/e,y:m/t}})},_calcSize:function(){var i,e;if(this.options.responsive&&this.options.width&&this.options.height&&"auto"!=this.options.width&&"auto"!=this.options.height?(i=this.element.width(),e=i*(this.options.height/this.options.width),this.parent.height(e),this.overflow.height(e),0!=this.element.height()&&e>this.element.height()&&this.overflow.height(this.element.height())):(this.options.width&&this.parent.width(this.options.width),this.options.height&&this.parent.height(this.options.height)),this.map){var t=this.map.width(),n=t*(this.element.height()/this.element.width());this.inner.height(n)}},_getUrl:function(e){if(this.options.url)return this.options.url;var t=this.element.attr("src")||this.element.attr("data-amp-src");if(t){var n=this._cycle?e||1:this.options.zoom;t=this._cleanUrl(t);var d=this.options.transforms;if(this._cycle){var o=i.inArray(e,this.options.zoom);d=d[o]}return t=d?this._setTransforms(t,d):t,t=this._setWidth(t,{h:this._originalImage.height*n,w:this._originalImage.width*n})}},_getWidth:function(i){if(window.amp&&amp.di)return amp.di.width(i);var i=i.split("?");if(!i[1])return!1;for(var e=i[1].split("&"),t=0;t<e.length;t++){var n=e[t].split("=");if("w"==n[0])return parseInt(n[1])}return!1},_setWidth:function(e,t){if(window.amp&&amp.di)return amp.di.set(e,t);var e=e.split("?");if(e[1]){for(var n=e[1].split("&"),d=[],o=0;o<n.length;o++){var a=n[o].split("="),r={};"w"!=a[0]&&(r[a[0]]=a[1],d.push(i.param(r)))}return d=d.concat(i.param(t)),e[0]+"?"+d.join("&")}return e[0]+"?"+i.param(t)},_cleanUrl:function(i){var e=i.split("?");return e[0]},_loadImage:function(){if(!this._imageLoaded&&!this._imageLoading){this.loading=i('<div class="amp-loading"></div>'),this._imageLoading=!0;var e=this.element[0].src||this.element.attr("data-amp-src");this.element.on("load",i.proxy(this._onImageLoad,this)),this.element[0].src="",this.element[0].src=e}},_getNaturalSize:function(i){return{width:this.element[0].naturalWidth,height:this.element[0].naturalHeight}},_setTransforms:function(i,e){return-1==i.indexOf("?")?i+"?"+e:i+"&"+e},_setBounds:function(i,e,t,n,d,o){return i>=t&&(i=t),e>=n&&(e=n),d>=i&&(i=d),o>=e&&(e=o),{x:i,y:e}},_track:function(i,e){this._trigger(i,null,e),window.amp&&amp.stats&&amp.stats.event&&amp.stats.event(this.element,"zoom",i,e)},_setCursor:function(i,e){return"string"!=typeof i&&(i="auto"),i.indexOf("zoom")<0?(e.css("cursor",i),!1):document.documentMode?!1:("undefined"!=typeof InstallTrigger&&e.css("cursor","-moz-"+i),void(window.chrome&&e.css("cursor","-webkit-"+i)))},_setZoomCursor:function(i){var e=this.options.zoom;if(e.length){var t=e.indexOf(this.zoomBy);t===e.length-1?this._setCursor(this.options.cursor.active,i):this._setCursor(this.options.cursor.inactive,i)}else this.zoomBy>1?this._setCursor(this.options.cursor.active,i):this._setCursor(this.options.cursor.inactive,i)},_getDistance:function(i){var e=Math.abs(i[0].pageX-i[1].pageX),t=Math.abs(i[0].pageY-i[1].pageY);return Math.sqrt(e*e+t*t)},_getPosition:function(i){return{x:(i[0].pageX+i[1].pageX)/2,y:(i[0].pageY+i[1].pageY)/2}},_destroy:function(){this.element.unwrap().unwrap(),this.wrapper.remove(),this.element.removeClass("amp"),this.element.removeClass("amp-zoom"),this.element.removeClass(this.options.states.active),this.element.removeClass(this.options.states.inactive),this.element.css({cursor:"",height:"","max-width":"",width:"",opacity:"",position:"",display:"",top:"",left:"",zoom:""}),this._removeEmptyAttributeHelper(this.element)},_removeEmptyAttributeHelper:function(i,e){for(var t=e||["class","style"],n=0,d=t.length;d>n;n++)i.attr(t[n])&&i.prop(t[n])||i.removeAttr(t[n])}})}(jQuery),function(i){i.widget("amp.ampZoomInline",{options:{scaleMax:3,scaleStep:.5,scaleSteps:!1,events:{zoomIn:"mouseup touchstart",zoomOut:"mouseup touchend",move:"mousemove touchmove"},stopPropagation:"",activation:{inGesture:!0},pinch:!1,transforms:"",preload:"none",pan:!1},_getCreateOptions:function(){var e=this.element.data().ampZoomInline;return e?i.extend(!0,{},this.options,e):this.options},_create:function(){this.scale=1,this.element.addClass("amp amp-zoom"),this.$parent=this.element.parent(),this._invalidateParentSize(),this.element.on(this.options.events.zoomIn,i.proxy(this.zoomIn,this)),this.options.activation.inGesture||(this.gestureDetect=new e(this.element)),this._track("created"),"created"==this.options.preload&&this.load(),this.options.pan&&(i(document).on("dragstart",function(){return!1}),this.element.parent().on("mousedown touchstart",i.proxy(function(e){return this.scale>1&&e.stopPropagation(),this.panner&&(this.panner.remove(),delete this.panner),this.scale>1&&(this.panner=new n(this,e,i.proxy(function(i,e){this.zoomArea&&this.zoomArea.setPosition(i,e)},this))),!0},this))),this.options.pinch&&this.element.parent().on("touchstart",i.proxy(function(e){return this.pincher&&(this.pincher.remove(),delete this.pincher),this.pincher=new t(e,i.proxy(function(){this.zoomIn()},this),i.proxy(function(){this.zoomOut()},this)),!0},this)),""!==this.options.stopPropagation&&this.element.parent().on(this.options.stopPropagation,i.proxy(function(i){1!=this.scale&&i.stopPropagation()},this))},visible:function(i){this._visible!=i&&(i&&this._track("visible",{visible:i}),i?"visible"==this.options.preload&&this.load():this.zoomOutFull(),this._visible=i)},load:function(){this._setupZoomArea().then(i.proxy(function(i){i.setScale(this.options.zoom)},this))},_setupZoomArea:function(){return new Promise(i.proxy(function(e,t){this.zoomArea?e(this.zoomArea):this.getImageSize().then(i.proxy(function(i){i.error?t(!1):(this.zoomArea=new d(this.element,this.$parent,i,this.options.transforms),e(this.zoomArea))},this))},this))},getImageSize:function(){return new Promise(i.proxy(function(e,t){this.element[0].naturalWidth&&this.element[0].naturalHeight?e({x:this.element[0].naturalWidth,y:this.element[0].naturalHeight}):this.element[0].width&&this.element[0].height&&e({x:this.element[0].width,y:this.element[0].height}),this.element.on("load",i.proxy(function(){this.element[0].naturalWidth&&this.element[0].naturalHeight?e({x:this.element[0].naturalWidth,y:this.element[0].naturalHeight}):this.element[0].width&&this.element[0].height&&e({x:this.element[0].width,y:this.element[0].height})},this)),this.element.on("error",i.proxy(function(){t({error:!0})},this))},this))},_invalidateParentSize:function(){this.parentSize={x:this.$parent.width(),y:this.$parent.height()}},state:function(){return{scale:this.scale,scaleMax:this.options.scaleMax,scaleStep:this.options.scaleStep}},zoomInFull:function(i){this.setScale(this.options.scaleMax),this._track("zoomedInFull",{domEvent:i,scale:this.options.scaleMax,scaleMax:this.options.scaleMax,scaleStep:this.options.scaleStep})},zoomIn:function(e){if((this.options.scaleSteps||1==this.scale)&&(e&&e.preventDefault(),this.options.activation.inGesture||!this.gestureDetect.detected)){var t=this.scale;this.options.scaleSteps?(this.scale+=this.options.scaleStep,this.scale=Math.min(this.scale,this.options.scaleMax)):this.scale=this.options.scaleMax,t!=this.scale&&(this._track("zoomedIn",{domEvent:e,scale:this.scale,scaleMax:this.options.scaleMax,scaleStep:this.options.scaleStep}),this.setScale(this.scale),setTimeout(i.proxy(function(){i(document).on(this.options.events.move,i.proxy(this._setPos,this)),this.options.scaleSteps||i(document).on(this.options.events.zoomOut,i.proxy(this.zoomOut,this))},this),1))}},zoomInClick:function(e){if(this.options.activation.inGesture||!this.gestureDetect.detected){var t=this.scale;this.scale+=this.options.scaleStep,this.scale=Math.min(this.scale,this.options.scaleMax),t!=this.scale&&(this._track("zoomedIn",{domEvent:e,scale:this.scale,scaleMax:this.options.scaleMax,scaleStep:this.options.scaleStep}),this.setScale(this.scale),setTimeout(i.proxy(function(){i(document).on(this.options.events.move,i.proxy(this._setPos,this))},this),1))}},setScale:function(e){this.scale=e,this._setupZoomArea().then(i.proxy(function(i){i&&(i.setScale(this.scale),this._invalidateParentSize())},this))},_setPos:function(i){this._track("settingPos",{domEvent:i});var e=i?this._getPercentagePos(i):{x:.5,y:.5};this.zoomArea.setPosition(e.x,e.y)},zoomOut:function(e){var t=this.scale;this.options.scaleSteps?(this.scale-=this.options.scaleStep,this.scale=Math.max(this.scale,1)):this.scale=1,t!=this.scale&&(1==this.scale&&(this.options.events.move&&i(document).off(this.options.events.move,this._setPos),this.options.events.zoomOut&&i(document).off(this.options.events.zoomOut,this.zoomOut)),this.zoomArea.$preloader&&this.zoomArea.$preloader.addClass("amp-hidden"),this.zoomArea.setScale(this.scale),this._track("zoomedOut",{domEvent:e,scale:this.scale,scaleMax:this.options.scaleMax,scaleStep:this.options.scaleStep}))},zoomOutFull:function(e){this.zoomArea&&(this.options.events.move&&i(document).off(this.options.events.move,this._setPos),this.options.events.zoomOut&&i(document).off(this.options.events.zoomOut,this.zoomOut),this.scale=1,this.zoomArea.$preloader&&this.zoomArea.$preloader.addClass("amp-hidden"),this.zoomArea.setScale(1),this._track("zoomedOutFull",{domEvent:e,scale:this.scale,scaleMax:this.options.scaleMax,scaleStep:this.options.scaleStep}))},_convertEvent:function(i){return i.originalEvent&&i.originalEvent.touches&&i.originalEvent.touches[0]&&(i.preventDefault(),i=i.originalEvent.touches[0]),i},_getPercentagePos:function(i){i=this._convertEvent(i);var e=this.$parent.offset();return{x:(i.pageX-e.left)/this.parentSize.x,y:(i.pageY-e.top)/this.parentSize.y}},_track:function(i,e){this._trigger(i,null,e),window.amp&&amp.stats&&amp.stats.event&&amp.stats.event(this.element,"zoom",i,e)},_destroy:function(){this.element.removeClass("amp"),this.element.removeClass("amp-zoom"),this._removeEmptyAttributeHelper(this.element)},_removeEmptyAttributeHelper:function(i,e){for(var t=e||["class","style"],n=0,d=t.length;d>n;n++)i.attr(t[n])&&i.prop(t[n])||i.removeAttr(t[n])}});var e=function(e,t){this.toleranceX=void 0!==e?e:0,this.toleranceY=void 0!==t?t:0,this.detected=!1,this.$document=i("body"),this.$document.on("mousedown touchstart",i.proxy(this.startDetecting,this))};e.prototype.convertEvent=function(i){return i.originalEvent&&i.originalEvent.touches&&i.originalEvent.touches[0]&&(i=i.originalEvent.touches[0]),i},e.prototype.startDetecting=function(e){this.detected=!1,this.$document.on("mousemove touchmove",i.proxy(this.moveDetected,this)),this.$document.on("mouseup touchend",i.proxy(this.stopDetecting,this))},e.prototype.moveDetected=function(i){this.detected=!0},e.prototype.stopDetecting=function(i){this.$document.off("mousemove touchmove",this.moveDetected),this.$document.off("mouseup touchend",this.stopDetecting)};var t=function(e,t,n){this.threshold=100,e=this.getFingers(e),this.cbIn=t,this.cbOut=n,2==e.length&&(this.start=this.getDistance(e),i(document).on("touchmove",i.proxy(this.move,this)),i(document).on("touchend",i.proxy(this.end,this)))};t.prototype.getDistance=function(i){var e=Math.abs(i[0].pageX-i[1].pageX),t=Math.abs(i[0].pageY-i[1].pageY);return Math.sqrt(e*e+t*t)},t.prototype.move=function(i){i.preventDefault(),i=this.getFingers(i);var e=this.getDistance(i),t=e-this.start;t>this.threshold&&(this.cbIn(),this.start=e),t<0-this.threshold&&(this.cbOut(),this.start=e)},t.prototype.remove=function(){this.end()},t.prototype.end=function(e){i(document).off("mousemove touchmove",this.move),i(document).off("mouseup touchend",this.end)},t.prototype.getFingers=function(i){return i.originalEvent&&i.originalEvent.touches&&(i=i.originalEvent.touches),i};var n=function(e,t,n){this.multiFinger(t)||(t=this.convertEvent(t),this.start={x:t.pageX,y:t.pageY},this.zoomArea=e.zoomArea,this.cb=n,this.element=e.element,this.currentPixPos=this.zoomArea.getPixPos(),i(document).on("mousemove touchmove",i.proxy(this.move,this)),i(document).on("mouseup touchend",i.proxy(this.end,this)))};n.prototype.move=function(i){i.preventDefault(),i=this.convertEvent(i);var e=i.pageX-this.start.x,t=i.pageY-this.start.y,n=this.zoomArea.getPercentFromPos(this.currentPixPos.x+e,this.currentPixPos.y+t);this.cb(n.x,n.y)},n.prototype.end=function(e){i(document).off("mousemove touchmove",this.move),i(document).off("mouseup touchend",this.end)},n.prototype.remove=function(){this.end()},n.prototype.multiFinger=function(i){return i.originalEvent&&i.originalEvent.touches&&i.originalEvent.touches.length>1},n.prototype.convertEvent=function(i){return i.originalEvent&&i.originalEvent.touches&&i.originalEvent.touches[0]&&(i=i.originalEvent.touches[0]),i};var d=function(i,e,t,n){this.animating=!1,this.transforms=n,this.initialSrc=i.attr("src"),this.scale=1,this.$area=e,this.$source=i,this.originalSize=t,this.posPercentageX=.5,this.posPercentageY=.5,this.createContainer(),this.hide()};d.prototype.getPercentagePosWithScale=function(i){},d.prototype.createContainer=function(){var e=this;this.$container=i('<div class="amp-zoomed-container"></div>'),this.$preloader=i('<img class="amp-zoomed-clone amp-hidden">'),this.$preloader.on("load",function(){e._preloaderImgLoaded=!0}),this.$zoomed=i('<img class="amp-zoomed" style="z-index:2;" src=""/>'),this.$container.append(this.$zoomed),this.$container.append(this.$preloader),this.$area.append(this.$container),this.$container.css({position:"absolute",top:0,left:0,bottom:0,right:0})},d.prototype.invalidatePosition=function(){this.setPosition(this.posPercentageX,this.posPercentageY)},d.prototype.setPosition=function(i,e){this.animating||(this.$preloader.addClass("amp-hidden"),this.$zoomed.width()<=this.$area.width()&&(i=.5),this.$zoomed.height()<=this.$area.height()&&(e=.5),this.posPercentageX=i,this.posPercentageY=e,i=Math.min(1,Math.max(0,i)),e=Math.min(1,Math.max(0,e)),this.$zoomed.css("left",0-(this.$zoomed.width()-this.$area.width())*i+"px"),this.$zoomed.css("top",0-(this.$zoomed.height()-this.$area.height())*e+"px"))},d.prototype.getPixPos=function(i,e){return void 0==i&&void 0==e&&(i=this.posPercentageX,e=this.posPercentageY),i=Math.min(1,Math.max(0,i)),e=Math.min(1,Math.max(0,e)),{x:0-(this.newSize.x-this.$area.width())*i,y:0-(this.newSize.y-this.$area.height())*e}},d.prototype.getPercentFromPos=function(i,e){var t=0-i/(this.newSize.x-this.$area.width()),n=0-e/(this.newSize.y-this.$area.height());return{x:t,y:n}},d.prototype.animate=function(e,t,n){this.animating=!0,e.x<=this.$area.width()&&(t.x=this.getPixPos(.5,.5).x),e.y<=this.$area.height()&&(t.y=this.getPixPos(.5,.5).y),this.$zoomed.animate({width:e.x,height:e.y,left:t.x+"px",top:t.y+"px"},500,i.proxy(function(){this.animating=!1,n&&n()},this))},d.prototype.updateImageSrc=function(e){var t=this,n=0;return this.preloadedImgInterval&&clearInterval(this.preloadedImgInterval),e?void(this.preloadedImgInterval=setInterval(function(){if(n+=1,n>=30)return clearInterval(t.preloadedImgInterval),!1;if(1!=!t._preloaderImgLoaded){var e=t.$zoomed.prop("attributes");i.each(e,function(){"src"!=this.name&&"class"!=this.name&&t.$preloader.attr(this.name,this.value)}),t.$preloader.removeClass("amp-hidden"),t.setImage(),clearInterval(t.preloadedImgInterval)}},200)):(t.$preloader.addClass("amp-hidden"),!1)},d.prototype.setScale=function(i,e){var t=this,n=i>this.scale;i!=this.scale&&(i<this.scale&&1==i?this.newSize={x:this.$source.width(),y:this.$source.height()}:this.newSize={x:this.$source.width()*i,y:this.$source.height()*i},1==this.scale&&(this.$zoomed.attr("src",this.$source.attr("src")),i>this.scale&&(this.$zoomed.width(this.$source.width()),this.$zoomed.height(this.$source.height())),this.setPosition(.5,.5),this.show()),1==i?this.animate(this.newSize,this.getPixPos(),function(){t.hide(),t.updateImageSrc(!1)}):this.animate(this.newSize,this.getPixPos(),function(){t.updateImageSrc(n)}),this.scale=i,this.invalidateImageURL({x:this.originalSize.x*i,y:this.originalSize.y*i}))},d.prototype.show=function(){this.invalidatePosition(),i(window).off("resize",this.invalidatePosition),i(window).on("resize",i.proxy(this.invalidatePosition,this)),this.$container.show()},d.prototype.hide=function(){this.$container.hide(),i(window).off("resize",this.invalidatePosition)},d.prototype.invalidateImageURL=function(i){var e="";this.transforms&&this.transforms.length&&(e=this.transforms+"&");var t=this.initialSrc.split("?")[0]+"?"+e+"w="+i.x+"&h="+i.y;(0==i.x||0==i.y)&&(t=""),this._preloaderImgLoaded=!1,this.$preloader.attr("src",t)},d.prototype.setImage=function(){this.$zoomed.attr("src",this.$preloader.attr("src"))}}(jQuery),function(i){i.widget("amp.ampVideo",{options:{autoplay:!1,loop:!1,muted:!1,skin:"amp-video-skin",responsive:!0,preload:"auto",pauseOnHide:!0,controls:!0,nativeControlsForTouch:!0,plugins:{},enableSoftStates:!0},_states:{stopped:0,buffering:1,paused:2,playing:3,loading:4,error:5,idle:6},_currentState:0,_ready:!1,_loopCount:0,_savedHTML:"",_getCreateOptions:function(){this._savedHTML=this.element[0].outerHTML;var e=this.element.data().ampVideo;return e?i.extend(!0,{},this.options,e):this.options},_create:function(){this.element.addClass("amp amp-video");var e=this.element.find("video"),t=this;e.addClass("video-js "+this.options.skin),videojs&&(videojs.options.flash.swf=this.options.swfUrl+"video-js.swf"||"../../assets/video-js.swf",this._player=videojs(e[0],{autoplay:this.options.autoplay,muted:this.options.muted,width:"100%",height:"100%",loop:!1,controls:this.options.controls,preload:this.options.preload,plugins:t._sanitisePlugins(this.options.plugins),nativeControlsForTouch:this.options.nativeControlsForTouch})),t._calcSize(),t.options.responsive&&i(window).bind("resize",function(i){return function(){return i._calcSize()}}(t)),this._player.ready(function(){t._ready=!0;var e=t.element.find(".vjs-tech"),n=setInterval(function(){if("auto"==t.options.height){var i=e.css({height:"auto"}).height();0!=i&&(clearInterval(n),t.element.height(i),e.css({height:""}),t._player.dimensions(t.element.width(),t.element.height()))}},200);t.options.autoplay&&t.state(t._states.playing),this.on("play",function(i){t.softPlay&&t.options.enableSoftStates?t.softPlay=!1:(t.state(t._states.playing),t._track("play",{event:i,player:this,time:this.currentTime(),duration:t.duration}))}),this.on("error",function(i){t.state(t._states.error),t._track("error",null)}),this.on("pause",function(i){i.target.ended||i.target.seeking||(t.state(t._states.paused),t._track("pause",{event:i,player:this,time:this.currentTime(),duration:t.duration}))}),this.on("waiting",function(i){t.state(t._states.buffering)}),this.on("seeking",function(i){t.softSeek?t.softSeek=!1:(t.state()!==t._states.paused&&0!==i.target.currentTime&&t.options.enableSoftStates&&(t.softPlay=!0),t._track("seeked",{event:i,player:this,time:this.currentTime(),duration:t.duration}))}),this.on("timeupdate",function(i){t._track("timeUpdate",{event:i,player:this,time:this.currentTime(),duration:t.duration})}),this.on("volumechange",function(i){t._track("volume",{event:i,player:this,volume:this.volume(),muted:this.muted()})}),this.on("durationchange",function(i){t.duration=this.duration(),t._track("durationChange",{event:i,player:this,duration:t.duration})}),this.on("fullscreenchange",function(e){t._track("fullScreenChange",{event:e,player:this}),setTimeout(function(){i(window).resize()},200)}),this.on("ended",function(i){t.options.loop?(t.softSeek=!0,t._player.currentTime(0),t.softPlay=!0,t._player.play(),t._track("looped",{count:++t._loopCount})):(t.state(t._states.stopped),t._track("ended",null))}),t._track("created",{player:this,duration:t.duration})})},visible:function(i){i!=this._visible&&(i?(this._track("visible",{visible:i}),this._calcSize()):(this._states.playing==this.state()||this._states.buffering==this.state())&&this.options.pauseOnHide&&this.pause(),this._visible=i)},redraw:function(){this._calcSize()},_calcSize:function(){var i,e;if(this.options.responsive&&this.options.width&&this.options.height&&"auto"!=this.options.width&&"auto"!=this.options.height){var t=this.element.css("display");this.element.css("display","block"),i=Math.round(this.element.width()),this.element.css("display",t),e=Math.round(i*(this.options.height/this.options.width)),this.element.height(e)}else this.options.width?this.element.width(this.options.width):this.options.responsive&&this.element.width(this.element.parent().width()),this.options.height?this.element.height(this.options.height):this.options.responsive&&this.element.height(this.element.parent().height());if(this.options.center){var n=this.element.height(),d=this.element.parent().height();this.element.css("margin-top",d/2-n/2+"px")}this._player&&this._player.dimensions(this.element.width(),this.element.height())},play:function(){this._ready&&this._states.playing!==this.state()&&this._player.play()},pause:function(){this._ready&&this._states.paused!==this.state()&&this._player.pause()},stop:function(){this._ready&&this._states.stopped!==this.state()&&(this._player.pause(),this.softSeek=!0,this._player.currentTime(0),this._track("stopped",null),this.state(this._states.stopped))},seek:function(i){this._ready&&this.currentTime(i)},currentTime:function(i){return void 0===i?this._player.currentTime():void this._player.currentTime(i)},state:function(i){return void 0===i?this._currentState:(this._currentState=i,void this._trigger("stateChange",null,{state:i}))},_track:function(i,e){this._trigger(i,null,e),window.amp&&amp.stats&&amp.stats.event&&amp.stats.event(this.element,"video",i,e)},_destroy:function(){this._player.dispose(),this._player=null,this.element[0].outerHTML=this._savedHTML},_sanitisePlugins:function(i){return i&&0==i.resolutions&&delete i.resolutions,i}})}(jQuery),function(i){i.widget("amp.ampSpin",i.amp.ampStack,{options:{delay:50,autoplay:!1,loop:!0,responsive:!0,states:{selected:"amp-selected",seen:"amp-seen",active:"amp-active",inactive:"amp-inactive"},events:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},momentum:!0,preload:"created",preloadType:"full",minDistance:25,activate:"down",friction:.97,dir:"normal",gesture:{enabled:!0,fingers:1},orientation:"horz",start:1,cursor:{active:"auto",inactive:"auto"},play:{onLoad:!1,onVisible:!1,repeat:1},dragDistance:200,lazyLoad:!1},_getCreateOptions:function(){var e=this.element.data().ampSpin;return e?i.extend(!0,{},this.options,e):this.options},_create:function(){var e=this,t=this._children=this.element.children();
this._count=this.element.children().length;this.isIE=-1!==navigator.userAgent.indexOf("MSIE")||navigator.appVersion.indexOf("Trident/")>0,this.$document=i(document),this.options.friction=Math.min(this.options.friction,.999),this.options.friction=Math.max(this.options.friction,0),this._setCursor(this.options.cursor.inactive),this.count=this.element.children().length,this.options.dragDistance=Math.max(this.options.dragDistance,1),this._index=Math.max(1,Math.min(this.options.start,this.count)),-1==i.inArray(this.options.preload,["created","visible","none"])&&(this.options.preload="created"),this.element.addClass("amp"),this.element.addClass("amp-spin"),this.element.addClass(this.options.states.inactive),this.imgs=this.element.find("img:not(.amp-zoom-img)"),this.toLoadCount=this.imgs.length,this.loadedCount=0,t.addClass("amp-frame"),this.isIE?(t.css({"z-index":-1}),t.eq(this._index-1).css("z-index",1)):(t.css({display:"none"}),t.eq(this._index-1).css("display","block")),t.eq(this._index-1).addClass(this.options.states.selected+" "+this.options.states.seen),setTimeout(function(i){return function(){return i._calcSize()}}(e),1),this.options.responsive&&i(window).on("resize",function(i){return function(){return i._calcSize()}}(e)),this.element.on("dragstart",function(i){return!1}),this.element.on(this.options.events.start,i.proxy(this._startDrag,this)),this.element.on("mousewheel DOMMouseScroll",function(i){return e._mouseScroll(i)}),this.options.autoplay&&this.play(),"created"==this.options.preload&&this._startPreload(),this._track("created",{index:this._index,canNext:this.canNext(),canPrev:this.canPrev()})},_setCursor:function(i){return i.indexOf("zoom")<0&&i.indexOf("grab")<0?(this.element.css("cursor",i),!1):document.documentMode?!1:("undefined"!=typeof InstallTrigger&&this.element.css("cursor","-moz-"+i),void(window.chrome&&this.element.css("cursor","-webkit-"+i)))},redraw:function(){this._calcSize()},_mouseScroll:function(i){var e=0;return i||(i=window.event),i.originalEvent.wheelDelta?e=i.originalEvent.wheelDelta:i.originalEvent.detail&&(e=-i.originalEvent.detail),e>0?this.next():this.prev(),this._track("scroll",{domEvent:i,delta:e}),i.preventDefault(),!1},visible:function(i){i!=this._visible&&(this._super(i),i&&("visible"==this.options.preload&&this._startPreload(),"none"==this.options.preload&&this._startPreload(this._index),this.options.play.onVisible&&this._loaded&&this.playRepeat(this.options.play.repeat)))},_resolveEventCoords:function(i){return i=i.originalEvent,i.touches&&i.touches.length?{x:i.touches[0].clientX,y:i.touches[0].clientY}:i.changedTouches&&i.changedTouches.length?{x:i.changedTouches[0].clientX,y:i.changedTouches[0].clientY}:{x:i.clientX,y:i.clientY}},_startPreload:function(e){if(!(this._loaded||this._loading&&!this.first)){var t=this;this._loading=!0,this.first||(this._track("startPreload"),"none"!=this.options.preload&&("full"==this.options.preloadType?(this.pre=i('<li class="amp-progress amp-frame"></li>'),this.element.append(this.pre)):"window"==this.options.preloadType&&(this.progressIndicator=i('<div class="amp-progress-indicator"><div class="amp-progress-message"></div><div class="amp-progress-bar-background"><div class="amp-progress-bar"></div></div></div>'),this.progressIndicator.find(".amp-progress-message").html(this.options.progressMessage||"Loading..."),this.progressIndicator.progress=t.progressIndicator.find(".amp-progress-bar"),this.progressIndicator.visible=!0,this.element.append(this.progressIndicator))));var n=function(i){if(t.loadedCount++,t.loadedCount>=t.toLoadCount&&!t._loaded)t._unsetLoadEvents(t.imgs),t._loaded=!0,t.pre&&t.pre.remove(),t.options.play.onLoad&&t.playRepeat(t.options.play.repeat),t._loading=!1,t.progressIndicator&&(t.progressIndicator.visible=!1,t.progressIndicator.remove()),t._track("preloaded");else{var e=t.loadedCount/t.toLoadCount*100;t.pre&&(t.pre.css("width",100-e+"%"),t.pre.css("left",e+"%")),t.progressIndicator&&t.progressIndicator.visible&&t.progressIndicator.progress.css("width",e+"%")}};e?(this.first=!0,this.toLoadCount-=1,this._callImageMethod(i(this.imgs[e-1]),n)):this._callImageMethod(this.imgs,n)}},_unsetLoadEvents:function(e){if(e)for(var t=0,n=e.length;n>t;t++){var d=i(e[t]),o=d.data();o["amp-ampZoom"]?d.ampZoom({loaded:null}):d.ampImage({loaded:null})}},_callImageMethod:function(e,t){for(var n=0,d=e.length;d>n;n++){var o=i(e[n]),a=o.data();a["amp-ampZoom"]?(o.ampZoom({loaded:t}),o.ampZoom("load",this.options.preload)):(o.ampImage({loaded:t}),o.ampImage("load",this.options.preload))}},preload:function(){this._startPreload()},playRepeat:function(i){if("inf"==i)return void this.play();for(var e=this,t=0;i>t;t++)for(var n=0;n<this.count;n++)setTimeout(function(){e.next()},this.options.delay*(t*this.count+n))},_startDrag:function(e){var t=this,n=this._resolveEventCoords(e),d=i(e.currentTarget).offset(),o=n.x-d.left,a=n.y-d.top;if(!this._started){if(this.options.gesture.enabled&&e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches[0]&&e.originalEvent.touches.length!=this.options.gesture.fingers)return!0;this._started=!0,this._track("startMove",{domEvent:e,pos:{x:o,y:a}}),this._ended=!1,this.pause(),this._setCursor(this.options.cursor.active),this.element.removeClass(this.options.states.inactive).addClass(this.options.states.active);var r=this._mbind=function(i){return function(e){return t._mouseMove(e,d,o,a,i)}}(this._index),s=this._ubind=function(i){return function(e){return t._endDrag(e,d,o,a,i)}}(this._index);return this.$document.on(this.options.events.move,r),this.$document.on(this.options.events.end,s),this._mouseMoveInfo=[{e:e,o:d,mx:o,my:a,sindex:this._index}],window.navigator.userAgent.indexOf("MSIE ")>0?!1:void this.element.find(".amp-spin").each(function(t,n){var d=i(n).data().ampAmpSpin;d&&d._startDrag&&d._startDrag(e)})}},_mouseMove:function(i,e,t,n,d){if(this.options.gesture.enabled&&i.originalEvent&&i.originalEvent.touches&&i.originalEvent.touches[0]&&i.originalEvent.touches.length!=this.options.gesture.fingers)return!0;var o=this._resolveEventCoords(i),a=o.x-e.left,r=o.y-e.top,s=a-t,h=r-n,u=(this._mouseMoveInfo,{e:i,mx:a,my:r});return this.moveDir||(Math.abs(s)<Math.abs(h)?this.moveDir="vert":Math.abs(s)>Math.abs(h)?this.moveDir="horz":this.moveDir=this.options.orientation),this.options.orientation!=this.moveDir?!0:(this._mouseMoveInfo.push(u),this._mouseMoveInfo.length>2&&this._mouseMoveInfo.shift(),this._moveSpin("horz"==this.options.orientation?s:h,i,d),this.options.orientation==this.moveDir?!1:void 0)},_moveSpin:function(i,e,t){var n=Math.round(i/this.options.dragDistance*(this._count-1));"normal"==this.options.dir&&(n=0-n),this._track("move",{domEvent:e,distFromStart:i});var d=this._numToIndex(n+t);d!=this._index&&(this._checkLoop(d),this.goTo(d))},_checkLoop:function(i){Math.abs(this._index-i)>2&&(this._index>i?this._track("looped","forwards"):this._track("looped","backwards"))},_endDrag:function(i,e,t,n,d){"horz"==this.moveDir&&(i.preventDefault(),i.stopPropagation()),this.moveDir=null;var o=this;if(!this._ended&&(this._started=!1,this._ended=!0,this._track("endMove",{domEvent:i}),this.$document.off(this.options.events.end,this._ubind),this.$document.off(this.options.events.move,this._mbind),clearInterval(this._timer),this._setCursor(this.options.cursor.inactive),this.element.removeClass(this.options.states.active).addClass(this.options.states.inactive),this.options.momentum&&2==this._mouseMoveInfo.length)){var a=this._mouseMoveInfo,r=a[1].e.timeStamp-a[0].e.timeStamp,s="horz"==this.options.orientation?a[1].mx-a[0].mx:a[1].my-a[0].my;if(0==s||0==r)return;var h=s/r,u=h,p=this.options.friction,c="horz"==this.options.orientation?a[1].mx-t:a[1].my-n,m=0,l=0;if(Math.abs(c)<this.options.minDistance)return;var v=null,f=function(e){var t;t=v?e-v:15,v=e;for(var n=t/10;n>0;)u-=(u-u*p)*Math.min(n,1),n-=1;m+=u*t,l+=t,o._moveSpin(m+c,i,d),Math.abs(u)>.1&&window.requestAnimationFrame(f)};return void window.requestAnimationFrame(f)}},_calcSize:function(){this._super(),this.progressIndicator&&this.progressIndicator.visible&&(this.progressIndicator.css("top",(parseInt(i(this.element.find("li")[0]).css("height"))-parseInt(this.progressIndicator.css("height")))/2+"px"),this.progressIndicator.css("left",(parseInt(i(this.element.find("li")[0]).css("width"))-parseInt(this.progressIndicator.css("width")))/2+"px"))},_getIndex:function(i){var e=this.element.children();if(i>e.length){if(!this.options.loop)return;i=1}else if(1>i){if(!this.options.loop)return;i=e.length}},_direction:function(i){for(var e=0,t=0,n=i;n!=this._index;)n>this._count?n=0:n++,e++;for(n=i;n!=this._index;)1>n?n=this._count:n--,t++;return e>t?!0:!1},_loopIndex:function(i,e,t){for(var n=i?1:-1,d=e,o=0;t>o;o++)d+n>this._count?d=1:1>d+n?d=this._count:d+=n;return d},_loopCount:function(i,e,t){for(var n=i?1:-1,d=e,o=0;d!=t;)o++,d+n>this._count?d=1:1>d+n?d=this._count:d+=n;return o},_animate:function(i){var e=this.element,t=e.children("li").eq(this._index-1),n=e.children("li").eq(i-1);this._index!=i&&(n.addClass(this.options.states.selected+" "+this.options.states.seen),this.isIE?(n.css("z-index",1),t.css("z-index",-1)):(n.css("display","block"),t.css("display","none")),t.removeClass(this.options.states.selected),this._setIndex(i),this._setIndex(i,!0))},_track:function(i,e){this._trigger(i,null,e),window.amp&&amp.stats&&amp.stats.event&&amp.stats.event(this.element,"spin",i,e)},_destroy:function(){this.element.removeClass("amp"),this.element.removeClass("amp-spin"),this.element.removeClass(this.options.states.active),this.element.removeClass(this.options.states.inactive),this.element.css("cursor",""),this.element.find(".amp-progress").remove(),this.element.find(".amp-loading").remove(),this._removeEmptyAttributeHelper(this.element);var e=this.element.children();e.removeClass("amp-frame"),e.removeClass(this.options.states.selected),e.removeClass(this.options.states.seen),e.css("display","");for(var t=0,n=e.length;n>t;t++)this._removeEmptyAttributeHelper(i(e[t]));var d=e.find("img");d.removeClass("amp amp-main-img, amp-image"),d.css("display","");for(var t=0,n=d.length;n>t;t++)this._removeEmptyAttributeHelper(i(d[t]))}})}(jQuery),"undefined"!=typeof videojs&&videojs.plugin("resolutions",function(i){var e=this;if("undefined"!=typeof vjs){vjs.reduce=function(i,e,t,n){if(i&&0!==i.length){for(var d=0,o=i.length;o>d;d++)t=e.call(i,t,i[d],d);return t}},this.resolutions_={options_:{},stopStream:function(){switch(e.techName){case"Html5":break;case"Flash":e.tech.el_.vjs_stop()}e.src("")},removeSources:function(i){var t=e.el_.getElementsByTagName("video")[0];if("Html5"===e.techName&&t)for(var n=t.getElementsByTagName("source"),d=0;d<n.length;d++)t.removeChild(n[d])},bucketByTypes:function(i){return vjs.reduce(i,function(i,e,t){return(i[e.type]=i[e.type]||[]).push(e),i},{},e)},selectSource:function(i){this.removeSources();var e=this.bucketByTypes(i),t=this.selectTypeAndTech(i);return t?(this.options_.sourceResolutions=e[t.type],this.selectResolution(this.options_.sourceResolutions)):!1},selectTypeAndTech:function(i){for(var t,n,d=0,o=e.options_.techOrder;d<o.length;d++)if(t=videojs.capitalize(o[d]),n=window.videojs[t],n.isSupported())for(var a=0,r=i;a<r.length;a++){var s=r[a];if(n.canPlaySource(s))return{type:s.type,tech:t}}},selectResolution:function(i){var t=0,n=!!window.localStorage;videojs.obj.each(i,function(i,e){e.index=parseInt(i,10),e["data-default"]&&(t=e.index)},e);var d=t;if(n){var o=parseInt(window.localStorage.getItem("videojs_preferred_res"),10);isNaN(o)||(d=o)}var a=i.length-1,r=d>a?a:d;return i[r]}},e.resolution=function(){return this.cache_.src.res},e.changeResolution=function(i){if(this.cache_.src===i.src)return this.trigger("resolutionchange"),this;var e=this.currentTime(),t=this.paused();this.pause(),this.resolutions_.stopStream(),"Html5"===this.techName?this.src(i.src):this.loadTech(this.techName,{src:i.src}),this.ready(function(){this.one("loadeddata",vjs.bind(this,function(){this.currentTime(e)})),this.trigger("resolutionchange"),t||(this.load(),this.play()),vjs.setLocalStorage("videojs_preferred_res",parseInt(i.index,10))})};var t=videojs.MenuItem.extend({init:function(i,e){e.label=e.source["data-res"],videojs.MenuItem.call(this,i,e),this.source=e.source,this.resolution=e.source["data-res"],this.player_.one("loadstart",vjs.bind(this,this.update)),this.player_.on("resolutionchange",vjs.bind(this,this.update))}});t.prototype.onClick=function(){videojs.MenuItem.prototype.onClick.call(this),this.player_.changeResolution(this.source)},t.prototype.update=function(){var i=this.player_;i.cache_.src===this.source.src?this.selected(!0):this.selected(!1)};var n=videojs.MenuButton.extend({init:function(i,e){videojs.MenuButton.call(this,i,e),this.items.length<=1&&this.hide()}});n.prototype.sourceResolutions_,n.prototype.sourceResolutions=function(){return this.sourceResolutions_},n.prototype.onClick=function(i){if(i.target.className.match(/vjs-control-content/))this[this.el_.className.match(/touched/)?"removeClass":"addClass"]("touched");else{for(var e=$(".vjs-menu-button"),t=0;t<e.length;t++)videojs.removeClass(e[t],"touched");this.removeClass("touched")}},n.prototype.createItems=function(){for(var i=this.sourceResolutions_=this.player_.resolutions_.options_.sourceResolutions,e=[],n=0;n<i.length;n++)e.push(new t(this.player_,{source:this.sourceResolutions_[n]}));return e};var d=n.extend({init:function(i,e,t){n.call(this,i,e,t),this.el_.setAttribute("aria-label","Resolutions Menu"),this.el_.setAttribute("id","vjs-resolutions-button")}});d.prototype.kind_="resolutions",d.prototype.buttonText="Resolutions",d.prototype.className="vjs-resolutions-button",videojs.obj.merge(e.controlBar.options_.children,{resolutionsButton:{}});var o=e.resolutions_.selectSource(e.options_.sources);e.ready(function(){e.changeResolution(o);var i=new d(e);e.controlBar.addChild(i),delete e.controlBar.options_.children.resolutionsButton})}});