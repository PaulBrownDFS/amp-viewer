!function(i,o){var n=0,t=Array.prototype.slice,e=i.cleanData;i.cleanData=function(o){for(var n,t=0;null!=(n=o[t]);t++)try{i(n).triggerHandler("remove")}catch(r){}e(o)},i.widget=function(n,t,e){var r,l,s,a,c={},u=n.split(".")[0];n=n.split(".")[1],r=u+"-"+n,e||(e=t,t=i.Widget),i.expr[":"][r.toLowerCase()]=function(o){return!!i.data(o,r)},i[u]=i[u]||{},l=i[u][n],s=i[u][n]=function(i,n){return this._createWidget?(arguments.length&&this._createWidget(i,n),o):new s(i,n)},i.extend(s,l,{version:e.version,_proto:i.extend({},e),_childConstructors:[]}),a=new t,a.options=i.widget.extend({},a.options),i.each(e,function(n,e){return i.isFunction(e)?(c[n]=function(){var i=function(){return t.prototype[n].apply(this,arguments)},o=function(i){return t.prototype[n].apply(this,i)};return function(){var n,t=this._super,r=this._superApply;return this._super=i,this._superApply=o,n=e.apply(this,arguments),this._super=t,this._superApply=r,n}}(),o):(c[n]=e,o)}),s.prototype=i.widget.extend(a,{widgetEventPrefix:l?a.widgetEventPrefix||n:n},c,{constructor:s,namespace:u,widgetName:n,widgetFullName:r}),l?(i.each(l._childConstructors,function(o,n){var t=n.prototype;i.widget(t.namespace+"."+t.widgetName,s,n._proto)}),delete l._childConstructors):t._childConstructors.push(s),i.widget.bridge(n,s)},i.widget.extend=function(n){for(var e,r,l=t.call(arguments,1),s=0,a=l.length;a>s;s++)for(e in l[s])r=l[s][e],l[s].hasOwnProperty(e)&&r!==o&&(n[e]=i.isPlainObject(r)?i.isPlainObject(n[e])?i.widget.extend({},n[e],r):i.widget.extend({},r):r);return n},i.widget.bridge=function(n,e){var r=e.prototype.widgetFullName||n;i.fn[n]=function(l){var s="string"==typeof l,a=t.call(arguments,1),c=this;return l=!s&&a.length?i.widget.extend.apply(null,[l].concat(a)):l,s?this.each(function(){var t,e=i.data(this,r);return e?i.isFunction(e[l])&&"_"!==l.charAt(0)?(t=e[l].apply(e,a),t!==e&&t!==o?(c=t&&t.jquery?c.pushStack(t.get()):t,!1):o):i.error("no such method '"+l+"' for "+n+" widget instance"):i.error("cannot call methods on "+n+" prior to initialization; attempted to call method '"+l+"'")}):this.each(function(){var o=i.data(this,r);o?o.option(l||{})._init():i.data(this,r,new e(l,this))}),c}},i.Widget=function(){},i.Widget._childConstructors=[],i.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(o,t){t=i(t||this.defaultElement||this)[0],this.element=i(t),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=i.widget.extend({},this.options,this._getCreateOptions(),o),this.bindings=i(),this.hoverable=i(),this.focusable=i(),t!==this&&(i.data(t,this.widgetFullName,this),this._on(!0,this.element,{remove:function(i){i.target===t&&this.destroy()}}),this.document=i(t.style?t.ownerDocument:t.document||t),this.window=i(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:i.noop,_getCreateEventData:i.noop,_create:i.noop,_init:i.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(i.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:i.noop,widget:function(){return this.element},option:function(n,t){var e,r,l,s=n;if(0===arguments.length)return i.widget.extend({},this.options);if("string"==typeof n)if(s={},e=n.split("."),n=e.shift(),e.length){for(r=s[n]=i.widget.extend({},this.options[n]),l=0;e.length-1>l;l++)r[e[l]]=r[e[l]]||{},r=r[e[l]];if(n=e.pop(),1===arguments.length)return r[n]===o?null:r[n];r[n]=t}else{if(1===arguments.length)return this.options[n]===o?null:this.options[n];s[n]=t}return this._setOptions(s),this},_setOptions:function(i){var o;for(o in i)this._setOption(o,i[o]);return this},_setOption:function(i,o){return this.options[i]=o,"disabled"===i&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!o).attr("aria-disabled",o),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(n,t,e){var r,l=this;"boolean"!=typeof n&&(e=t,t=n,n=!1),e?(t=r=i(t),this.bindings=this.bindings.add(t)):(e=t,t=this.element,r=this.widget()),i.each(e,function(e,s){function a(){return n||l.options.disabled!==!0&&!i(this).hasClass("ui-state-disabled")?("string"==typeof s?l[s]:s).apply(l,arguments):o}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||i.guid++);var c=e.match(/^(\w+)\s*(.*)$/),u=c[1]+l.eventNamespace,k=c[2];k?r.delegate(k,u,a):t.bind(u,a)})},_off:function(i,o){o=(o||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,i.unbind(o).undelegate(o)},_delay:function(i,o){function n(){return("string"==typeof i?t[i]:i).apply(t,arguments)}var t=this;return setTimeout(n,o||0)},_hoverable:function(o){this.hoverable=this.hoverable.add(o),this._on(o,{mouseenter:function(o){i(o.currentTarget).addClass("ui-state-hover")},mouseleave:function(o){i(o.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(o){this.focusable=this.focusable.add(o),this._on(o,{focusin:function(o){i(o.currentTarget).addClass("ui-state-focus")},focusout:function(o){i(o.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(o,n,t){var e,r,l=this.options[o];if(t=t||{},n=i.Event(n),n.type=(o===this.widgetEventPrefix?o:this.widgetEventPrefix+o).toLowerCase(),n.target=this.element[0],r=n.originalEvent)for(e in r)e in n||(n[e]=r[e]);return this.element.trigger(n,t),!(i.isFunction(l)&&l.apply(this.element[0],[n].concat(t))===!1||n.isDefaultPrevented())}},i.each({show:"fadeIn",hide:"fadeOut"},function(o,n){i.Widget.prototype["_"+o]=function(t,e,r){"string"==typeof e&&(e={effect:e});var l,s=e?e===!0||"number"==typeof e?n:e.effect||n:o;e=e||{},"number"==typeof e&&(e={duration:e}),l=!i.isEmptyObject(e),e.complete=r,e.delay&&t.delay(e.delay),l&&i.effects&&i.effects.effect[s]?t[o](e):s!==o&&t[s]?t[s](e.duration,e.easing,r):t.queue(function(n){i(this)[o](),r&&r.call(t[0]),n()})}})}(jQuery);var amp=amp||{};!function(){function i(i){var o=[];for(var n in i)i.hasOwnProperty(n)&&o.push(n+"="+i[n]);return o.join("&")}function o(i,o){for(var n=i.split("&"),t=[],e=0;e<n.length;e++){var r=n[e].split("="),l={};o?o(r,l):l[r[0]]=r[1],t.push(l)}return t}function n(i){return"[object Array]"===Object.prototype.toString.call(i)}amp.di={},amp.stats={},function(){for(var i=0,o=["webkit","moz"],n=0;n<o.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[o[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[o[n]+"CancelAnimationFrame"]||window[o[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(o,n){var t=(new Date).getTime(),e=Math.max(0,16-(t-i)),r=window.setTimeout(function(){o(t+e)},e);return i=t+e,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(i){clearTimeout(i)})}();var t=t||{};t.stringify=t.stringify||function(i){var o=typeof i;if("object"!=o||null===i)return"string"==o&&(i='"'+i+'"'),String(i);var n,e,r=[],l=i&&i.constructor==Array;for(n in i)i.hasOwnProperty(n)&&(e=i[n],o=typeof e,"string"==o?e='"'+e+'"':"object"==o&&null!==e&&(e=t.stringify(e)),r.push((l?"":'"'+n+'":')+String(e)));return(l?"[":"{")+String(r)+(l?"]":"}")},t.parse=t.parse||function(i){if("string"!=typeof i||!i)return null;var o=/^[\],:{}\s]*$/,n=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,t=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,e=/(?:^|:|,)(?:\s*\[)+/g,r=/^\s+|\s+$/g;return o.test(i.replace(r,"").replace(n,"@").replace(t,"]").replace(e,""))?new Function("return "+i)():void 0},function(){var i,o,n,t;!function(){var e={},r={};i=function(i,o,n){e[i]={deps:o,callback:n}},t=n=o=function(i){function n(o){if("."!==o.charAt(0))return o;for(var n=o.split("/"),t=i.split("/").slice(0,-1),e=0,r=n.length;r>e;e++){var l=n[e];if(".."===l)t.pop();else{if("."===l)continue;t.push(l)}}return t.join("/")}if(t._eak_seen=e,r[i])return r[i];if(r[i]={},!e[i])throw new Error("Could not find module "+i);for(var l,s=e[i],a=s.deps,c=s.callback,u=[],k=0,d=a.length;d>k;k++)"exports"===a[k]?u.push(l={}):u.push(o(n(a[k])));var p=c.apply(this,u);return r[i]=l||p}}(),i("promise/all",["./utils","exports"],function(i,o){"use strict";function n(i){var o=this;if(!t(i))throw new TypeError("You must pass an array to all.");return new o(function(o,n){function t(i){return function(o){r(i,o)}}function r(i,n){s[i]=n,0===--a&&o(s)}var l,s=[],a=i.length;0===a&&o([]);for(var c=0;c<i.length;c++)l=i[c],l&&e(l.then)?l.then(t(c),n):r(c,l)})}var t=i.isArray,e=i.isFunction;o.all=n}),i("promise/asap",["exports"],function(i){"use strict";function o(){return function(){process.nextTick(e)}}function n(){var i=0,o=new a(e),n=document.createTextNode("");return o.observe(n,{characterData:!0}),function(){n.data=i=++i%2}}function t(){return function(){c.setTimeout(e,1)}}function e(){for(var i=0;i<u.length;i++){var o=u[i],n=o[0],t=o[1];n(t)}u=[]}function r(i,o){var n=u.push([i,o]);1===n&&l()}var l,s="undefined"!=typeof window?window:{},a=s.MutationObserver||s.WebKitMutationObserver,c="undefined"!=typeof global?global:void 0===this?window:this,u=[];l="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?o():a?n():t(),i.asap=r}),i("promise/config",["exports"],function(i){"use strict";function o(i,o){return 2!==arguments.length?n[i]:void(n[i]=o)}var n={instrument:!1};i.config=n,i.configure=o}),i("promise/polyfill",["./promise","./utils","exports"],function(i,o,n){"use strict";function t(){var i;i="undefined"!=typeof global?global:"undefined"!=typeof window&&window.document?window:self;var o="Promise"in i&&"resolve"in i.Promise&&"reject"in i.Promise&&"all"in i.Promise&&"race"in i.Promise&&function(){var o;return new i.Promise(function(i){o=i}),r(o)}();o||(i.Promise=e)}var e=i.Promise,r=o.isFunction;n.polyfill=t}),i("promise/promise",["./config","./utils","./all","./race","./resolve","./reject","./asap","exports"],function(i,o,n,t,e,r,l,s){"use strict";function a(i){if(!L(i))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof a))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._subscribers=[],c(i,this)}function c(i,o){function n(i){x(o,i)}function t(i){m(o,i)}try{i(n,t)}catch(e){t(e)}}function u(i,o,n,t){var e,r,l,s,a=L(n);if(a)try{e=n(t),l=!0}catch(c){s=!0,r=c}else e=t,l=!0;p(o,e)||(a&&l?x(o,e):s?m(o,r):i===S?x(o,e):i===j&&m(o,e))}function k(i,o,n,t){var e=i._subscribers,r=e.length;e[r]=o,e[r+S]=n,e[r+j]=t}function d(i,o){for(var n,t,e=i._subscribers,r=i._detail,l=0;l<e.length;l+=3)n=e[l],t=e[l+o],u(o,n,t,r);i._subscribers=null}function p(i,o){var n,t=null;try{if(i===o)throw new TypeError("A promises callback cannot return that same promise.");if(v(o)&&(t=o.then,L(t)))return t.call(o,function(t){return n?!0:(n=!0,void(o!==t?x(i,t):b(i,t)))},function(o){return n?!0:(n=!0,void m(i,o))}),!0}catch(e){return n?!0:(m(i,e),!0)}return!1}function x(i,o){i===o?b(i,o):p(i,o)||b(i,o)}function b(i,o){i._state===_&&(i._state=y,i._detail=o,h.async(f,i))}function m(i,o){i._state===_&&(i._state=y,i._detail=o,h.async($,i))}function f(i){d(i,i._state=S)}function $(i){d(i,i._state=j)}var h=i.config,v=(i.configure,o.objectOrFunction),L=o.isFunction,g=(o.now,n.all),q=t.race,C=e.resolve,B=r.reject,E=l.asap;h.async=E;var _=void 0,y=0,S=1,j=2;a.prototype={constructor:a,_state:void 0,_detail:void 0,_subscribers:void 0,then:function(i,o){var n=this,t=new this.constructor(function(){});if(this._state){var e=arguments;h.async(function(){u(n._state,t,e[n._state-1],n._detail)})}else k(this,t,i,o);return t},"catch":function(i){return this.then(null,i)}},a.all=g,a.race=q,a.resolve=C,a.reject=B,s.Promise=a}),i("promise/race",["./utils","exports"],function(i,o){"use strict";function n(i){var o=this;if(!t(i))throw new TypeError("You must pass an array to race.");return new o(function(o,n){for(var t,e=0;e<i.length;e++)t=i[e],t&&"function"==typeof t.then?t.then(o,n):o(t)})}var t=i.isArray;o.race=n}),i("promise/reject",["exports"],function(i){"use strict";function o(i){var o=this;return new o(function(o,n){n(i)})}i.reject=o}),i("promise/resolve",["exports"],function(i){"use strict";function o(i){if(i&&"object"==typeof i&&i.constructor===this)return i;var o=this;return new o(function(o){o(i)})}i.resolve=o}),i("promise/utils",["exports"],function(i){"use strict";function o(i){return n(i)||"object"==typeof i&&null!==i}function n(i){return"function"==typeof i}function t(i){return"[object Array]"===Object.prototype.toString.call(i)}var e=Date.now||function(){return(new Date).getTime()};i.objectOrFunction=o,i.isFunction=n,i.isArray=t,i.now=e}),o("promise/polyfill").polyfill()}(),amp.conf={cache_window:216e5,default_size:190,client_id:null,di_basepath:"http://i1.adis.ws/",content_basepath:"http://c1.adis.ws/",err_img:null},function(){amp.init=function(i){for(var o in i)amp.conf.hasOwnProperty(o)&&(amp.conf[o]=i[o])}}();var e=amp.indexOf=function(i,o){"use strict";if(null==i)throw new TypeError;var n=Object(i),t=n.length>>>0;if(0===t)return-1;var e=0;if(arguments.length>1&&(e=Number(arguments[2]),e!=e?e=0:0!=e&&e!=1/0&&e!=-(1/0)&&(e=(e>0||-1)*Math.floor(Math.abs(e)))),e>=t)return-1;for(var r=e>=0?e:Math.max(t-Math.abs(e),0);t>r;r++)if(r in n&&n[r]===o)return r;return-1},r=function(){var i=Object.prototype.hasOwnProperty,o=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],t=n.length;return function(e){if("object"!=typeof e&&("function"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");var r,l,s=[];for(r in e)i.call(e,r)&&s.push(r);if(o)for(l=0;t>l;l++)i.call(e,n[l])&&s.push(n[l]);return s}}();!function(){function o(i){var o=0;for(var n in i)i.hasOwnProperty(n)&&++o;return o}amp.getAssetURL=function(i){return amp.conf.di_basepath+i.type+"/"+amp.conf.client_id+"/"+i.name};var t=function(i){var o=[];if(i.items||i.set&&i.set.items)for(var n=i.items||i.set.items,e=0;e<n.length;e++){var r=n[e];"video"==r.type?o.push({name:r.name,type:"v"}):(r.items||r.set&&r.set.items)&&(o=o.concat(t(r)))}return o},r=function(i,o){for(var n=[],t=0;t<i.length;t++){for(var e=i[t],r=!1,l=0;l<o.length;l++){var s=o[l];if(s.name===e.name&&s.type===e.type){r=!0;break}}r||n.push(e)}return n},l=function(i,o,n){for(var t in o)if(o.hasOwnProperty(t)){if(-1!=e(n,t))continue;i[t]=o[t]}return i},s=function(i){for(var o in i)if(i.hasOwnProperty(o))for(var n=i[o],t=0;t<n.media.length;t++)n.media[t].htmlCodec=amp.videoToFormat(n.media[t]);return i},a=function(i,o){for(var n in i)if(i.hasOwnProperty(n)){var t=i[n];t.media=amp.sortVideoSource(t.media,o)}return i},c=function(i,o){for(var n in i){if(i.hasOwnProperty(n))var t=i[n],e=function(i,o){if(i.items||i.set&&i.set.items)for(var n=i.items||i.set.items,t=0;t<n.length;t++){var r=n[t];"video"==r.type&&r.name==o.name?r=l(r,o,["url"]):(r.items||r.set&&r.set.items)&&(r=e(r,o))}return i};o=e(o,t)}return o},u=function(i,o){for(var n in i){if(i.hasOwnProperty(n))var t=i[n],e=function(i,o){if(i.items||i.set&&i.set.items)for(var n=i.items||i.set.items,t=0;t<n.length;t++){var r=n[t];"video"==r.type?n.splice(t,1):(r.items||r.set&&r.set.items)&&(r=e(r,o))}return i};o=e(o,t)}return o};amp.get=function(i,e,l,k,d){var p=0,x=!0,b={},f={},$=0,d=d||6e4,h=function(o){return function(n,e){var l=t(e),d=r(l,i),x=function(){p++,b[n]=e,b[n].url=o,b[n].name=b[n].name?b[n].name:n,p==$&&L()};d.length?amp.get(d,function(i){i=s(i),k&&(i=a(i,k)),e=c(i,e),x()},function(i){e=u(i,e),x()}):(e.media&&(e=s({d:e}).d,k&&(e=a({d:e},k).d)),x())}},v=function(i){return function(o,n){p++,f[o]=n,f[o].url=i,x=!0,p==$&&L()}},L=function(){o(b)>0&&e&&e(b),o(f)>0&&l&&l(f)},g=function(i){return i&&i.type&&i.name?!0:!1};if(n(i)){$=i.length;for(var q=0;$>q;q++)if(g(i[q])){var C=amp.getAssetURL(i[q]);m(C+".js",i[q].name,h(C),v(C),i.transform,d)}}else{if($=1,!g(i))return;var C=amp.getAssetURL(i);m(amp.getAssetURL(i)+".js",i.name,h(C),v(C),i.transform,d)}};var k=function(){var i=new Date;return i-=i%amp.conf.cache_window},d=function(i){var o=x[i];o&&o.dispose(),delete p[i],delete b[i],delete x[i]},p=[],x=[],b=[];amp.jsonCache={},amp.jsonReturn=function(i,o){if(p[i]){clearTimeout(b[i]);for(var n=0;n<p[i].length;n++){var t=p[i][n];"error"==o.status?t.fail&&t.fail(i,o):(amp.jsonCache[i]=o,t.win&&t.win(i,o))}d(i)}},amp.get.createScript=function(i,o){var n=document.createElement("script");return n.src=i,n.onerror=o,n.dispose=function(){document.body.removeChild(n)},document.body.appendChild(n),n},amp.clearJsonCache=function(){amp.jsonCache={}};var m=amp.jsonp=function(o,n,t,e,r,l){var l=l||6e4;if(r?r+="&":r="",amp.jsonCache[n])return void t(n,amp.jsonCache[n]);if(p[n])return void p[n].push({win:t,fail:e});p[n]=[{win:t,fail:e}],b[n]=setTimeout(function(){amp.jsonReturn(n,{status:"error",code:404,message:"Not Found",name:n})},l);var s=o+"?"+r+i({deep:!0,timestamp:k(),arg:"'"+n+"'",func:"amp.jsonReturn"});s+="&protocol=https";var a=amp.get.createScript(s,function(i){amp.jsonReturn(n,{status:"error",code:404,message:"Not Found",name:n})});x[n]=a}}(),function(){var i=10;amp.content=function(i,t,r,l){var l=l||6e4;n(i)||(i=[i]),e(i,l,function(i,n){i.length>0&&t(o(i)),n.length>0&&r(n)})};var o=function(i){for(var o=[],n=0;n<i.length;n++)for(var t=i[n].result.payload,e=0;e<t.length;e++){var r=t[e];r.name=r.key.split("/"),r.name=r.name[r.name.length-1],o.push(r)}return o},t=function(i){return amp.conf.content_basepath+"p/"+amp.conf.client_id+"/["+r(i)+"].js"},e=function(o,n,e){for(var r=[],l=[],s=Math.ceil(o.length/i),a=function(i,o){r.push({name:i,result:o}),u()},c=function(i,o){l.push({name:i,result:o}),u()},u=function(){r.length+l.length===s&&e&&e(r,l)},k=0;s>k;k++){var d=o.slice(k*i,k*i+i);amp.jsonp(t(o),d.join(","),a,c,n)}},r=function(i){for(var o=[],n=0;n<i.length;n++)o.push('"/c//'+i[n]+'"');return o.join(",")}}(),function(){amp.genHTML=function(i,o,e,r){if(i){var l={},s=function(i){var n=t(i,e,r);l[i.name]=n,o&&o.appendChild&&o.appendChild(n)};if(n(i))for(var a=0;a<i.length;a++)s(i[a]);else{if("object"!=typeof i)return;s(i)}return l}};var i=function(i){if(!i||!i.src&&!i.url)return!1;for(var o=i.isImage?i.url:i.src,n=amp.di.get(o),t=0;t<n.length;t++){var e=n[t];if(e.width&&"undefined"!=e.width||e.height&&"undefined"!=e.height)return!0}return!1};amp.videoToFormat=function(i){if(i){var o=i.format,n="",t="";switch(o&&o.toLowerCase()){case"flash video":o="flv";break;case"mpeg4":o="mp4"}switch(i["video.codec"]&&i["video.codec"].toLowerCase()){case"h264":break;case"theora":n="theora";break;case"vp8":n="vp8"}switch(i["audio.codec"]&&i["audio.codec"].toLowerCase()){case"aac":"mp4"==o&&(t="mp4a.40.2");break;case"vorbis":t="vorbis"}var e=o?"video/"+o:e;return""!=n&&(e+='; codecs="',e+=n,""!=t&&(e+=", "+t),e+='"'),e}},amp.genVideoHTML=function(o,n){o.src||(o.src=o.url);var t=document.createElement("div");t.setAttribute("id",o.name);var e=document.createElement("video");i(o)?e.setAttribute("poster",o.src):e.setAttribute("poster",amp.di.width(o.src,amp.conf.default_size));try{e.setAttribute("preload","auto")}catch(r){}e.setAttribute("controls","");var l,s=o.media;if(l=n?amp.sortVideoSource(s,n):s)for(var a=0;a<l.length;a++){var s=l[a],c=document.createElement("source");c.setAttribute("src",s.src),c.setAttribute("data-res",s.profileLabel),c.setAttribute("data-bitrate",s.bitrate),c.setAttribute("type",amp.videoToFormat(s)),e.appendChild(c)}return t.appendChild(e),t},amp.sortVideoSource=function(i,o){if(n(o)){if(o.length>0){for(var t=i.length,r=[],l=0;l<o.length;l++)for(var s=0;t>s;s++)(o[l]==i[s].profile||o[l]==i[s].profileLabel)&&r.push(i[s]);for(var s=0;t>s;s++)-1==e(o,i[s].profile)&&-1==e(o,i[s].profileLabel)&&r.push(i[s]);return r}}else if(!isNaN(o))return i.sort(function(i,n){var t=Math.abs(o-parseInt(i.bitrate)),e=Math.abs(o-parseInt(n.bitrate));return t-e});return i};var o=function(i){var o=i.split("/"),n=o[o.length-1];return n.split("?")[0]},t=function(n,e,l){var s;if(n.isImage||"img"==n.type){var s=document.createElement("img"),a=n.isImage?n.url:n.src;i(n)||(a=a+"?"+r(n)),e?s.setAttribute("data-amp-src",a):s.setAttribute("src",a),s.setAttribute("class","amp-main-img"),n.name?s.setAttribute("id",n.name):s.setAttribute("id",o(a))}else if("video"==n.type||n.media)s=amp.genVideoHTML(n,l);else if(n.items||n.set.items){var c=n.items||n.set.items,s=document.createElement("ul");s.setAttribute("id",n.name);for(var u=0;u<c.length;u++){var k=document.createElement("li");s.appendChild(k);var d=c[u];d.url=n.url,k.appendChild(t(d,e))}}return s},r=function(i){return i.width>i.height?"w="+amp.conf.default_size:"h="+amp.conf.default_size}}(),function(){var t=[{shortName:"cs",fullName:"grayscale",val:"gray"},{shortName:"dpi",fullName:"dpi",type:"number"},{shortName:"dpiFilter",fullName:"dpiFilter",type:"string"},{shortName:"resize",fullName:"resize",type:"boolean"},{shortName:"filter",fullName:"filter",type:"string"},{shortName:"upscale",fullName:"upscale",type:"boolean"},{shortName:"bg",fullName:"background",type:"string"},{shortName:"qlt",fullName:"quality",type:"number"},{shortName:"cm",fullName:"compositeMode",type:"string"},{shortName:"cs",fullName:"colourSpace",type:"string"},{shortName:"maxW",fullName:"maxWidth",type:"number"},{shortName:"maxH",fullName:"maxHeight",type:"number"},{shortName:"template",fullName:"template",type:"array"},{shortName:"w",fullName:"width",type:"number"},{shortName:"h",fullName:"height",type:"number"},{shortName:"fmt",fullName:"format",type:"string"},{shortName:"unsharp",fullName:"sharpen",type:"string"},{shortName:"crop",fullName:"crop",type:"string"},{shortName:"pcrop",fullName:"preCrop",type:"string"},{shortName:"img404",fullName:"missingImage",type:"string"},{shortName:"sm",fullName:"scaleMode",type:"string"},{shortName:"strip",fullName:"strip",type:"boolean"},{shortName:"orig",fullName:"original",type:"boolean"}],e=function(i,o,n){for(var e=0;e<i.length;e++){"object"==typeof i[e]&&r(i[e]);for(var l in i[e])if(i[e].hasOwnProperty(l))for(var s=0;s<t.length;s++)t[s][o]==l&&(t[s].val&&(i[e][t[s][o]]=t[s].val),t[s][n]!=t[s][o]&&(i[e][t[s][n]]=i[e][l],delete i[e][l]))}return i},l=function(i){for(var o={},n=i.length;n--;){var t="object"==typeof i[n]&&r(i[n]);o[t]&&"template"!=t&&i.splice(n,1),o[t]=!0}return i},s=function(n,t,e){var s=n.split("?"),a=s[1]?o(s[1],function(i,o){i[1]?o[i[0]]=i[1]:o.template=i[0]}):[];if(!a)return!1;if(!t&&!e)return l(a);if(a=l(a),!t&&e){for(var c=[],u=0;u<a.length;u++)if(a[u][e]){if("template"!=e)return a[u][e];c.push(a[u][e])}return c.length>0?c:!1}a=l(a.concat(t));for(var k=[],u=0;u<a.length;u++){var d=r(a[u]);if("template"==d){var p=a[u][d];if("[object Array]"===Object.prototype.toString.call(p))for(var x=0;x<p.length;x++)k.push(p[x]);else k.push(p)}else k.push(i(a[u]))}return s[0]+"?"+k.join("&")},a=function(i,o,n,t){for(var e in i)if(i.hasOwnProperty(e))if(null!=i[e]&&"object"==typeof i[e]){if(("img"==i[e].type||"set"==i[e].type||"video"==i[e].type)&&n&&n.exclude){for(var r=!1,l=0;l<n.exclude.length;l++)i[e].name==n.exclude[l]&&(r=!0);if(r)continue}a(i[e],o,n,t)}else("src"==e&&("img"==i.type||"set"==i.type||"video"==i.type)||"url"==e&&i.isImage)&&(i[e]=s(i[e],o,t));return i};amp.di.get=function(i){return i?e(s(i),"shortName","fullName"):!1},amp.di.set=function(i,o,t,r){return o&&(o=n(o)?e(o,"fullName","shortName"):e([o],"fullName","shortName")),"string"!=typeof i?a(i,o,t,r):s(i,o,r)},function(){for(var i=0;i<t.length;i++)!function(i){amp.di[i.fullName]=function(o,n){if(o){var t="grayscale"!=i.fullName?i.shortName:null,e="undefined"!=typeof i.val?i.val:n;if("undefined"!=typeof e){var r={};return r[i.shortName]=e,amp.di.set(o,r,null,t)}var l=amp.di.set(o,null,null,t);switch(i.type){case"number":return Number(l);case"boolean":if("true"==l)return!0;if("false"==l)return!1;case"string":default:return l}}}}(t[i])}()}(),function(){var i=[];i.all=[],amp.stats.bind=function(t){if("function"==typeof t)return void i.all.push(t);if(n(t))for(var e=0;e<t.length;e++)amp.stats.bind(t[e]);else"object"==typeof t&&t.cb&&(t.type&&t.event?o(t.type+"."+t.event,t.cb):t.type?o(t.type,t.cb):t.event&&o(t.event,t.cb))};var o=function(o,n){i[o]?i[o].push(n):i[o]=[n]};amp.stats.event=function(o,n,t,e){var r=[];r=r.concat(i.all,i[n]?i[n]:[],i[t]?i[t]:[],i[n+"."+t]?i[n+"."+t]:[]);for(var l=0;l<r.length;l++)r[l](o,n,t,e)}}()}(),function(i){i.widget("amp.ampStack",{options:{delay:3e3,autoplay:!1,loop:!0,fade:!1,start:1,responsive:!0,center:!1,parentSize:!1,gesture:{enabled:!1,fingers:1,dir:"horz",distance:50},states:{selected:"amp-selected",seen:"amp-seen"}},_getCreateOptions:function(){var o=this.element.data().ampStack;return o?i.extend(!0,{},this.options,o):this.options},_create:function(){var o=this,n=this._children=this.element.children();this.canTouch=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),this.element.addClass("amp"),this.element.addClass("amp-stack"),this.count=this._children.length,this._index=Math.max(1,Math.min(this.options.start,this.count)),n.addClass("amp-layer"),n.css({display:"none"}),n.eq(this._index-1).css("display","block"),n.eq(this._index-1).addClass(this.options.states.selected+" "+this.options.states.seen),this._addGestures(),this.options.autoplay&&this.play(),setTimeout(function(i){return function(){return i._calcSize()}}(o),1),i(window).bind("resize",function(o){return function(){return setTimeout(i.proxy(o._calcSize,o),1)}}(o)),this._track("created",{index:this._index,canNext:this.canNext(),canPrev:this.canPrev()})},_addGestures:function(){if(this.options.gesture.enabled&&this.canTouch){this._startG=function(o){if(o.originalEvent&&o.originalEvent.touches&&o.originalEvent.touches[0]&&o.originalEvent.touches.length!=this.options.gesture.fingers)return!0;if(o.originalEvent&&o.originalEvent.target&&"range"===o.originalEvent.target.type)return!0;this.changed=!1,this.moved=!1,this.startTouchEvent=o;var o=this._getEvent(o);return this.startPos="horz"==this.options.gesture.dir?o.pageX-o.target.offsetLeft:o.pageY-o.target.offsetTop,i(window).on("touchmove",i.proxy(this._moveG,this)),i(window).on("touchcancel",i.proxy(this._stopG,this)),i(window).on("touchend",i.proxy(this._stopG,this)),!0},this._getEvent=function(i){return("touchend"==i.type||"touchcancel"==i.type)&&(i=this.lastEvent),i.originalEvent&&i.originalEvent.touches&&i.originalEvent.touches[0]&&(i=i.originalEvent.touches[0]),i},this._moveG=function(i){return i.originalEvent&&i.originalEvent.touches&&i.originalEvent.touches[0]&&i.originalEvent.touches.length!=this.options.gesture.fingers?!0:i.originalEvent&&i.originalEvent.target&&"range"===i.originalEvent.target.type?!0:(this.moved=!0,this.lastEvent=i,i=this._getEvent(i),("horz"==this.options.gesture.dir?i.pageX-this.startPos:i.pageY-this.startPos!=0)?!1:!0)},this._stopG=function(o){if(i(window).off("touchmove",i.proxy(this._moveG,this)),i(window).off("touchcancel",i.proxy(this._stopG,this)),i(window).off("touchend",i.proxy(this._stopG,this)),this.moved&&!this.changed){this.changed=!0,o=this._getEvent(o);var n="horz"==this.options.gesture.dir?o.pageX-o.target.offsetLeft:o.pageY-o.target.offsetTop,t=n-this.startPos;if(Math.abs(t)<this.options.gesture.distance)return;t>0?this.prev():this.next()}},this._children.on("touchstart",i.proxy(this._startG,this))}},_getIndex:function(i){var o=this._children;if(i>o.length){if(!this.options.loop)return i;for(;i>o.length;)i-=o.length}else if(1>i){if(!this.options.loop)return i;for(;1>i;)i+=o.length}return i},play:function(){var i=this;clearInterval(this.interval),this.interval=setInterval(function(){i.next()},this.options.delay),this._track("play",null)},pause:function(){clearInterval(this.interval),this._track("pause",null)},next:function(){this.goTo(this._index+1)},prev:function(){this.goTo(this._index-1)},redraw:function(){this._calcSize()},_calcSize:function(){var i,o;if(this.options.responsive&&this.options.width&&this.options.height&&"auto"!=this.options.width&&"auto"!=this.options.height)this.options.parentSize?(i=Math.round(this.element.parent().width()),o=Math.round(i*(this.options.height/this.options.width)),o>this.element.parent().height()&&(o=this.element.parent().height(),i=Math.round(o*(this.options.width/this.options.height))),this.element.width(i),this.element.height(o)):(i=Math.round(this.element.width()),o=Math.round(i*(this.options.height/this.options.width)),this.element.height(o)),this.options.center&&(this.element.css("margin-left",this.element.parent().width()/2-i/2+"px"),this.element.css("margin-top",this.element.parent().height()/2-o/2+"px"));else{if(this.options.width&&"auto"!=this.options.width)this.element.width(this.options.width);else if("auto"==this.options.width){for(var n=0,t=0;t<this.count;t++)for(var t=0;t<this.count;t++){var e=this._children.eq(t),r=e.css("display");e.css("display","block"),n=Math.max(e.outerWidth(!0),n),e.css("display",r)}this.element.width(n)}if(this.options.height&&"auto"!=this.options.height)this.element.height(this.options.height);else if("auto"==this.options.height){for(var n=0,t=0;t<this.count;t++)for(var t=0;t<this.count;t++){var e=this._children.eq(t),r=e.css("display");e.css("display","block");var o=e.outerHeight(!0);n=Math.max(e.outerHeight(!0),n),e.css("display",r)}this.element.height(n)}}},_onFinish:function(){for(var i=1,o=this;0!=this._asyncMethods.length;){var n=this._asyncMethods.splice(0,1)[0];n.func&&n.args&&(setTimeout(function(){n&&n.func&&n.func.apply(o,n.args)},i),i++)}},visible:function(i,o){i!=this._visible&&(this._track("visible",{visible:i}),this._visible=i,this.callChildMethod(this._children.eq(this._index-1),"visible",i),i&&this._calcSize())},callChildMethod:function(o,n,t){var e=function(o){for(var r=0;r<o.length;r++){var l=!1,s=i(o[r]),a=s.data();for(var c in a)if(a.hasOwnProperty(c)){var u=a[c];u[n]&&"function"==typeof u[n]&&"amp"==c.substring(0,3)&&(u[n](t),l=!0)}l||e(s.children())}};e(o.children())},goTo:function(i,o,n){if(i=parseInt(i),!isNaN(i)){if(this._animating)return void this._asyncMethods.push({func:this.goTo,args:arguments});if(o||this._exeBinds(i,"goTo"),this._getIndex(i)!=this._index){if(i>this.count){if(!this.options.loop)return;for(;i>this.count;)i-=this.count;this._track("looped","forwards")}else if(1>i){if(!this.options.loop)return;for(;1>i;)i+=this.count;this._track("looped","backwards")}n||this._animate(i)}}},_exeBinds:function(o,n){if(this._boundArray)for(var t=0;t<this._boundArray.length;t++){var e=this._boundArray[t];if(!n||n==e.on){var r=i(e.selector),l=r.data();for(var s in l)if(l.hasOwnProperty(s)){var a=l[s];a[e.action]&&"amp"==s.substring(0,3)&&a[e.action](o,!0)}}}},_numToIndex:function(i){if(i>this.count){if(!this.options.loop)return this.count;for(;i>this.count;)i-=this.count}else if(1>i){if(!this.options.loop)return 1;for(;1>i;)i+=this.count}return i},bind:function(i){this._boundArray||(this._boundArray=[]),this._boundArray.push(i)},canPrev:function(){return this.options.loop||this._index>1},canNext:function(){return this.options.loop||this._index<this.count},_animate:function(i){var o=this.element,n=o.children("li").eq(this._index-1),t=o.children("li").eq(i-1);n.removeClass(this.options.states.selected),this.options.fade?n.fadeOut():n.css("display","none"),t.addClass(this.options.states.selected+" "+this.options.states.seen),this.options.fade?t.fadeIn():t.css("display","block"),this._setIndex(i)},_setIndex:function(i,o){if(!o){var n=this._children.eq(this._index-1),t=this._children.eq(i-1);this.callChildMethod(t,"visible",!0),
this.callChildMethod(n,"visible",!1)}this._index=i,this._track("change",{index:i,canPrev:this.canPrev(),canNext:this.canNext()})},_track:function(i,o){this._trigger(i,null,o),window.amp&&amp.stats&&amp.stats.event&&amp.stats.event(this.element,"stack",i,o)},_destroy:function(){this.element.removeClass("amp"),this.element.removeClass("amp-stack"),this._removeEmptyAttributeHelper(this.element);var o=this._children;o.removeClass("amp-layer"),o.removeClass(this.options.states.selected),o.removeClass(this.options.states.seen),o.css("display","");for(var n=0,t=o.length;t>n;n++)this._removeEmptyAttributeHelper(i(o[n]))},_removeEmptyAttributeHelper:function(i,o){for(var n=o||["class","style"],t=0,e=n.length;e>t;t++)i.attr(n[t])&&i.prop(n[t])||i.removeAttr(n[t])}})}(jQuery),function(i){i.widget("amp.ampCarousel",i.amp.ampStack,{options:{animDuration:250,easing:"",dir:"horz",animate:!0,layout:"standard",start:1,preferForward:!1,no3D:!1,thumbWidthExceed:0,gesture:{enabled:!1,fingers:2,distance:50},onActivate:{select:!0,goTo:!0},preloadNext:!0,responsive:!0,states:{visible:"amp-visible",partiallyVisible:"amp-partially-visible"}},_getCreateOptions:function(){var o=this.element.data().ampCarousel;return o?i.extend(!0,{},this.options,o):this.options},_layoutManagers:{},_create:function(){this._elms=[],this._visible=0,this._asyncMethods=[],this._canNext=!0;var o=this;if(this.options.delay=Math.max(this.options.delay,this.options.animDuration+1),this.options.animDuration=this.options.animate?this.options.animDuration:1,this.canTouch=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),this.element.addClass("amp"),this.element.addClass("amp-carousel"),this.element.wrapInner("<div class='amp-anim-container' style='width:100%;height:100%;position:absolute'></div>"),this._container=this.element.children().eq(0),this._containerPos=0,this._children=this.element.children().eq(0).children(),this.count=this._children.length,this._checkCSS3(),this._index=Math.max(1,Math.min(this.options.start,this.count)),this._selectedIndex=this._index,this._children.addClass("amp-slide"),this._calcSize(),this._chooseLayoutManager(),this._children.eq(this._index-1).addClass(this.options.states.selected),this.options.onActivate.goTo||this.options.onActivate.select)for(var n=0;n<this.count;n++){var t=function(){o.moved=!1,setTimeout(function(){i(window).on(this.canTouch?"touchmove":"mousemove",i.proxy(e,o))},1)},e=function(){o.moved=!0},r=function(n){var t=o;return function(r){return i(window).off(this.canTouch?"touchmove":"mousemove",i.proxy(e,o)),t.moved?!0:(t.options.onActivate.goTo&&t.goTo(n),t.options.onActivate.select&&t.select(n),!0)}}(n+1);this._children.eq(n).on(this.canTouch?"touchstart":"mousedown",i.proxy(t,o)),this._children.eq(n).on(this.canTouch?"touchend":"mouseup",i.proxy(r,o))}this._calcSize(),setTimeout(i.proxy(this._calcSize,this),1),this.options.responsive&&i(window).bind("resize",function(o){return function(){return setTimeout(i.proxy(o.redraw,o),1)}}(o)),this.options.autoplay&&this.play(),this._preloadNext(),this._track("created",{index:this._index,canNext:this.canNext(),canPrev:this.canPrev(),visible:this._visible,count:this.count})},_chooseLayoutManager:function(){var i,o;if("[object Array]"===Object.prototype.toString.call(this.options.layout)){for(var n=0;n<this.options.layout.length;n++)if(o=this._layoutManagers[this.options.layout[n]],this.checkFeatures(o)){i=o;break}}else o=this._layoutManagers[this.options.layout],this.checkFeatures(o)&&(i=o);i||(i=this._layoutManagers.standard),this._layoutManager=i.create(this)},_calcSize:function(){this._super(),this._layoutManager&&this._layoutManager.layout(this._index),this._track("resized",{index:this._index,canNext:this.canNext(),canPrev:this.canPrev(),visible:this._visible,count:this.count})},_firstCharLowerCase:function(i){return i.substr(0,1).toLowerCase()+i.substr(1)},_dashConvert:function(i){for(var o="",n=0;n<i.length;n++){var t=i.substr(n,1);o+=t===t.toUpperCase()?"-"+t.toLowerCase():t}return o},_checkCSS3:function(){var i=["","Webkit","Moz","O","ms","Khtml"],o=[{name:"transform",dom:"Transform"},{name:"transition",dom:"Transition"},{name:"transitionDuration",dom:"TransitionDuration"},{name:"transitionTimingFunction",dom:"TransitionTimingFunction"},{name:"anim",dom:"AnimationName"}],n=this.element[0],t=document.createElement("p");this._canCSS3={},document.body.insertBefore(t,null);for(var e=0;e<i.length;e++)for(var r=i[e],l=0;l<o.length;l++){var s=o[l];this._canCSS3[s.name]||(void 0!==n.style[r+s.dom]&&(this._canCSS3[s.name]=r+s.dom),void 0!==n.style[r+this._firstCharLowerCase(s.dom)]&&(this._canCSS3[s.name]=r+this._firstCharLowerCase(s.dom)))}if(this._canCSS3.transform&&!this.options.no3D&&void 0!==t.style[this._canCSS3.transform]){t.style[this._canCSS3.transform]="translate3d(1px,1px,1px)";var a=window.getComputedStyle(t).getPropertyValue(this._dashConvert(this._canCSS3.transform));this._canCSS3.can3D=null!=a&&""!=a}document.body.removeChild(t)},_direction:function(i){if(!this.options.loop)return i>this._index;var o=0,n=0;this._index=Math.min(this._index,this.count);for(var t=this._index;t!=i;)t>this.count?t=1:(t++,o++);for(t=this._index;t!=i;)1>t?t=this.count:(t--,n++);return this.options.preferForward&&o>1&&n>1?!0:n>=o},_loopIndex:function(i,o,n){for(var t=i?1:-1,e=o,r=0;n>r;r++)e+t>this.count?e=1:1>e+t?e=this.count:e+=t;return e},_loopCount:function(i,o,n){n=Math.min(n,this.count);for(var t=i?1:-1,e=o,r=0;e!=n;)r++,e+t>this.count?e=1:1>e+t?e=this.count:e+=t;return r},_resetPos:function(i){this._canCSS3.transform&&this._canCSS3.transition?i.css(this._canCSS3.transform,""):"horz"==this.options.dir?i.css("left",""):i.css("top","")},_removeStates:function(){this._children.removeClass(this.options.states.visible),this._children.removeClass(this.options.states.partiallyVisible)},_setState:function(i,o){switch(o){case"visible":i.addClass(this.options.states.visible),i.addClass(this.options.states.seen),this.callChildMethod(i,"visible",!0);break;case"invisible":i.removeClass(this.options.states.visible),this.callChildMethod(i,"visible",!1);break;case"partial":i.addClass(this.options.states.partiallyVisible),this.callChildMethod(i,"visible",!1)}},_posElm:function(i,o,n,t){this._elms[n]||(this._elms[n]=0);var e=t?this._elms[n]+o:o;this._canCSS3.transform&&this._canCSS3.transition?this._canCSS3.can3D?"horz"==this.options.dir?i.css(this._canCSS3.transform,"translate3d("+e+"px,0,0)"):i.css(this._canCSS3.transform,"translate3d(0,"+e+"px,0)"):"horz"==this.options.dir?i.css(this._canCSS3.transform,"translate("+e+"px,0)"):i.css(this._canCSS3.transform,"translate(0,"+e+"px)"):"horz"==this.options.dir?i.css("left",e+"px"):i.css("top",e+"px"),this._elms[n]=e},_preloadNext:function(){if(this.options.preloadNext){var i=this._visible+(this._index-1),o=this._loopIndex(!0,i,1),n=this._children.eq(o-1);this.callChildMethod(n,"preload",!0)}},_measureElements:function(i,o,n){for(var t=0,e=("horz"==this.options.dir,0);n>e;e++){var r=i?o+e:o-e;r>this.count&&(r=1),1>r&&(r=this.count),t+=this._measureElement(r-1)}return i?0-t:t},_moveElements:function(i,o,n){var t=this._container,e=this;if(this._containerPos==i)return e._canCSS3.transform&&e._canCSS3.transitionDuration&&(t.css(e._canCSS3.transitionTimingFunction,""),t.css(e._canCSS3.transitionDuration,"")),void(o&&o());if(this._containerPos=i,!n){if(e._canCSS3.transform&&e._canCSS3.transitionDuration){var r=e._canCSS3.can3D?"horz"==e.options.dir?"translate3d("+i+"px,0,0)":"translate3d(0, "+i+"px,0)":"horz"==e.options.dir?"translateX("+i+"px)":"translateY("+i+"px";t.css(e._canCSS3.transform,r)}else"horz"==e.options.dir?t.css("left",i+"px"):t.css("top",i+"px");return void(o&&o())}if(e._canCSS3.transform&&e._canCSS3.transitionDuration){var r=e._canCSS3.can3D?"horz"==e.options.dir?"translate3d("+i+"px,0,0)":"translate3d(0, "+i+"px,0)":"horz"==e.options.dir?"translateX("+i+"px)":"translateY("+i+"px";t.css(e._canCSS3.transform,r),t.css(e._canCSS3.transitionTimingFunction,e.options.easing),t.css(e._canCSS3.transitionDuration,e.options.animDuration+"ms"),t.off().on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(){t.css(e._canCSS3.transitionTimingFunction,""),t.css(e._canCSS3.transitionDuration,""),o&&o()})}else{var l={};"horz"==e.options.dir?l.left=i+"px":l.top=i+"px",t.animate(l,e.options.animDuration,"swing",o)}},_measureElement:function(i){var o,n="horz"==this.options.dir,t=this._children.eq(i);return t.css("display","block"),o=n?t.outerWidth(!0):t.outerHeight(!0),t.css("display",""),o},_elmSize:function(){return"horz"==this.options.dir?this.element.width():this.element.height()},_animate:function(i){var o=this;this._animating=!0,this._layoutManager.focus(i,!0,function(){o._setIndex(i)})},_setIndex:function(i){this._index=i,this._track("change",{index:this._index,canNext:this.canNext(),canPrev:this.canPrev(),visible:this._visible,count:this.count}),this._animating=!1,this._preloadNext(),this._onFinish()},_track:function(i,o){this._trigger(i,null,o),window.amp&&amp.stats&&amp.stats.event&&amp.stats.event(this.element,"carousel",i,o)},_destroy:function(){this.element.removeClass("amp"),this.element.removeClass("amp-carousel"),this._removeEmptyAttributeHelper(this.element);var i=this._children;i.removeClass("amp-slide"),i.removeClass(this.options.states.visible),i.removeClass(this.options.states.partiallyVisible),i.removeClass(this.options.states.selected),i.removeClass(this.options.states.seen);for(var o=0;o<i.length;o++){var n=i.eq(o);this._resetPos(n,0),this._removeEmptyAttributeHelper(n)}this._container.replaceWith(i)},checkFeatures:function(i){if(i){if(i.requiredFeatures){for(var o=!0,n=0;n<i.requiredFeatures.length;n++){var t=i.requiredFeatures[n];this._canCSS3[t]||(o=!1)}return o}return!0}return!1},canNext:function(){return this.options.loop||this._canNext&&this._index<this.count},redraw:function(){return this._animating?void this._asyncMethods.push({func:self._calcSize,args:arguments}):this._calcSize()},select:function(i,o){var n=this._numToIndex(i),t=this._children.eq(this._selectedIndex-1),e=this._children.eq(n-1);t.removeClass(this.options.states.selected),e.addClass(this.options.states.selected+" "+this.options.states.seen),this._selectedIndex=n,e.hasClass(this.options.states.visible)||this.goTo(n,o),o||this._exeBinds(n,"select"),this._preloadNext(),this._track("selected",{index:n})}}),function(){var o=function(o,n){function t(){this.name="standard",this.options=n,this.duplicated=[]}var e=t.prototype;e.init=function(){o.canTouch&&o.options.gesture.enabled&&o._children.on("touchstart",i.proxy(this.start,this))},e.start=function(n){if(!this.animating){if(n.originalEvent&&n.originalEvent.touches&&n.originalEvent.touches[0]&&n.originalEvent.touches.length!=o.options.gesture.fingers)return!0;this.duplicationOffsets={},this.duplicationOffsets.left=0,this.duplicationOffsets.leftSize=0,this.duplicationOffsets.right=0,this.duplicationOffsets.rightSize=0,this.changed=!1,this.startPos=o._containerPos,this.moved=!1,this.startTouchEvent=n;var n=this.getEvent(n);return this.xo=n.pageX-o._containerPos,this.yo=n.pageY-o._containerPos,this.xo2=n.pageX,this.yo2=n.pageY,i(window).on("touchmove",i.proxy(this.move,this)),i(window).on("touchcancel",i.proxy(this.stop,this)),i(window).on("touchend",i.proxy(this.stop,this)),!0}},e.move=function(i){if(i.originalEvent&&i.originalEvent.touches&&i.originalEvent.touches[0]&&i.originalEvent.touches.length!=o.options.gesture.fingers)return!0;this.moved=!0,this.lastEvent=i,i=this.getEvent(i);var n=i.pageX-this.xo,t=i.pageY-this.yo,e=i.pageX-this.xo2,r=i.pageY-this.yo2;if(this.moveDir||(Math.abs(e)<Math.abs(r)?this.moveDir="vert":Math.abs(e)>Math.abs(r)?this.moveDir="horz":this.moveDir=o.options.dir),o.options.dir!=this.moveDir)return!0;var l="horz"==o.options.dir?n:t;return o._moveElements(l,null,!1),o.options.loop&&this.checkDuplicate(l),o.options.dir==this.moveDir?!1:void 0},e.checkDuplicate=function(i){i-this.metrics[this.lastOne-1].size<0-(this.allSize-o._elmSize())&&this.duplicateSlide(!0),0-i-this.metrics[0].size<=0-this.duplicationOffsets.leftSize&&this.duplicateSlide(!1)},e.duplicateSlide=function(i){if(i){var n=o._numToIndex(o._index-1+o.count+this.duplicationOffsets.right+1)-1,t=o._children.eq(n),e=t.clone();o._container.append(e);var r="horz"==o.options.dir?e.width():e.height(),l=this.allSize;o._posElm(e,l,this.count+this.duplicated.length),this.duplicated.push(e),this.duplicationOffsets.right++,this.duplicationOffsets.rightSize+=r,this.lastOne=n+1,this.allSize+=r}else{var n=o._numToIndex(o._index-1-this.duplicationOffsets.left)-1,t=o._children.eq(n),e=t.clone();o._container.append(e);var r="horz"==o.options.dir?e.width():e.height(),l=0-this.duplicationOffsets.leftSize-r;o._posElm(e,l,this.count+this.duplicated.length),this.duplicated.push(e),this.duplicationOffsets.left++,this.duplicationOffsets.leftSize+=r}},e.stop=function(n){if(i(window).off("touchmove",i.proxy(this.move,this)),i(window).off("touchcancel",i.proxy(this.stop,this)),i(window).off("touchend",i.proxy(this.stop,this)),this.moveDir=null,this.moved&&!this.changed){var t=this.findNearest(),e=t.index+1;if(e==o._index){var r=this.startPos-o._containerPos;return Math.abs(r)>=o.options.gesture.distance?r>0?o.canNext()?o.next():o._moveElements(this.startPos,null,!0):o.canPrev()?o.prev():o._moveElements(this.startPos,null,!0):o._moveElements(this.startPos,null,!0),this.changed=!0,void(o.options.loop&&(o._containerPos=0))}o.options.loop?(this.animating=!0,o._moveElements(t.pos,i.proxy(function(){this.allSize=this.oAllSize,this.focus(e,!1),o._containerPos=0,o._setIndex(e),o.goTo(e,null,!0),this.changed=!0,this.animating=!1},this),!0)):(this.changed=!0,o.goTo(e))}},e.getEvent=function(i){return("touchend"==i.type||"touchcancel"==i.type)&&(i=this.startTouchEvent),i.originalEvent&&i.originalEvent.touches&&i.originalEvent.touches[0]&&(i=i.originalEvent.touches[0]),i},e.findNearest=function(){var i=0,n=o._containerPos,t=this.oAllSize,e=0;if(o.options.loop){for(;n<0-this.oAllSize;)n+=this.oAllSize,e--;for(;n>0;)n-=this.oAllSize,e++}for(var r=0;r<this.metrics.length;r++){var l=Math.abs(n+this.metrics[r].pos);t>l&&(t=l,i=r)}var s=o._numToIndex(o._index+o.count-1)-1,l=Math.abs(n+(this.metrics[s].pos+this.metrics[s].size));t>l&&(t=l,i=o._index-1,n+=this.oAllSize);var a=n>=0?this.metrics[i].pos+this.oAllSize*(e-1):0-this.metrics[i].pos+this.oAllSize*e;return{index:i,pos:a}},e.layout=function(i){o.options.loop?(this.arrange(i),this.focusLoop(i,!1)):(this.arrange(1),this.focusNoLoop(i,!1))},e.focus=function(i,n,t){o.options.loop?this.focusLoop(i,n,t):(this.focusNoLoop(i,n),t&&t())},e.focusNoLoop=function(i,n){var t=0-this.metrics[i-1].pos,e=0-(this.allSize-o._elmSize());t=Math.min(Math.max(e,t),0),this.setVisibleStates(i,t),o._moveElements(t,null,n)},e.setVisibleStates=function(i,n){var n=Math.abs(n);o._removeStates();for(var t=0,e=0;e<this.metrics.length;e++){var r=this.metrics[e].pos,l=o._children.eq(e),s=this.metrics[e].size,a=2*parseFloat(o._children.eq(e).css("margin-right"));r>=n&&r+s-o.options.thumbWidthExceed-a-n<=o._elmSize()?(o._setState(l,"visible"),t++):r+s-a>n&&r+s-a-n<o._elmSize()||r>n&&r-n<o._elmSize()?o._setState(l,"partial"):o._setState(l,"invisible")}o._visible=t},e.focusLoop=function(i,n,t){var e=this,r=o._direction(i),l=r?0-this.metrics[i-1].pos:this.allSize-this.metrics[i-1].pos;o._loopCount(r,o._index,i);this.duplicate(r),this.setVisibleStates(i,l),o._moveElements(l,function(){for(o._container[0].style[o._canCSS3.transform]="","horz"===o.options.dir?o._container[0].style.left="":o._container[0].style.top="",e.arrange(i);e.duplicated.length>0;){var n=e.duplicated.splice(0,1);n[0].remove(),delete n[0]}t&&t()},n)},e.duplicate=function(i){for(var n=0;n<o.count;n++){var t=o._children.eq(n),e=t.clone();o._container.append(e);var r=i?this.metrics[n].pos+this.allSize:this.metrics[n].pos-this.allSize;o._posElm(e,r,this.count+this.duplicated.length),this.duplicated.push(e)}},e.arrange=function(i){var n=0,t=[],e=[];o._removeStates();for(var r=0;r<o.count;r++){var l=r;if(void 0!==i)for(l+=i-1;l>=o.count;)l-=o.count;var s=o._children.eq(l),a=o._measureElement(l);a+n<=o._elmSize()?o._setState(s,"visible"):n<o._elmSize()?o._setState(s,"partial"):o._setState(s,"invisible"),t[l]={},t[l].size=a,t[l].pos=n,o._posElm(s,n,l),e[l]=a,n+=a}return o.options.loop&&(o._containerPos=0),this.lastOne=i,delete this.metrics,this.metrics=t,this.allSize=n,this.oAllSize=n,{allSize:n,metrics:t}};var r=new t;return r.init(),r};i.amp.ampCarousel.prototype._layoutManagers.standard={requiredFeatures:null,create:o}}(),function(){var o=function(o,n){function t(){this.name="carousel3D",this.options=n,this.styles=[],this.angles=[]}var e=o._canCSS3.transform,r=t.prototype;r.init=function(){var n=this;this.element=o._container[0],this.rotation=0,this.panelCount=o.count,this.totalPanelCount=this.element.children.length,this.theta=0,this.isHorizontal="horz"==o.options.dir,o._container.css("perspective","1000px"),this.modify(),setTimeout(function(){n.animation(!0)},10),o.canTouch&&o.options.gesture.enabled&&o._children.on("touchstart",i.proxy(this.start,this))},r.animation=function(i){i?(o._children.css("transitionTimingFunction",o.options.easing),o._children.css("transitionDuration",o.options.animDuration+"ms")):(o._children.css("transitionTimingFunction",""),o._children.css("transitionDuration",""))},r.start=function(n){if(n.originalEvent&&n.originalEvent.touches&&n.originalEvent.touches[0]&&n.originalEvent.touches.length!=o.options.gesture.fingers)return!0;var n=this.getEvent(n);this.xo=n.pageX-n.target.offsetLeft,this.yo=n.pageY-n.target.offsetTop,this.changed=!1,this.moved=!1,this.animation(!1),this.startPos=this.rotation,i(window).on("touchmove",i.proxy(this.move,this)),i(window).on("touchcancel",i.proxy(this.stop,this)),i(window).on("touchend",i.proxy(this.stop,this))},r.move=function(i){if(i.originalEvent&&i.originalEvent.touches&&i.originalEvent.touches[0]&&i.originalEvent.touches.length!=o.options.gesture.fingers)return!0;this.lastEvent=i,this.moved=!0,i=this.getEvent(i);var n=i.pageX-this.xo,t=this.yo-i.pageY,e="horz"==o.options.dir?n:t;return e=e>0?Math.min(this.theta/2,e/10):Math.max(0-this.theta/2,e/10),this.rotation=this.startPos+e,this.transform(),!1},r.getEvent=function(i){return("touchend"==i.type||"touchcancel"==i.type)&&(i=this.lastEvent),i.originalEvent&&i.originalEvent.touches&&i.originalEvent.touches[0]&&(i=i.originalEvent.touches[0]),i},r.stop=function(n){if(i(window).off("touchmove",i.proxy(this.move,this)),i(window).off("touchcancel",i.proxy(this.stop,this)),i(window).off("touchend",i.proxy(this.stop,this)),this.animation(!0),this.moved&&!this.changed){n=this.getEvent(n);var t=n.pageX-this.xo,e=this.yo-n.pageY,r="horz"==o.options.dir?t:e;if(this.rotation=this.startPos,Math.abs(r)>=o.options.gesture.distance)if(0>r){if(o.canNext())return void o.next()}else if(o.canPrev())return void o.prev();this.transform(),this.changed=!0}},r.modify=function(){var i,n,t;for(this.xOffset=o._container.width()/2-o._children.eq(0).width()/2,this.yOffset=o._container.height()/2-o._children.eq(0).height()/2,this.panelSize=this.isHorizontal?o._children.eq(0).width():o._children.eq(0).height(),this.rotateFn=this.isHorizontal?"rotateY":"rotateX",this.theta=360/this.panelCount,this.radius=Math.round(this.panelSize/2/Math.tan(Math.PI/this.panelCount)),delete this.styles,delete this.angles,this.styles=[],this.angles=[],t=0;t<this.panelCount;t++)i=this.element.children[t],i&&(n=this.theta*t,this.angles[t]=n,this.styles[t]=this.rotateFn+"("+n+"deg) translateZ("+this.radius+"px)",i.style[e]=this.styles[t],"horz"==o.options.dir?i.style.left=this.xOffset+"px":i.style.top=this.yOffset+"px");for(;t<this.totalPanelCount;t++)i=this.element.children[t],i&&(i.style.opacity=0,i.style[e]="none");this.rotation=Math.round(this.rotation/this.theta)*this.theta,this.transform()},r.transform=function(){for(var i=0;i<this.panelCount;i++)if(this.element.children[i]){for(var o=this.angles[i]+this.rotation;o>360;)o-=360;for(;0>o;)o+=360;var n;n=180>=o?180-o:o-180,this.element.children[i].style.zIndex=n,this.element.children[i].style[e]="translateZ(-"+this.radius+"px) "+this.rotateFn+"("+this.rotation+"deg)"+this.styles[i]}},r.focus=function(i,n,t){var e=o._direction(i),r=o._loopCount(e,o._index,i),l=o._children.eq(i-1),s=o._children.eq(o._index-1);o._setState(l,"visible"),o._setState(s,"invisible"),e?this.rotation-=this.theta*r:this.rotation+=this.theta*r,this.transform(),t&&t()},r.layout=function(i){this.modify(),this.focus(i)};var l=new t;return l.init(),l};i.amp.ampCarousel.prototype._layoutManagers.carousel3D={requiredFeatures:["can3D","transform"],create:o}}()}(jQuery),function(i){i.widget("amp.ampImage",{options:{errImg:null,preload:"visible",insertAfter:!1},_loadedHistory:[],_getCreateOptions:function(){var o=this.element.data().ampImage;return o?i.extend(!0,{},this.options,o):this.options},_create:function(){this.element.addClass("amp"),this.element.addClass("amp-image");var o=this;this.element.bind("load",function(i){o._loaded()}),this.element.bind("error",function(){o._failLoad()}),-1==i.inArray(this.options.preload,["created","visible","none"])&&(this.options.preload="visible"),"created"==this.options.preload&&this.newLoad(),this._track("created")},dimensionsParams:function(o){var n=this,t=n.element.data("amp-dimensions"),e=o;if(!t)return e;var r=-1===e.indexOf("?")?"?":"&",l="";return i.each(t[0],function(o,t){var s=new RegExp(r+o+"=[0-9]*","g"),a=e.match(s);a&&a.length>0&&i.each(a,function(i,o){e=e.replace(o,"")});var c="window"===t.domName?i(window):n.element.closest(t.domName);l+=r+o+"="+parseFloat(c[t.domProp](),10),r="&"}),e+=l},newLoad:function(){var o=this.element.attr("src")&&""!=this.element.attr("src")?this.element.attr("src"):this.element.attr("data-amp-src");return o=this.dimensionsParams(o),-1!==i.inArray(o,this._loadedHistory)?(this.loading&&this.loading.remove(),this.element.attr("src",o),void this.element.show()):(this.loading||(this.loading=i('<div class="amp-loading"></div>')),this.element.hide(),this.options.insertAfter?this.options.insertAfter.prepend(this.loading):this.element.parent().append(this.loading),this.element.attr("src",""),void this.element.attr("src",o))},visible:function(i){i&&i!=this._visible&&"visible"==this.options.preload&&this.newLoad(),this._visible=i},load:function(i){this.loaded||this.loading||this.newLoad()},preload:function(){this.element.parent().hasClass("amp-spin")||this.newLoad()},loaded:!1,_loaded:function(){this._loadedHistory.push(this.element.attr("src")),this._track("loaded",!0),this.loaded=!0,this.loading&&this.loading.remove(),this.element.show()},_failLoad:function(){this.options.errImg?this.element.attr("src",this.options.errImg):window.amp&&amp.conf&&amp.conf.err_img&&this.element.attr("src",amp.conf.err_img)},_track:function(i,o){this._trigger(i,null,o),window.amp&&amp.stats&&amp.stats.event&&amp.stats.event(this.element,"image",i,o)},_destroy:function(){this.element.removeClass("amp"),this.element.removeClass("amp-image"),this.loading&&this.loading.remove(),this.element.css("display",""),this._removeEmptyAttributeHelper(this.element)},_removeEmptyAttributeHelper:function(i,o){for(var n=o||["class","style"],t=0,e=n.length;e>t;t++)i.attr(n[t])&&i.prop(n[t])||i.removeAttr(n[t])}})}(jQuery),function(i){i.widget("amp.ampBuild",{options:{},_create:function(){for(var o in i.amp)i.amp.hasOwnProperty(o)&&this.element.find("[data-"+o.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()+"]")[o]();this._track("created")},_track:function(i,o){this._trigger(i,null,o),window.amp&&amp.stats&&amp.stats.event&&amp.stats.event(this.element,"build",i,o)}})}(jQuery),function(i){i.widget("amp.ampNav",{options:{},_getCreateOptions:function(){var o=this.element.data().ampNav;return o?i.extend(!0,{},this.options,o):this.options},_create:function(){var i=this.element.data();for(var o in i)if(i.hasOwnProperty(o)){var n=i[o];n.bind&&"amp"==o.substring(0,3)&&n.bind(this.options)}this._track("created")},_track:function(i,o){window.amp&&amp.stats&&amp.stats.event&&amp.stats.event(this.element,"navigation",i,o)}})}(jQuery),function(i){var o={top:0,left:0,opacity:0,width:"",height:""};i.widget("amp.ampZoom",{options:{zoom:3,url:"",activate:{touch:"up",mouse:"up"},pan:!1,map:!1,target:{},lens:!0,fade:!0,preload:{image:"created",zoomed:"none"},responsive:!0,cursor:{active:"auto",inactive:"auto"},transforms:"",states:{active:"amp-active",inactive:"amp-inactive"},width:"auto",height:"auto",create:function(){},created:function(){},zoomedIn:function(){},zoomedOut:function(){},move:function(){},startMove:function(){},stopMove:function(){},startPreload:function(){},preloaded:function(){},visible:function(){}},_zoomLoaded:!1,_getCreateOptions:function(){this.validTypes=this._createValidTypes(this.options);var o=this.element.data().ampZoom;return o?i.extend(!0,{},this.options,o):this.options},_createValidTypes:function(i){var o={};for(var n in i)if(i.hasOwnProperty(n)){var t,e=i[n];t="width"==n||"height"==n?"number":typeof e,o[n]="object"==typeof e?this._createValidTypes(e):{type:t,defaultValue:e}}return o},_checkValidTypes:function(i,o){return i},_create:function(){this.options=this._checkValidTypes(this.options,this.validTypes),i.isArray(this.options.zoom)&&(this._cycle={current:-1,len:this.options.zoom.length});var n=["created","visible","none"];-1==i.inArray(this.options.preload.image,n)&&(this.options.preload.image="created"),-1==i.inArray(this.options.preload.zoomed,n)&&(this.options.preload.zoomed="none"),this.element.addClass("amp amp-zoom"),this.element.wrap('<div class="amp-zoom-container"></div>'),this.parent=this.element.parent(),this.parent.prepend(this.loading),this.element.wrap('<div class="amp-zoom-overflow"></div>'),this.overflow=this.element.parent(),this.wrapper=i('<div class="amp-zoom-wrapper"></div>'),this.imgs=[];var t=0;do{var e=i('<img class="amp-zoom-img">');e.css(o),this.wrapper.append(e),this.imgs.push(e),t++}while(t<(this._cycle&&this._cycle.len));if(this.options.responsive&&this.element.css({height:"auto",width:"100%",maxWidth:"100%"}),this.options.target){this.mark=this.options.map?{name:"map",inner:"inner"}:{name:"box",inner:"wrapper"};try{this[this.mark.name]=i("body").find(this.options.target)}catch(r){this[this.mark.name]=!1}this[this.mark.name]&&this[this.mark.name].length>0?(this.options.lens&&(this.lens=i('<div class="amp-zoom-lens"></div>'),"map"==this.mark.name?(this[this.mark.name].addClass("amp-zoom-map"),this[this.mark.inner]=i('<div class="amp-zoom-wrapper"></div>'),this[this.mark.inner].append(i('<img class="amp-main-img" src="'+this.element.attr("src")+'">')),this[this.mark.inner].append(this.lens)):(this[this.mark.name].addClass("amp-zoom-container"),this.parent.append(this.lens))),this[this.mark.inner].hide(),this[this.mark.name].append(this[this.mark.inner]),this[this.mark.inner].addClass(this.options.states.inactive),this[this.mark.inner][0].relatedUUID=this.uuid):this[this.mark.name]=!1}this.box||(this.overflow.append(this.wrapper),this.canHideEl=!!i.amp.ampImage),this.target=this.imgs[0],this._setZoomCursor(this.parent),this.parent.addClass(this.options.states.inactive),("created"==this.options.preload.image||this.element[0].src)&&this._loadImage(),"created"==this.options.preload.zoomed&&this._loadZoomed()},_onImageLoad:function(){if(!this._imageLoaded){this._track("loaded",!0),this._imageLoaded=!0,this._imageLoading=!1,this._originalImage=this._getNaturalSize(this.element[0].src);var o=this;this._calcSize(),this.options.responsive&&i(window).bind("resize",function(i){return function(){return i.zoomed&&i.zoom(!1),i._calcSize()}}(o)),this.moved=!1,this.canTouch=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),this.zoomBy=1,this.pos={start:{x:0,y:0},last:{x:0,y:0},cur:{x:0,y:0}};var n=function(){var n=function(i){return o.moved=!0,!0},t=function(i){return e(),!0},e=function(r){return o.pos.cur=o.pos.last,o.mousedown=!1,o.parent.off(o.canTouch?"touchmove":"mousemove",i.proxy(n,o)),o.canTouch||o.parent.off("mouseleave",i.proxy(t,o)),o.parent.off(o.canTouch?"touchend":"mouseup",i.proxy(e,o)),o.moved?void 0:o.toggle(r)},r=function(r){o.zoomed&&(r.stopPropagation(),r.preventDefault()),o.mousedown=!0;var l=o._getEvent(r);o.pos.start={x:l.pageX,y:l.pageY},setTimeout(function(){o.parent.on(o.canTouch?"touchmove":"mousemove",i.proxy(n,o)),o.parent.on(o.canTouch?"touchend":"mouseup",i.proxy(e,o))},1),o.canTouch||o.parent.on("mouseleave",i.proxy(t,o)),o.moved=!1;r.timeStamp;return o.startTouchEvent=r,!0};o.parent.on(o.canTouch?"touchstart":"mousedown",i.proxy(r,o))};if(this.canTouch){if("disable"==this.options.activate.touch)return!1;if("doubleTap"==this.options.activate.touch){var t=300,e=20;this._lastEvent="";var r=function(n){o.parent.on("touchend touchcancel",i.proxy(l,o)),this.startTouchEvent=n;var n=this._getEvent(n);o.pos.start={x:n.pageX,y:n.pageY},n.timeStamp=(new Date).getTime();var r=n.timeStamp-(this._lastEvent&&this._lastEvent.timeStamp)||0,s=Math.abs(n.pageX-this._lastEvent.pageX)>e||Math.abs(n.pageY-this._lastEvent.pageY)>e;return t>r&&0!=r&&!s&&this.toggle(this.startTouchEvent),this._lastEvent=n,!0},l=function(n){o.pos.cur=o.pos.last,o.parent.off("touchend touchcancel",i.proxy(l,o))};o.parent.on("touchstart",i.proxy(r,o))}else if("pinch"==this.options.activate.touch){var s=2;this._scale=1,this._scaled=!1,this._cycle?(this.maxZoom=this.options.zoom[this._cycle.len-1],this._cycle=!1):this.maxZoom=this.options.zoom;var r=function(n){if(o.parent.on("touchcancel touchend",i.proxy(c,o)),n.originalEvent&&n.originalEvent.touches&&n.originalEvent.touches[0]){if(1==n.originalEvent.touches.length){var t=o._getEvent(n);return o.pos.start={x:t.pageX,y:t.pageY},!0}if(n.originalEvent.touches.length!=s)return!0}return n.preventDefault(),n.stopPropagation(),this.startZoom=this.zoomBy,this.startPos=this.pos.last,this.pos.start=this._getPosition(n.originalEvent.touches),this.pinching=!0,this.hasPinchEnded=!1,this._scaled||(this.o=this._pinchZoomStart(n)),this._startDist=this._getDistance(n.originalEvent.touches),this._scale=this._lastScale||this._scale,this.parent.on("touchmove",i.proxy(a,this)),this.parent.on("touchcancel touchend",i.proxy(l,this)),!0},a=function(i){if(i.originalEvent&&i.originalEvent.touches&&i.originalEvent.touches[0]&&i.originalEvent.touches.length!=s)return!0;var o=this._getDistance(i.originalEvent.touches),n=this._getPosition(i.originalEvent.touches),t=o/this._startDist;t=Math.max(1,Math.min(t*this._scale,this.maxZoom)),this._pinchZoom(i,t,n,this.o),this._lastScale=t,this._scaled=!0},c=function(n){o.pos.cur=o.pos.last,o.parent.off("touchcancel touchend",i.proxy(c,o))},l=function(n){n.originalEvent&&n.originalEvent.touches&&0==n.originalEvent.touches.length&&(o.hasPinchEnded=!0),o.parent.off("touchmove",i.proxy(a,this)),o.hasPinchEnded&&(1==this.zoomBy&&(this.zoomed=!1),o.pinching=!1,o.pos.cur=o.pos.last,o.parent.off("touchcancel touchend",i.proxy(l,this)))};o.parent.on("touchstart",i.proxy(r,o))}else"none"==this.options.activate.touch||n()}else{if("disable"==this.options.activate.mouse)return!1;if("over"==this.options.activate.mouse||"over-noclick"==this.options.activate.mouse){var u="mouseenter mousedown";"over-noclick"==this.options.activate.mouse&&(u="mouseenter"),o.parent.on(u,function(i){return"mouseenter"!=i.type||o.zoomed?"mousedown"==i.type?o.toggle(i):void 0:o.toggle(i)}),o.parent.on("mouseleave",function(i){return o.zoom(!1,i)})}else"down"==this.options.activate.mouse?(this.options.pan=!1,o.parent.on("mousedown",function(i){o.toggle(i)})):"none"==this.options.activate.mouse||n()}("created"==this.options.preload.zoomed||this.canTouch&&"pinch"==this.options.activate.touch||this._loadZoomedPromise)&&this.preload(),this._track("created")}},zoomed:!1,toggle:function(i,o){this._cycle?this.cycle(i,o):this.zoom(!this.zoomed,i)},cycle:function(o,n){this.animating||(void 0!==n?this._cycle.current=n:this._cycle.current=this._cycle.current+=1,
this.options.zoom[this._cycle.current]?(this.map&&this.inner.off("mousemove touchmove",i.proxy(this._mapMove,this)),this.parent.off("mousemove touchmove"),this.oldTarget=this.target[0]==this.imgs[this._cycle.current][0]?null:this.target,this.oldZoom=this.options.zoom[this._cycle.current],this.target=this.imgs[this._cycle.current],this.zoom(!0,o),this.pos.cur=this.pos.last):(this._cycle.current=-1,this.zoom(!1,o)))},zoom:function(n,t,e){if(n!=this.zoomed||this._cycle||e){this.zoomed=n;var r=this;if(n){if(this.box&&this.box.show(),!this._zoomLoaded)return void this._checkLoaded(t);this.init=!1,this.moveEvent=this.canTouch?"touchmove":"mousemove",this.zoomBy=this._cycle?this.options.zoom[this._cycle.current]||1:this.options.zoom;var l=this.overflow.width(),s=this.overflow.height(),a=l*this.zoomBy,c=s*this.zoomBy,u=this.parent.offset(),k=0,d=0,p=0,x=0,b=0;void 0===t&&(t={pageX:l/2,pageY:s/2}),this._track("startMove",{domEvent:t,zoom:this.zoomBy}),this.parent.removeClass(this.options.states.inactive).addClass(this.options.states.active),this.wrapper.css({width:a,height:c}),this[this.mark.name]&&(this.box&&(k=this.box.width(),d=this.box.height(),this.lens&&(b=this._makeLens(this.lens,k,d,this.zoomBy,{w:l,h:s}))),this.map&&(p=this.map.width(),x=p*(this.element.height()/this.element.width()),this.inner.height(x),this.inner.width(p),this.lens&&(b=this._makeLens(this.lens,p,x,this.zoomBy,{w:p,h:x})),this._mapEnd=function(o){r.mousedownForMap=!1,r.inner.off(r.canTouch?"touchmove":"mousemove",i.proxy(r._mapMove,r)),r.inner.off(r.canTouch?"touchend":"mouseup",i.proxy(r._mapEnd,r))},this._mapMove=function(i){r.mousedownForMap&&r._mouseMove(r._getEvent(i),l,s,a,c,r.map.offset(),k,d,p,x,b,!0)},this._mapStart=function(o){o.preventDefault(),o.stopPropagation(),r.mousedownForMap=!0,r._mouseMove(r._getEvent(o),l,s,a,c,r.map.offset(),k,d,p,x,b,!0),this.inner.on(r.canTouch?"touchmove":"mousemove",i.proxy(r._mapMove,r)),this.inner.on(r.canTouch?"touchend":"mouseup",i.proxy(r._mapEnd,r))},this.inner.on("mouseleave",i.proxy(r._mapEnd,r)),this.inner.on(r.canTouch?"touchstart":"mousedown",i.proxy(this._mapStart,r))),this[this.mark.name].show(),this[this.mark.inner].show(),this[this.mark.inner].removeClass(this.options.states.inactive).addClass(this.options.states.active)),this._parentMove=function(i){i.preventDefault(),i.stopPropagation(),r._mouseMove(r._getEvent(i),l,s,a,c,u,k,d,p,x,b)},this.parent.on(this.moveEvent,i.proxy(r._parentMove,r)),this._mouseMove(r._getEvent(t),l,s,a,c,u,k,d,p,x,b),this._setZoomCursor(r.lens?r.lens:r.parent),this.options.fade?(this.animating=!0,this.target.animate({opacity:1},{complete:function(){r.canHideEl&&r.element.css({opacity:1}),r.animating=!1,r.oldTarget&&r.oldTarget.css(o)}})):(this.target.css({opacity:1}),r.canHideEl&&this.element.css({opacity:1}),r.oldTarget&&r.oldTarget.css(o)),this.lens&&this.lens.show(),this._track("zoomedIn",{domEvent:t,zoom:this.zoomBy})}else this.init=!1,this._track("stopMove",{domEvent:t}),this.pos={start:{x:0,y:0},last:{x:0,y:0},cur:{x:0,y:0}},this.target.css(o),clearInterval(r.interval),this.options.fade&&this.target.stop(),this[this.mark.name]&&(this[this.mark.name].hide(),this[this.mark.inner].hide(),this[this.mark.inner].removeClass(this.options.states.active).addClass(this.options.states.inactive),this.map&&(this.inner.off("mouseleave",i.proxy(r._mapEnd,r)),this.inner.off(r.canTouch?"touchstart":"mousedown",i.proxy(this._mapStart,r)))),this.canHideEl&&this.element.css({opacity:1}),this._cycle&&(this._cycle.current=-1),this.lens&&this.lens.hide(),this.moveEvent&&i.proxy(this._parentMove,this)&&this.parent.off(this.moveEvent,i.proxy(this._parentMove,this)),this.wrapper.css({width:"",height:""}),this._setCursor(this.options.cursor.inactive,this.parent),this.parent.removeClass(this.options.states.active).addClass(this.options.states.inactive),this._track("zoomedOut",t)}},_getEvent:function(i){return i&&"touchend"==i.type&&(i=this.startTouchEvent),i&&i.originalEvent&&i.originalEvent.touches&&i.originalEvent.touches[0]&&(i=i.originalEvent.touches[0]),i},load:function(i){this._loadImage()},visible:function(i){if(this._visible==i){if(i==this._zoomVisible)return;return void(i&&"visible"==this.options.preload.zoomed&&(this._loadZoomed(),this._zoomVisible=i))}i&&this._track("visible",{visible:i}),i?("visible"==this.options.preload.image&&this._loadImage(),"visible"==this.options.preload.zoomed&&(this._loadZoomed(),this._zoomVisible=i),this._calcSize()):this.zoom(!1),this._visible=i},preload:function(){this._loadZoomed()},_makeLens:function(i,o,n,t,e){var r={lw:o/t,lh:n/t,lwh:0,lhh:0,dl:0,dt:0};return i.width(r.lw),i.height(r.lh),r.dl=i.outerWidth(!0)-r.lw,r.dt=i.outerHeight(!0)-r.lh,r.lw+r.dl>e.w&&(r.lw=e.w-r.dl),r.lh+r.dt>e.h&&(r.lh=e.h-r.dt),i.width(r.lw),i.height(r.lh),r.lwh=r.lw/2,r.lhh=r.lh/2,r.dlh=r.dl/2,r.dth=r.dt/2,r},_loadZoomed:function(){if(!this._imageLoaded)return"none"!=this.options.preload.zoomed&&(this._loadZoomedPromise=!0),void this._loadImage();if(!this._zoomLoaded&&!this._zoomLoading){var o=this;this._zoomLoading=!0,this._zoomLoaded=!1,this._toLoadCount=this.imgs.length,this._zoomLoadedCount=0,this._track("startPreload");var n=function(i){o._zoomLoadedCount++,o._zoomLoadedCount==o._toLoadCount&&(o._zoomLoaded=!0,o._zoomLoading=!1,o.loading.hide(),o._track("preloaded"),o._calcSize())};i.each(this.imgs,function(i,t){t.on("load",n),t[0].src=o._getUrl(o.options.zoom[i])})}},_checkLoaded:function(i){var o=this,n=!1;this._zoomLoading||this._loadZoomed(),clearInterval(this.interval),this.interval=setInterval(function(){o._zoomLoaded?(clearInterval(o.interval),o.zoom(o.zoomed,i,!0)):o._zoomLoading&&!n&&(o.canHideEl&&o.element.css({opacity:0}),n=!0)},50)},_pinchZoomStart:function(o){var n=this;this.zoomed=!0,this.options.fade?this.target.animate({opacity:1}):this.target.css({opacity:1}),this.target.show();var t={pw:this.overflow.width(),ph:this.overflow.height(),po:this.parent.offset(),mw:0,mh:0,lens:null};return t.tw=1*t.pw,t.th=1*t.ph,this.wrapper.css({width:this.overflow.width(),height:this.overflow.height()}),this.map&&(t.mw=this.map.width(),t.mh=t.mw*(this.element.height()/this.element.width()),t.mo=this.map.offset(),this.inner.height(t.mh),this.map.show(),this.lens&&(t.lens=this._makeLens(this.lens,t.mw,t.mh,1,{w:t.mw,h:t.mh})),this._mapEnd=function(o){n.inner.off("touchmove",i.proxy(n._mapMove,n)),n.inner.off("touchend",i.proxy(n._mapEnd,n))},this._mapMove=function(i){i.preventDefault(),i.stopPropagation(),n._mouseMove(n._getEvent(i),t.pw,t.ph,t.tw,t.th,n.map.offset(),null,null,t.mw,t.mh,t.lens,!0)},this._mapStart=function(o){o.preventDefault(),o.stopPropagation(),n._mouseMove(n._getEvent(o),t.pw,t.ph,t.tw,t.th,n.map.offset(),null,null,t.mw,t.mh,t.lens,!0),this.inner.on("touchmove",i.proxy(n._mapMove,n)),this.inner.on("touchend",i.proxy(n._mapEnd,n))},this.inner.on("touchstart",i.proxy(this._mapStart,this)),this.inner.removeClass(this.options.states.inactive).addClass(this.options.states.active),this.inner.show(),this.lens&&this.lens.show()),this._parentMove=function(i){return n.hasPinchEnded?i.originalEvent&&i.originalEvent.touches&&i.originalEvent.touches[0]&&1!=i.originalEvent.touches.length?!0:(i.preventDefault(),1!==this.zoomBy&&i.stopPropagation(),void n._mouseMove(n._getEvent(i),t.pw,t.ph,t.tw,t.th,t.po,null,null,t.mw,t.mh,t.lens)):(i.stopPropagation(),!0)},this.parent.on("touchmove",i.proxy(this._parentMove,this)),t},_pinchZoom:function(i,o,n,t){o==this.maxZoom?this._track("maxZoom",{domEvent:i,scale:o,center:n}):1==o&&this._track("minZoom",{domEvent:i,scale:o,center:n}),t.tw=t.pw*o,t.th=t.ph*o,this.zoomBy=o,this.wrapper.css({width:t.tw,height:t.th}),this.lens&&(t.lens=this._makeLens(this.lens,t.mw,t.mh,o,{w:t.mw,h:t.mh})),this._mouseMove({currentTarget:i.currentTarget,pageX:n.x,pageY:n.y},t.pw,t.ph,t.tw,t.th,t.po,null,null,t.mw,t.mh,t.lens)},_mouseMove:function(i,o,n,t,e,r,l,s,a,c,u,k){var d,p,x,b,m,f=l?t-o+(o-l):t-o,$=s?e-n+(n-s):e-n;if(this.init&&this.options.pan){if(!(this.mousedown||this.canTouch||k))return void(this.panning=!1);if(this.pinching)d=(this.startPos.x+(this.pos.start.x-r.left))/this.startZoom,p=(this.startPos.y+(this.pos.start.y-r.top))/this.startZoom,x=f*(d/o),b=$*(p/n);else{this.panning=!0;var h=this.pos.start.x-i.pageX,v=this.pos.start.y-i.pageY;x=h+this.pos.cur.x,b=v+this.pos.cur.y,d=(x+o/2)/(t/o),p=(b+n/2)/(e/n)}}else this.init=!0,this.panning=!1,d=i.pageX-r.left,p=i.pageY-r.top,x=f*(d/o),b=$*(p/n),this.pos.cur.x=this.pos.last.x||x,this.pos.cur.y=this.pos.last.y||b;if(this.lens){if(this.box){this.box[0].lastChild.relatedUUID!=this.uuid&&(this.box.append(this.wrapper),this.wrapper.show().siblings().hide());var L=o,g=n,q=d-u.lwh-u.dlh,C=p-u.lhh-u.dth;x=(q+u.dlh)*this.zoomBy-u.lw/o,b=(C+u.dth)*this.zoomBy-u.lh/n,m=this._setBounds(d,p,o,n,0,0),d=m.x,p=m.y}else if(k){this.panning&&(d=i.pageX-r.left,p=i.pageY-r.top);var L=a,g=c,q=d-u.lwh-u.dlh,C=p-u.lhh-u.dth;x=((q+u.dlh)*this.zoomBy-u.lw/o)*o/a,b=((C+u.dth)*this.zoomBy-u.lh/n)*n/c,this.pos.cur={x:x,y:b}}else if(this.map){if(this.map[0].lastChild.relatedUUID!=this.uuid&&(this.map.append(this.inner),this.inner.show().siblings().hide()),this.panning){var q=d/(o/a)-u.lwh-u.dth;C=p/(n/c)-u.lhh-u.dth}else var B=d/(o/u.lw),E=p/(n/u.lh),q=d/(o/a)-B-u.dlh,C=p/(n/c)-E-u.dth;m=this._setBounds(q,C,a-u.lw-u.dl,c-u.lh-u.dt,0,0),q=m.x,C=m.y}(this.box||k)&&(d+u.lwh+u.dlh>=L&&(q=L-u.lw-u.dl),p+u.lhh+u.dth>=g&&(C=g-u.lh-u.dt),d-u.lwh-u.dlh<=0&&(q=0),p-u.lhh-u.dth<=0&&(C=0)),this.lens.css({top:C+"px",left:q+"px"})}m=this._setBounds(x,b,f,$,0,0),x=m.x,b=m.y,this.pos.last={x:x,y:b},this.lastPos={x:x,y:b},this.oldTarget&&this.oldTarget.css({top:-b+"px",left:-x+"px"}),this.target.css({top:-b+"px",left:-x+"px"}),this._track("move",{domEvent:i,pos:{x:d/o,y:p/n}})},_calcSize:function(){var i,o;if(this.options.responsive&&this.options.width&&this.options.height&&"auto"!=this.options.width&&"auto"!=this.options.height?(i=this.element.width(),o=i*(this.options.height/this.options.width),this.parent.height(o),this.overflow.height(o),0!=this.element.height()&&o>this.element.height()&&this.overflow.height(this.element.height())):(this.options.width&&this.parent.width(this.options.width),this.options.height&&this.parent.height(this.options.height)),this.map){var n=this.map.width(),t=n*(this.element.height()/this.element.width());this.inner.height(t)}},_getUrl:function(o){if(this.options.url)return this.options.url;var n=this.element.attr("src")||this.element.attr("data-amp-src");if(n){var t=this._cycle?o||1:this.options.zoom;n=this._cleanUrl(n);var e=this.options.transforms;if(this._cycle){var r=i.inArray(o,this.options.zoom);e=e[r]}return n=e?this._setTransforms(n,e):n,n=this._setWidth(n,{h:this._originalImage.height*t,w:this._originalImage.width*t})}},_getWidth:function(i){if(window.amp&&amp.di)return amp.di.width(i);var i=i.split("?");if(!i[1])return!1;for(var o=i[1].split("&"),n=0;n<o.length;n++){var t=o[n].split("=");if("w"==t[0])return parseInt(t[1])}return!1},_setWidth:function(o,n){if(window.amp&&amp.di)return amp.di.set(o,n);var o=o.split("?");if(o[1]){for(var t=o[1].split("&"),e=[],r=0;r<t.length;r++){var l=t[r].split("="),s={};"w"!=l[0]&&(s[l[0]]=l[1],e.push(i.param(s)))}return e=e.concat(i.param(n)),o[0]+"?"+e.join("&")}return o[0]+"?"+i.param(n)},_cleanUrl:function(i){var o=i.split("?");return o[0]},_loadImage:function(){if(!this._imageLoaded&&!this._imageLoading){this.loading=i('<div class="amp-loading"></div>'),this._imageLoading=!0;var o=this.element[0].src||this.element.attr("data-amp-src");this.element.on("load",i.proxy(this._onImageLoad,this)),this.element[0].src="",this.element[0].src=o}},_getNaturalSize:function(i){return{width:this.element[0].naturalWidth,height:this.element[0].naturalHeight}},_setTransforms:function(i,o){return-1==i.indexOf("?")?i+"?"+o:i+"&"+o},_setBounds:function(i,o,n,t,e,r){return i>=n&&(i=n),o>=t&&(o=t),e>=i&&(i=e),r>=o&&(o=r),{x:i,y:o}},_track:function(i,o){this._trigger(i,null,o),window.amp&&amp.stats&&amp.stats.event&&amp.stats.event(this.element,"zoom",i,o)},_setCursor:function(i,o){return"string"!=typeof i&&(i="auto"),i.indexOf("zoom")<0?(o.css("cursor",i),!1):document.documentMode?!1:("undefined"!=typeof InstallTrigger&&o.css("cursor","-moz-"+i),void(window.chrome&&o.css("cursor","-webkit-"+i)))},_setZoomCursor:function(i){var o=this.options.zoom;if(o.length){var n=o.indexOf(this.zoomBy);n===o.length-1?this._setCursor(this.options.cursor.active,i):this._setCursor(this.options.cursor.inactive,i)}else this.zoomBy>1?this._setCursor(this.options.cursor.active,i):this._setCursor(this.options.cursor.inactive,i)},_getDistance:function(i){var o=Math.abs(i[0].pageX-i[1].pageX),n=Math.abs(i[0].pageY-i[1].pageY);return Math.sqrt(o*o+n*n)},_getPosition:function(i){return{x:(i[0].pageX+i[1].pageX)/2,y:(i[0].pageY+i[1].pageY)/2}},_destroy:function(){this.element.unwrap().unwrap(),this.wrapper.remove(),this.element.removeClass("amp"),this.element.removeClass("amp-zoom"),this.element.removeClass(this.options.states.active),this.element.removeClass(this.options.states.inactive),this.element.css({cursor:"",height:"","max-width":"",width:"",opacity:"",position:"",display:"",top:"",left:"",zoom:""}),this._removeEmptyAttributeHelper(this.element)},_removeEmptyAttributeHelper:function(i,o){for(var n=o||["class","style"],t=0,e=n.length;e>t;t++)i.attr(n[t])&&i.prop(n[t])||i.removeAttr(n[t])}})}(jQuery),function(i){i.widget("amp.ampZoomInline",{options:{scaleMax:3,scaleStep:.5,scaleSteps:!1,events:{zoomIn:"mouseup touchstart",zoomOut:"mouseup touchend",move:"mousemove touchmove"},stopPropagation:"",activation:{inGesture:!0},pinch:!1,transforms:"",preload:"none",pan:!1},_getCreateOptions:function(){var o=this.element.data().ampZoomInline;return o?i.extend(!0,{},this.options,o):this.options},_create:function(){this.scale=1,this.element.addClass("amp amp-zoom"),this.$parent=this.element.parent(),this._invalidateParentSize(),this.element.on(this.options.events.zoomIn,i.proxy(this.zoomIn,this)),this.options.activation.inGesture||(this.gestureDetect=new o(this.element)),this._track("created"),"created"==this.options.preload&&this.load(),this.options.pan&&(i(document).on("dragstart",function(){return!1}),this.element.parent().on("mousedown touchstart",i.proxy(function(o){return this.scale>1&&o.stopPropagation(),this.panner&&(this.panner.remove(),delete this.panner),this.scale>1&&(this.panner=new t(this,o,i.proxy(function(i,o){this.zoomArea&&this.zoomArea.setPosition(i,o)},this))),!0},this))),this.options.pinch&&this.element.parent().on("touchstart",i.proxy(function(o){return this.pincher&&(this.pincher.remove(),delete this.pincher),this.pincher=new n(o,i.proxy(function(){this.zoomIn()},this),i.proxy(function(){this.zoomOut()},this)),!0},this)),""!==this.options.stopPropagation&&this.element.parent().on(this.options.stopPropagation,i.proxy(function(i){1!=this.scale&&i.stopPropagation()},this))},visible:function(i){this._visible!=i&&(i&&this._track("visible",{visible:i}),i?"visible"==this.options.preload&&this.load():this.zoomOutFull(),this._visible=i)},load:function(){this._setupZoomArea().then(i.proxy(function(i){i.setScale(this.options.zoom)},this))},_setupZoomArea:function(){return new Promise(i.proxy(function(o,n){this.zoomArea?o(this.zoomArea):this.getImageSize().then(i.proxy(function(i){i.error?n(!1):(this.zoomArea=new e(this.element,this.$parent,i,this.options.transforms),o(this.zoomArea))},this))},this))},getImageSize:function(){return new Promise(i.proxy(function(o,n){this.element[0].naturalWidth&&this.element[0].naturalHeight?o({x:this.element[0].naturalWidth,y:this.element[0].naturalHeight}):this.element[0].width&&this.element[0].height&&o({x:this.element[0].width,y:this.element[0].height}),this.element.on("load",i.proxy(function(){this.element[0].naturalWidth&&this.element[0].naturalHeight?o({x:this.element[0].naturalWidth,y:this.element[0].naturalHeight}):this.element[0].width&&this.element[0].height&&o({x:this.element[0].width,y:this.element[0].height})},this)),this.element.on("error",i.proxy(function(){n({error:!0})},this))},this))},_invalidateParentSize:function(){this.parentSize={x:this.$parent.width(),y:this.$parent.height()}},state:function(){return{scale:this.scale,scaleMax:this.options.scaleMax,scaleStep:this.options.scaleStep}},zoomInFull:function(i){this.setScale(this.options.scaleMax),this._track("zoomedInFull",{domEvent:i,scale:this.options.scaleMax,scaleMax:this.options.scaleMax,scaleStep:this.options.scaleStep})},zoomIn:function(o){if((this.options.scaleSteps||1==this.scale)&&(o&&o.preventDefault(),this.options.activation.inGesture||!this.gestureDetect.detected)){var n=this.scale;this.options.scaleSteps?(this.scale+=this.options.scaleStep,this.scale=Math.min(this.scale,this.options.scaleMax)):this.scale=this.options.scaleMax,n!=this.scale&&(this._track("zoomedIn",{domEvent:o,scale:this.scale,scaleMax:this.options.scaleMax,scaleStep:this.options.scaleStep}),this.setScale(this.scale),setTimeout(i.proxy(function(){i(document).on(this.options.events.move,i.proxy(this._setPos,this)),this.options.scaleSteps||i(document).on(this.options.events.zoomOut,i.proxy(this.zoomOut,this))},this),1))}},zoomInClick:function(o){if(this.options.activation.inGesture||!this.gestureDetect.detected){var n=this.scale;this.scale+=this.options.scaleStep,this.scale=Math.min(this.scale,this.options.scaleMax),n!=this.scale&&(this._track("zoomedIn",{domEvent:o,scale:this.scale,scaleMax:this.options.scaleMax,scaleStep:this.options.scaleStep}),this.setScale(this.scale),setTimeout(i.proxy(function(){i(document).on(this.options.events.move,i.proxy(this._setPos,this))},this),1))}},setScale:function(o){this.scale=o,this._setupZoomArea().then(i.proxy(function(i){i&&(i.setScale(this.scale),this._invalidateParentSize())},this))},_setPos:function(i){this._track("settingPos",{domEvent:i});var o=i?this._getPercentagePos(i):{x:.5,y:.5};this.zoomArea.setPosition(o.x,o.y)},zoomOut:function(o){var n=this.scale;this.options.scaleSteps?(this.scale-=this.options.scaleStep,this.scale=Math.max(this.scale,1)):this.scale=1,n!=this.scale&&(1==this.scale&&(this.options.events.move&&i(document).off(this.options.events.move,this._setPos),this.options.events.zoomOut&&i(document).off(this.options.events.zoomOut,this.zoomOut)),this.zoomArea.$preloader&&this.zoomArea.$preloader.addClass("amp-hidden"),this.zoomArea.setScale(this.scale),this._track("zoomedOut",{domEvent:o,scale:this.scale,scaleMax:this.options.scaleMax,scaleStep:this.options.scaleStep}))},zoomOutFull:function(o){this.zoomArea&&(this.options.events.move&&i(document).off(this.options.events.move,this._setPos),this.options.events.zoomOut&&i(document).off(this.options.events.zoomOut,this.zoomOut),this.scale=1,this.zoomArea.$preloader&&this.zoomArea.$preloader.addClass("amp-hidden"),this.zoomArea.setScale(1),this._track("zoomedOutFull",{domEvent:o,scale:this.scale,scaleMax:this.options.scaleMax,scaleStep:this.options.scaleStep}))},_convertEvent:function(i){return i.originalEvent&&i.originalEvent.touches&&i.originalEvent.touches[0]&&(i.preventDefault(),i=i.originalEvent.touches[0]),i},_getPercentagePos:function(i){i=this._convertEvent(i);var o=this.$parent.offset();return{x:(i.pageX-o.left)/this.parentSize.x,y:(i.pageY-o.top)/this.parentSize.y}},_track:function(i,o){this._trigger(i,null,o),window.amp&&amp.stats&&amp.stats.event&&amp.stats.event(this.element,"zoom",i,o)},_destroy:function(){this.element.removeClass("amp"),this.element.removeClass("amp-zoom"),this._removeEmptyAttributeHelper(this.element)},_removeEmptyAttributeHelper:function(i,o){for(var n=o||["class","style"],t=0,e=n.length;e>t;t++)i.attr(n[t])&&i.prop(n[t])||i.removeAttr(n[t])}});var o=function(o,n){this.toleranceX=void 0!==o?o:0,this.toleranceY=void 0!==n?n:0,this.detected=!1,this.$document=i("body"),this.$document.on("mousedown touchstart",i.proxy(this.startDetecting,this))};o.prototype.convertEvent=function(i){return i.originalEvent&&i.originalEvent.touches&&i.originalEvent.touches[0]&&(i=i.originalEvent.touches[0]),i},o.prototype.startDetecting=function(o){this.detected=!1,this.$document.on("mousemove touchmove",i.proxy(this.moveDetected,this)),this.$document.on("mouseup touchend",i.proxy(this.stopDetecting,this))},o.prototype.moveDetected=function(i){this.detected=!0},o.prototype.stopDetecting=function(i){this.$document.off("mousemove touchmove",this.moveDetected),this.$document.off("mouseup touchend",this.stopDetecting)};var n=function(o,n,t){this.threshold=100,o=this.getFingers(o),this.cbIn=n,this.cbOut=t,2==o.length&&(this.start=this.getDistance(o),i(document).on("touchmove",i.proxy(this.move,this)),i(document).on("touchend",i.proxy(this.end,this)))};n.prototype.getDistance=function(i){var o=Math.abs(i[0].pageX-i[1].pageX),n=Math.abs(i[0].pageY-i[1].pageY);return Math.sqrt(o*o+n*n)},n.prototype.move=function(i){i.preventDefault(),i=this.getFingers(i);var o=this.getDistance(i),n=o-this.start;n>this.threshold&&(this.cbIn(),this.start=o),n<0-this.threshold&&(this.cbOut(),this.start=o)},n.prototype.remove=function(){this.end()},n.prototype.end=function(o){i(document).off("mousemove touchmove",this.move),i(document).off("mouseup touchend",this.end)},n.prototype.getFingers=function(i){return i.originalEvent&&i.originalEvent.touches&&(i=i.originalEvent.touches),i};var t=function(o,n,t){this.multiFinger(n)||(n=this.convertEvent(n),this.start={x:n.pageX,y:n.pageY},this.zoomArea=o.zoomArea,this.cb=t,this.element=o.element,this.currentPixPos=this.zoomArea.getPixPos(),i(document).on("mousemove touchmove",i.proxy(this.move,this)),i(document).on("mouseup touchend",i.proxy(this.end,this)))};t.prototype.move=function(i){i.preventDefault(),i=this.convertEvent(i);var o=i.pageX-this.start.x,n=i.pageY-this.start.y,t=this.zoomArea.getPercentFromPos(this.currentPixPos.x+o,this.currentPixPos.y+n);this.cb(t.x,t.y)},t.prototype.end=function(o){i(document).off("mousemove touchmove",this.move),i(document).off("mouseup touchend",this.end)},t.prototype.remove=function(){this.end()},t.prototype.multiFinger=function(i){return i.originalEvent&&i.originalEvent.touches&&i.originalEvent.touches.length>1},t.prototype.convertEvent=function(i){return i.originalEvent&&i.originalEvent.touches&&i.originalEvent.touches[0]&&(i=i.originalEvent.touches[0]),i};var e=function(i,o,n,t){this.animating=!1,this.transforms=t,this.initialSrc=i.attr("src"),this.scale=1,this.$area=o,this.$source=i,this.originalSize=n,this.posPercentageX=.5,this.posPercentageY=.5,this.createContainer(),this.hide()};e.prototype.getPercentagePosWithScale=function(i){},e.prototype.createContainer=function(){var o=this;this.$container=i('<div class="amp-zoomed-container"></div>'),this.$preloader=i('<img class="amp-zoomed-clone amp-hidden">'),this.$preloader.on("load",function(){o._preloaderImgLoaded=!0}),this.$zoomed=i('<img class="amp-zoomed" style="z-index:2;" src=""/>'),this.$container.append(this.$zoomed),this.$container.append(this.$preloader),this.$area.append(this.$container),this.$container.css({position:"absolute",top:0,left:0,bottom:0,right:0})},e.prototype.invalidatePosition=function(){this.setPosition(this.posPercentageX,this.posPercentageY)},e.prototype.setPosition=function(i,o){this.animating||(this.$preloader.addClass("amp-hidden"),this.$zoomed.width()<=this.$area.width()&&(i=.5),this.$zoomed.height()<=this.$area.height()&&(o=.5),this.posPercentageX=i,this.posPercentageY=o,i=Math.min(1,Math.max(0,i)),o=Math.min(1,Math.max(0,o)),this.$zoomed.css("left",0-(this.$zoomed.width()-this.$area.width())*i+"px"),this.$zoomed.css("top",0-(this.$zoomed.height()-this.$area.height())*o+"px"))},e.prototype.getPixPos=function(i,o){return void 0==i&&void 0==o&&(i=this.posPercentageX,o=this.posPercentageY),i=Math.min(1,Math.max(0,i)),o=Math.min(1,Math.max(0,o)),{x:0-(this.newSize.x-this.$area.width())*i,y:0-(this.newSize.y-this.$area.height())*o}},e.prototype.getPercentFromPos=function(i,o){var n=0-i/(this.newSize.x-this.$area.width()),t=0-o/(this.newSize.y-this.$area.height());return{x:n,y:t}},e.prototype.animate=function(o,n,t){this.animating=!0,o.x<=this.$area.width()&&(n.x=this.getPixPos(.5,.5).x),o.y<=this.$area.height()&&(n.y=this.getPixPos(.5,.5).y),this.$zoomed.animate({width:o.x,height:o.y,left:n.x+"px",top:n.y+"px"},500,i.proxy(function(){this.animating=!1,t&&t()},this))},e.prototype.updateImageSrc=function(o){var n=this,t=0;return this.preloadedImgInterval&&clearInterval(this.preloadedImgInterval),o?void(this.preloadedImgInterval=setInterval(function(){if(t+=1,t>=30)return clearInterval(n.preloadedImgInterval),!1;if(1!=!n._preloaderImgLoaded){var o=n.$zoomed.prop("attributes");i.each(o,function(){"src"!=this.name&&"class"!=this.name&&n.$preloader.attr(this.name,this.value)}),n.$preloader.removeClass("amp-hidden"),n.setImage(),clearInterval(n.preloadedImgInterval)}},200)):(n.$preloader.addClass("amp-hidden"),!1)},e.prototype.setScale=function(i,o){var n=this,t=i>this.scale;i!=this.scale&&(i<this.scale&&1==i?this.newSize={x:this.$source.width(),y:this.$source.height()}:this.newSize={x:this.$source.width()*i,y:this.$source.height()*i},1==this.scale&&(this.$zoomed.attr("src",this.$source.attr("src")),i>this.scale&&(this.$zoomed.width(this.$source.width()),this.$zoomed.height(this.$source.height())),this.setPosition(.5,.5),this.show()),1==i?this.animate(this.newSize,this.getPixPos(),function(){n.hide(),n.updateImageSrc(!1)}):this.animate(this.newSize,this.getPixPos(),function(){n.updateImageSrc(t)}),this.scale=i,this.invalidateImageURL({x:this.originalSize.x*i,y:this.originalSize.y*i}))},e.prototype.show=function(){this.invalidatePosition(),i(window).off("resize",this.invalidatePosition),i(window).on("resize",i.proxy(this.invalidatePosition,this)),this.$container.show()},e.prototype.hide=function(){this.$container.hide(),i(window).off("resize",this.invalidatePosition)},e.prototype.invalidateImageURL=function(i){var o="";this.transforms&&this.transforms.length&&(o=this.transforms+"&");var n=this.initialSrc.split("?")[0]+"?"+o+"w="+i.x+"&h="+i.y;(0==i.x||0==i.y)&&(n=""),this._preloaderImgLoaded=!1,this.$preloader.attr("src",n)},e.prototype.setImage=function(){this.$zoomed.attr("src",this.$preloader.attr("src"))}}(jQuery),function(i){i.widget("amp.ampVideo",{options:{autoplay:!1,loop:!1,muted:!1,skin:"amp-video-skin",responsive:!0,preload:"auto",pauseOnHide:!0,controls:!0,nativeControlsForTouch:!0,plugins:{},enableSoftStates:!0},_states:{stopped:0,buffering:1,paused:2,playing:3,loading:4,error:5,idle:6},_currentState:0,_ready:!1,_loopCount:0,_savedHTML:"",_getCreateOptions:function(){this._savedHTML=this.element[0].outerHTML;var o=this.element.data().ampVideo;return o?i.extend(!0,{},this.options,o):this.options},_create:function(){this.element.addClass("amp amp-video");var o=this.element.find("video"),n=this;o.addClass("video-js "+this.options.skin),videojs&&(videojs.options.flash.swf=this.options.swfUrl+"video-js.swf"||"../../assets/video-js.swf",this._player=videojs(o[0],{autoplay:this.options.autoplay,muted:this.options.muted,width:"100%",height:"100%",loop:!1,controls:this.options.controls,preload:this.options.preload,plugins:n._sanitisePlugins(this.options.plugins),nativeControlsForTouch:this.options.nativeControlsForTouch})),n._calcSize(),n.options.responsive&&i(window).bind("resize",function(i){return function(){return i._calcSize()}}(n)),this._player.ready(function(){n._ready=!0;var o=n.element.find(".vjs-tech"),t=setInterval(function(){if("auto"==n.options.height){var i=o.css({height:"auto"}).height();0!=i&&(clearInterval(t),n.element.height(i),o.css({height:""}),n._player.dimensions(n.element.width(),n.element.height()))}},200);n.options.autoplay&&n.state(n._states.playing),this.on("play",function(i){n.softPlay&&n.options.enableSoftStates?n.softPlay=!1:(n.state(n._states.playing),n._track("play",{event:i,player:this,time:this.currentTime(),duration:n.duration}))}),this.on("error",function(i){n.state(n._states.error),n._track("error",null)}),this.on("pause",function(i){i.target.ended||i.target.seeking||(n.state(n._states.paused),n._track("pause",{event:i,player:this,time:this.currentTime(),duration:n.duration}))}),this.on("waiting",function(i){n.state(n._states.buffering)}),this.on("seeking",function(i){n.softSeek?n.softSeek=!1:(n.state()!==n._states.paused&&0!==i.target.currentTime&&n.options.enableSoftStates&&(n.softPlay=!0),n._track("seeked",{event:i,player:this,time:this.currentTime(),duration:n.duration}))}),this.on("timeupdate",function(i){n._track("timeUpdate",{event:i,player:this,time:this.currentTime(),duration:n.duration})}),this.on("volumechange",function(i){n._track("volume",{event:i,player:this,volume:this.volume(),muted:this.muted()})}),this.on("durationchange",function(i){n.duration=this.duration(),n._track("durationChange",{event:i,player:this,duration:n.duration})}),this.on("fullscreenchange",function(o){n._track("fullScreenChange",{event:o,player:this}),setTimeout(function(){i(window).resize()},200)}),this.on("ended",function(i){n.options.loop?(n.softSeek=!0,n._player.currentTime(0),n.softPlay=!0,n._player.play(),n._track("looped",{count:++n._loopCount})):(n.state(n._states.stopped),n._track("ended",null))}),n._track("created",{player:this,duration:n.duration})})},visible:function(i){i!=this._visible&&(i?(this._track("visible",{visible:i}),this._calcSize()):(this._states.playing==this.state()||this._states.buffering==this.state())&&this.options.pauseOnHide&&this.pause(),this._visible=i)},redraw:function(){this._calcSize()},_calcSize:function(){var i,o;if(this.options.responsive&&this.options.width&&this.options.height&&"auto"!=this.options.width&&"auto"!=this.options.height){var n=this.element.css("display");this.element.css("display","block"),i=Math.round(this.element.width()),this.element.css("display",n),o=Math.round(i*(this.options.height/this.options.width)),this.element.height(o)}else this.options.width?this.element.width(this.options.width):this.options.responsive&&this.element.width(this.element.parent().width()),this.options.height?this.element.height(this.options.height):this.options.responsive&&this.element.height(this.element.parent().height());if(this.options.center){var t=this.element.height(),e=this.element.parent().height();this.element.css("margin-top",e/2-t/2+"px")}this._player&&this._player.dimensions(this.element.width(),this.element.height())},play:function(){this._ready&&this._states.playing!==this.state()&&this._player.play()},pause:function(){this._ready&&this._states.paused!==this.state()&&this._player.pause()},stop:function(){this._ready&&this._states.stopped!==this.state()&&(this._player.pause(),this.softSeek=!0,this._player.currentTime(0),this._track("stopped",null),this.state(this._states.stopped))},seek:function(i){this._ready&&this.currentTime(i)},currentTime:function(i){return void 0===i?this._player.currentTime():void this._player.currentTime(i)},state:function(i){return void 0===i?this._currentState:(this._currentState=i,void this._trigger("stateChange",null,{state:i}))},_track:function(i,o){this._trigger(i,null,o),window.amp&&amp.stats&&amp.stats.event&&amp.stats.event(this.element,"video",i,o)},_destroy:function(){this._player.dispose(),this._player=null,this.element[0].outerHTML=this._savedHTML},_sanitisePlugins:function(i){return i&&0==i.resolutions&&delete i.resolutions,i}})}(jQuery),function(i){i.widget("amp.ampSpin",i.amp.ampStack,{options:{delay:50,autoplay:!1,loop:!0,responsive:!0,states:{selected:"amp-selected",seen:"amp-seen",active:"amp-active",inactive:"amp-inactive"},events:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},momentum:!0,preload:"created",preloadType:"full",minDistance:25,activate:"down",friction:.97,dir:"normal",gesture:{enabled:!0,fingers:1},orientation:"horz",start:1,cursor:{active:"auto",inactive:"auto"},play:{onLoad:!1,onVisible:!1,repeat:1},dragDistance:200,lazyLoad:!1},_getCreateOptions:function(){var o=this.element.data().ampSpin;return o?i.extend(!0,{},this.options,o):this.options},_create:function(){var o=this,n=this._children=this.element.children();
this._count=this.element.children().length;this.isIE=-1!==navigator.userAgent.indexOf("MSIE")||navigator.appVersion.indexOf("Trident/")>0,this.$document=i(document),this.options.friction=Math.min(this.options.friction,.999),this.options.friction=Math.max(this.options.friction,0),this._setCursor(this.options.cursor.inactive),this.count=this.element.children().length,this.options.dragDistance=Math.max(this.options.dragDistance,1),this._index=Math.max(1,Math.min(this.options.start,this.count)),-1==i.inArray(this.options.preload,["created","visible","none"])&&(this.options.preload="created"),this.element.addClass("amp"),this.element.addClass("amp-spin"),this.element.addClass(this.options.states.inactive),this.imgs=this.element.find("img:not(.amp-zoom-img)"),this.toLoadCount=this.imgs.length,this.loadedCount=0,n.addClass("amp-frame"),this.isIE?(n.css({"z-index":-1}),n.eq(this._index-1).css("z-index",1)):(n.css({display:"none"}),n.eq(this._index-1).css("display","block")),n.eq(this._index-1).addClass(this.options.states.selected+" "+this.options.states.seen),setTimeout(function(i){return function(){return i._calcSize()}}(o),1),this.options.responsive&&i(window).on("resize",function(i){return function(){return i._calcSize()}}(o)),this.element.on("dragstart",function(i){return!1}),this.element.on(this.options.events.start,i.proxy(this._startDrag,this)),this.element.on("mousewheel DOMMouseScroll",function(i){return o._mouseScroll(i)}),this.options.autoplay&&this.play(),"created"==this.options.preload&&this._startPreload(),this._track("created",{index:this._index,canNext:this.canNext(),canPrev:this.canPrev()})},_setCursor:function(i){return i.indexOf("zoom")<0&&i.indexOf("grab")<0?(this.element.css("cursor",i),!1):document.documentMode?!1:("undefined"!=typeof InstallTrigger&&this.element.css("cursor","-moz-"+i),void(window.chrome&&this.element.css("cursor","-webkit-"+i)))},redraw:function(){this._calcSize()},_mouseScroll:function(i){var o=0;return i||(i=window.event),i.originalEvent.wheelDelta?o=i.originalEvent.wheelDelta:i.originalEvent.detail&&(o=-i.originalEvent.detail),o>0?this.next():this.prev(),this._track("scroll",{domEvent:i,delta:o}),i.preventDefault(),!1},visible:function(i){i!=this._visible&&(this._super(i),i&&("visible"==this.options.preload&&this._startPreload(),"none"==this.options.preload&&this._startPreload(this._index),this.options.play.onVisible&&this._loaded&&this.playRepeat(this.options.play.repeat)))},_resolveEventCoords:function(i){return i=i.originalEvent,i.touches&&i.touches.length?{x:i.touches[0].clientX,y:i.touches[0].clientY}:i.changedTouches&&i.changedTouches.length?{x:i.changedTouches[0].clientX,y:i.changedTouches[0].clientY}:{x:i.clientX,y:i.clientY}},_startPreload:function(o){if(!(this._loaded||this._loading&&!this.first)){var n=this;this._loading=!0,this.first||(this._track("startPreload"),"none"!=this.options.preload&&("full"==this.options.preloadType?(this.pre=i('<li class="amp-progress amp-frame"></li>'),this.element.append(this.pre)):"window"==this.options.preloadType&&(this.progressIndicator=i('<div class="amp-progress-indicator"><div class="amp-progress-message"></div><div class="amp-progress-bar-background"><div class="amp-progress-bar"></div></div></div>'),this.progressIndicator.find(".amp-progress-message").html(this.options.progressMessage||"Loading..."),this.progressIndicator.progress=n.progressIndicator.find(".amp-progress-bar"),this.progressIndicator.visible=!0,this.element.append(this.progressIndicator))));var t=function(i){if(n.loadedCount++,n.loadedCount>=n.toLoadCount&&!n._loaded)n._unsetLoadEvents(n.imgs),n._loaded=!0,n.pre&&n.pre.remove(),n.options.play.onLoad&&n.playRepeat(n.options.play.repeat),n._loading=!1,n.progressIndicator&&(n.progressIndicator.visible=!1,n.progressIndicator.remove()),n._track("preloaded");else{var o=n.loadedCount/n.toLoadCount*100;n.pre&&(n.pre.css("width",100-o+"%"),n.pre.css("left",o+"%")),n.progressIndicator&&n.progressIndicator.visible&&n.progressIndicator.progress.css("width",o+"%")}};o?(this.first=!0,this.toLoadCount-=1,this._callImageMethod(i(this.imgs[o-1]),t)):this._callImageMethod(this.imgs,t)}},_unsetLoadEvents:function(o){if(o)for(var n=0,t=o.length;t>n;n++){var e=i(o[n]),r=e.data();r["amp-ampZoom"]?e.ampZoom({loaded:null}):e.ampImage({loaded:null})}},_callImageMethod:function(o,n){for(var t=0,e=o.length;e>t;t++){var r=i(o[t]),l=r.data();l["amp-ampZoom"]?(r.ampZoom({loaded:n}),r.ampZoom("load",this.options.preload)):(r.ampImage({loaded:n}),r.ampImage("load",this.options.preload))}},preload:function(){this._startPreload()},playRepeat:function(i){if("inf"==i)return void this.play();for(var o=this,n=0;i>n;n++)for(var t=0;t<this.count;t++)setTimeout(function(){o.next()},this.options.delay*(n*this.count+t))},_startDrag:function(o){var n=this,t=this._resolveEventCoords(o),e=i(o.currentTarget).offset(),r=t.x-e.left,l=t.y-e.top;if(!this._started){if(this.options.gesture.enabled&&o.originalEvent&&o.originalEvent.touches&&o.originalEvent.touches[0]&&o.originalEvent.touches.length!=this.options.gesture.fingers)return!0;this._started=!0,this._track("startMove",{domEvent:o,pos:{x:r,y:l}}),this._ended=!1,this.pause(),this._setCursor(this.options.cursor.active),this.element.removeClass(this.options.states.inactive).addClass(this.options.states.active);var s=this._mbind=function(i){return function(o){return n._mouseMove(o,e,r,l,i)}}(this._index),a=this._ubind=function(i){return function(o){return n._endDrag(o,e,r,l,i)}}(this._index);return this.$document.on(this.options.events.move,s),this.$document.on(this.options.events.end,a),this._mouseMoveInfo=[{e:o,o:e,mx:r,my:l,sindex:this._index}],window.navigator.userAgent.indexOf("MSIE ")>0?!1:void this.element.find(".amp-spin").each(function(n,t){var e=i(t).data().ampAmpSpin;e&&e._startDrag&&e._startDrag(o)})}},_mouseMove:function(i,o,n,t,e){if(this.options.gesture.enabled&&i.originalEvent&&i.originalEvent.touches&&i.originalEvent.touches[0]&&i.originalEvent.touches.length!=this.options.gesture.fingers)return!0;var r=this._resolveEventCoords(i),l=r.x-o.left,s=r.y-o.top,a=l-n,c=s-t,u=(this._mouseMoveInfo,{e:i,mx:l,my:s});return this.moveDir||(Math.abs(a)<Math.abs(c)?this.moveDir="vert":Math.abs(a)>Math.abs(c)?this.moveDir="horz":this.moveDir=this.options.orientation),this.options.orientation!=this.moveDir?!0:(this._mouseMoveInfo.push(u),this._mouseMoveInfo.length>2&&this._mouseMoveInfo.shift(),this._moveSpin("horz"==this.options.orientation?a:c,i,e),this.options.orientation==this.moveDir?!1:void 0)},_moveSpin:function(i,o,n){var t=Math.round(i/this.options.dragDistance*(this._count-1));"normal"==this.options.dir&&(t=0-t),this._track("move",{domEvent:o,distFromStart:i});var e=this._numToIndex(t+n);e!=this._index&&(this._checkLoop(e),this.goTo(e))},_checkLoop:function(i){Math.abs(this._index-i)>2&&(this._index>i?this._track("looped","forwards"):this._track("looped","backwards"))},_endDrag:function(i,o,n,t,e){"horz"==this.moveDir&&(i.preventDefault(),i.stopPropagation()),this.moveDir=null;var r=this;if(!this._ended&&(this._started=!1,this._ended=!0,this._track("endMove",{domEvent:i}),this.$document.off(this.options.events.end,this._ubind),this.$document.off(this.options.events.move,this._mbind),clearInterval(this._timer),this._setCursor(this.options.cursor.inactive),this.element.removeClass(this.options.states.active).addClass(this.options.states.inactive),this.options.momentum&&2==this._mouseMoveInfo.length)){var l=this._mouseMoveInfo,s=l[1].e.timeStamp-l[0].e.timeStamp,a="horz"==this.options.orientation?l[1].mx-l[0].mx:l[1].my-l[0].my;if(0==a||0==s)return;var c=a/s,u=c,k=this.options.friction,d="horz"==this.options.orientation?l[1].mx-n:l[1].my-t,p=0,x=0;if(Math.abs(d)<this.options.minDistance)return;var b=null,m=function(o){var n;n=b?o-b:15,b=o;for(var t=n/10;t>0;)u-=(u-u*k)*Math.min(t,1),t-=1;p+=u*n,x+=n,r._moveSpin(p+d,i,e),Math.abs(u)>.1&&window.requestAnimationFrame(m)};return void window.requestAnimationFrame(m)}},_calcSize:function(){this._super(),this.progressIndicator&&this.progressIndicator.visible&&(this.progressIndicator.css("top",(parseInt(i(this.element.find("li")[0]).css("height"))-parseInt(this.progressIndicator.css("height")))/2+"px"),this.progressIndicator.css("left",(parseInt(i(this.element.find("li")[0]).css("width"))-parseInt(this.progressIndicator.css("width")))/2+"px"))},_getIndex:function(i){var o=this.element.children();if(i>o.length){if(!this.options.loop)return;i=1}else if(1>i){if(!this.options.loop)return;i=o.length}},_direction:function(i){for(var o=0,n=0,t=i;t!=this._index;)t>this._count?t=0:t++,o++;for(t=i;t!=this._index;)1>t?t=this._count:t--,n++;return o>n?!0:!1},_loopIndex:function(i,o,n){for(var t=i?1:-1,e=o,r=0;n>r;r++)e+t>this._count?e=1:1>e+t?e=this._count:e+=t;return e},_loopCount:function(i,o,n){for(var t=i?1:-1,e=o,r=0;e!=n;)r++,e+t>this._count?e=1:1>e+t?e=this._count:e+=t;return r},_animate:function(i){var o=this.element,n=o.children("li").eq(this._index-1),t=o.children("li").eq(i-1);this._index!=i&&(t.addClass(this.options.states.selected+" "+this.options.states.seen),this.isIE?(t.css("z-index",1),n.css("z-index",-1)):(t.css("display","block"),n.css("display","none")),n.removeClass(this.options.states.selected),this._setIndex(i),this._setIndex(i,!0))},_track:function(i,o){this._trigger(i,null,o),window.amp&&amp.stats&&amp.stats.event&&amp.stats.event(this.element,"spin",i,o)},_destroy:function(){this.element.removeClass("amp"),this.element.removeClass("amp-spin"),this.element.removeClass(this.options.states.active),this.element.removeClass(this.options.states.inactive),this.element.css("cursor",""),this.element.find(".amp-progress").remove(),this.element.find(".amp-loading").remove(),this._removeEmptyAttributeHelper(this.element);var o=this.element.children();o.removeClass("amp-frame"),o.removeClass(this.options.states.selected),o.removeClass(this.options.states.seen),o.css("display","");for(var n=0,t=o.length;t>n;n++)this._removeEmptyAttributeHelper(i(o[n]));var e=o.find("img");e.removeClass("amp amp-main-img, amp-image"),e.css("display","");for(var n=0,t=e.length;t>n;n++)this._removeEmptyAttributeHelper(i(e[n]))}})}(jQuery),"undefined"!=typeof videojs&&videojs.plugin("resolutions",function(i){var o=this;if("undefined"!=typeof vjs){vjs.reduce=function(i,o,n,t){if(i&&0!==i.length){for(var e=0,r=i.length;r>e;e++)n=o.call(i,n,i[e],e);return n}},this.resolutions_={options_:{},stopStream:function(){switch(o.techName){case"Html5":break;case"Flash":o.tech.el_.vjs_stop()}o.src("")},removeSources:function(i){var n=o.el_.getElementsByTagName("video")[0];if("Html5"===o.techName&&n)for(var t=n.getElementsByTagName("source"),e=0;e<t.length;e++)n.removeChild(t[e])},bucketByTypes:function(i){return vjs.reduce(i,function(i,o,n){return(i[o.type]=i[o.type]||[]).push(o),i},{},o)},selectSource:function(i){this.removeSources();var o=this.bucketByTypes(i),n=this.selectTypeAndTech(i);return n?(this.options_.sourceResolutions=o[n.type],this.selectResolution(this.options_.sourceResolutions)):!1},selectTypeAndTech:function(i){for(var n,t,e=0,r=o.options_.techOrder;e<r.length;e++)if(n=videojs.capitalize(r[e]),t=window.videojs[n],t.isSupported())for(var l=0,s=i;l<s.length;l++){var a=s[l];if(t.canPlaySource(a))return{type:a.type,tech:n}}},selectResolution:function(i){var n=0,t=!!window.localStorage;videojs.obj.each(i,function(i,o){o.index=parseInt(i,10),o["data-default"]&&(n=o.index)},o);var e=n;if(t){var r=parseInt(window.localStorage.getItem("videojs_preferred_res"),10);isNaN(r)||(e=r)}var l=i.length-1,s=e>l?l:e;return i[s]}},o.resolution=function(){return this.cache_.src.res},o.changeResolution=function(i){if(this.cache_.src===i.src)return this.trigger("resolutionchange"),this;var o=this.currentTime(),n=this.paused();this.pause(),this.resolutions_.stopStream(),"Html5"===this.techName?this.src(i.src):this.loadTech(this.techName,{src:i.src}),this.ready(function(){this.one("loadeddata",vjs.bind(this,function(){this.currentTime(o)})),this.trigger("resolutionchange"),n||(this.load(),this.play()),vjs.setLocalStorage("videojs_preferred_res",parseInt(i.index,10))})};var n=videojs.MenuItem.extend({init:function(i,o){o.label=o.source["data-res"],videojs.MenuItem.call(this,i,o),this.source=o.source,this.resolution=o.source["data-res"],this.player_.one("loadstart",vjs.bind(this,this.update)),this.player_.on("resolutionchange",vjs.bind(this,this.update))}});n.prototype.onClick=function(){videojs.MenuItem.prototype.onClick.call(this),this.player_.changeResolution(this.source)},n.prototype.update=function(){var i=this.player_;i.cache_.src===this.source.src?this.selected(!0):this.selected(!1)};var t=videojs.MenuButton.extend({init:function(i,o){videojs.MenuButton.call(this,i,o),this.items.length<=1&&this.hide()}});t.prototype.sourceResolutions_,t.prototype.sourceResolutions=function(){return this.sourceResolutions_},t.prototype.onClick=function(i){if(i.target.className.match(/vjs-control-content/))this[this.el_.className.match(/touched/)?"removeClass":"addClass"]("touched");else{for(var o=$(".vjs-menu-button"),n=0;n<o.length;n++)videojs.removeClass(o[n],"touched");this.removeClass("touched")}},t.prototype.createItems=function(){for(var i=this.sourceResolutions_=this.player_.resolutions_.options_.sourceResolutions,o=[],t=0;t<i.length;t++)o.push(new n(this.player_,{source:this.sourceResolutions_[t]}));return o};var e=t.extend({init:function(i,o,n){t.call(this,i,o,n),this.el_.setAttribute("aria-label","Resolutions Menu"),this.el_.setAttribute("id","vjs-resolutions-button")}});e.prototype.kind_="resolutions",e.prototype.buttonText="Resolutions",e.prototype.className="vjs-resolutions-button",videojs.obj.merge(o.controlBar.options_.children,{resolutionsButton:{}});var r=o.resolutions_.selectSource(o.options_.sources);o.ready(function(){o.changeResolution(r);var i=new e(o);o.controlBar.addChild(i),delete o.controlBar.options_.children.resolutionsButton})}});